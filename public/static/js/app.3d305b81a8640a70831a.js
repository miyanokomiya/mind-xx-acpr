webpackJsonp([1],{"1hse":function(e,t){},"5myX":function(e,t){},"7zck":function(e,t){},"H/op":function(e,t){},N4hk:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),o=n("Dd8w"),r=n.n(o),s=n("NYxO"),a="USER",l="AUTHORITY_LOADING",c="CAN_WRITE",u={LOAD_USER:"LOAD_USER",SIGN_OUT:"SIGN_OUT",SET_AUTHORITY_LOADING:"SET_AUTHORITY_LOADING",DELETE_USER:"DELETE_USER"},d="SET_USER",h="SET_AUTHORITY_LOADING",f={name:"app",computed:{},mounted:function(){this.loadUser()},methods:r()({},Object(s.b)("user",{loadUser:u.LOAD_USER}))},v=n("XyMi"),m=Object(v.a)(f,function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{id:"app"}},[t("router-view")],1)},[],!1,null,null,null).exports,p=n("/ocq"),y=n("Sazm");y.initializeApp({apiKey:"AIzaSyB_t7IC5k4U8bedjSXvpbtsdF6KH5RfpOk",authDomain:"mind-xx-acpr.firebaseapp.com",databaseURL:"https://mind-xx-acpr.firebaseio.com",projectId:"mind-xx-acpr",storageBucket:"mind-xx-acpr.appspot.com",messagingSenderId:"940754615168"});var g=y,x={props:{value:{type:Boolean,required:!0},reauth:{type:Boolean,default:!1},persistent:{type:Boolean,default:!0}},methods:{authGoogle:function(){var e=new g.auth.GoogleAuthProvider;g.auth().signInWithRedirect(e)}}};var b=function(e){n("v7EL")},_=Object(v.a)(x,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{row:"","justify-center":""}},[i("v-dialog",{attrs:{"max-width":"280",value:e.value,persistent:e.persistent},on:{input:function(t){return e.$emit("input",t)}}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v("Please sign in")]),e._v(" "),i("v-card-text",{staticClass:"text-xs-left"},[i("div",[e._v(e._s(e.reauth?"and retry to continue":""))]),e._v(" "),i("br"),e._v(" "),i("v-btn",{attrs:{color:"white"},on:{click:e.authGoogle}},[i("img",{staticClass:"image",attrs:{src:n("y/zs")}})])],1)],1)],1)],1)},[],!1,b,"data-v-ef986022",null).exports,C={props:{value:{type:Boolean,required:!0},title:{type:String,default:"Confirm"},message:{type:String,required:!0},ok:{type:String,default:"OK"},cancel:{type:String,default:"CANCEL"}},methods:{}};var w=function(e){n("iVZg")},E=Object(v.a)(C,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{"max-width":"300",value:e.value,persistent:!1},on:{input:function(t){return e.$emit("input",t)}}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]),e._v(" "),n("v-card-text",{staticClass:"text-xs-left"},[e._v("\n        "+e._s(e.message)+"\n      ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"black darken-1",flat:"flat"},on:{click:function(t){e.$emit("cancel")}}},[e._v("\n          "+e._s(e.cancel)+"\n        ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"flat"},on:{click:function(t){e.$emit("ok")}}},[e._v("\n          "+e._s(e.ok)+"\n        ")])],1)],1)],1)],1)},[],!1,w,"data-v-e1aead5a",null).exports,k="LEFT_DRAWER",S="SET_LEFT_DRAWER",T="SET_LEFT_DRAWER",N={components:{AuthDialog:_,ConfirmDialog:E},data:function(){return{reauth:!1,deleteConfirm:!1,needAuthLocal:!1}},props:{needAuth:{type:Boolean,default:!1},hideLedfDrawer:{type:Boolean,default:!1}},computed:r()({},Object(s.c)("layouts",{leftDrawer:k}),Object(s.c)("user",{user:a,authorityLoading:l}),{authenticated:function(){return!!this.user},_needAuth:function(){return this.needAuth||this.needAuthLocal}}),methods:r()({},Object(s.b)("layouts",{setLeftDrawer:S}),Object(s.b)("user",{_signOut:u.SIGN_OUT,_deleteUser:u.DELETE_USER,reauthenticate:u.REAUTHENTICATE}),{signOut:function(){this._signOut().then().catch().then(function(){location.reload()})},deleteUser:function(){var e=this;this.deleteConfirm=!1,this._deleteUser().then(function(){window.location.reload()}).catch(function(t){e.reauth=!0})}})};var O=function(e){n("qq8b")},A=Object(v.a)(N,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.authorityLoading||e.needAuth&&!e.authenticated?e._e():n("div",[e.hideLedfDrawer?e._e():n("v-navigation-drawer",{attrs:{fixed:"",clipped:"",app:"",value:e.leftDrawer},on:{input:function(t){return e.setLeftDrawer({leftDrawer:t})}}},[n("router-view",{attrs:{name:"leftDrawer"}})],1),e._v(" "),n("v-toolbar",{attrs:{color:"blue darken-3",dark:"",app:"","clipped-left":"",fixed:"",dense:""}},[n("v-toolbar-title",{staticClass:"ml-0 pl-3"},[e.hideLedfDrawer?e._e():n("v-toolbar-side-icon",{staticClass:"left-drawer-activator",on:{click:function(t){t.stopPropagation(),e.setLeftDrawer({leftDrawer:!e.leftDrawer})}}}),e._v(" "),n("router-view",{attrs:{name:"headerTitle"}})],1),e._v(" "),n("div",{staticClass:"d-flex align-center icon-box",staticStyle:{"margin-left":"auto"}},[n("router-view",{attrs:{name:"headerIconList"}}),e._v(" "),e.user?n("v-menu",{attrs:{bottom:"",left:"","offset-y":"","nudge-bottom":6}},[n("v-btn",{attrs:{slot:"activator",icon:"",dark:""},slot:"activator"},[n("v-avatar",{attrs:{size:"32px"}},[n("img",{attrs:{src:e.user.photoURL}})])],1),e._v(" "),n("v-list",[n("v-list-tile",[n("v-list-tile-title",[e._v(e._s(e.user.displayName))])],1),e._v(" "),n("v-divider"),e._v(" "),n("v-list-tile",{on:{click:e.signOut}},[n("v-list-tile-title",[e._v("Sign out")])],1),e._v(" "),n("v-divider"),e._v(" "),n("v-list-tile",{on:{click:function(t){e.deleteConfirm=!0}}},[n("v-list-tile-title",[e._v("Delete account")])],1)],1)],1):n("v-btn",{attrs:{flat:""},on:{click:function(t){e.needAuthLocal=!0}}},[e._v("SIGN IN")])],1)],1),e._v(" "),n("v-content",{ref:"content"},[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{staticClass:"main-layout"},[n("router-view",{attrs:{name:"content"}})],1)],1)],1),e._v(" "),n("AuthDialog",{attrs:{reauth:!0,persistent:!1},model:{value:e.reauth,callback:function(t){e.reauth=t},expression:"reauth"}}),e._v(" "),n("ConfirmDialog",{attrs:{message:"All your files will be deleted and cannot revert. Are you sure you want to delete?"},on:{ok:e.deleteUser,cancel:function(t){e.deleteConfirm=!1}},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}})],1),e._v(" "),e.authorityLoading||!e._needAuth||e.authenticated?e._e():n("AuthDialog",{attrs:{value:!0,persistent:e.needAuth},on:{input:function(t){return e.needAuthLocal=t}}}),e._v(" "),e.authorityLoading?n("v-progress-linear",{staticClass:"top-progress",attrs:{indeterminate:!0}}):e._e()],1)},[],!1,O,"data-v-3eb8a500",null).exports,M=n("bOdI"),K=n.n(M),D=n("fZjL"),R=n.n(D),F=n("//Fk"),L=n.n(F),P=n("woOf"),I=n.n(P),U=40,j=20,z=0,B=0,W="root",$={NORMAL:"NORMAL",DEPENDENCY:"DEPENDENCY"},H=n("BO1k"),q=n.n(H);function X(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function V(e,t){return Math.pow(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),.5)}function G(e){var t=e.rectangles,n=e.point,i=R()(t);if(0===i.length)return null;var o=null,r=Number.POSITIVE_INFINITY;return i.forEach(function(e){var i=function(e){var t=e.rectangle,n=e.point;switch(function(e){var t=e.rectangle,n=e.point;return n.x<t.x?n.y<t.y?1:n.y>t.y+t.height?7:4:n.x>t.x+t.width?n.y<t.y?3:n.y>t.y+t.height?9:6:n.y<t.y?2:n.y>t.y+t.height?8:5}({rectangle:t,point:n})){case 1:return V(n,{x:t.x,y:t.y});case 2:return t.y-n.y;case 3:return V(n,{x:t.x+t.width,y:t.y});case 4:return t.x-n.x;case 5:return 0;case 6:return n.x-(t.x+t.width);case 7:return V(n,{x:t.x,y:t.y+t.height});case 8:return n.y-(t.y+t.height);case 9:return V(n,{x:t.x+t.width,y:t.y+t.height})}}({rectangle:t[e],point:n});i<r&&(o=e,r=i)}),o}var Q=function(e){return I()({},{text:"",children:[],backgroundColor:"#B3E5FC",color:"#000000",dependencies:{},closed:!1},e)},Y=function(e){return I()({},{uid:"",nodeId:"",text:"",created:0,updated:0},e)},Z=function(e,t){if(e.text!==t.text)return!1;if(e.backgroundColor!==t.backgroundColor)return!1;if(e.color!==t.color)return!1;if(e.children.join("/")!==t.children.join("/"))return!1;var n=R()(e.dependencies),i=R()(t.dependencies);if(n.length!==i.length)return!1;var o=!0,r=!1,s=void 0;try{for(var a,l=q()(n);!(o=(a=l.next()).done);o=!0){var c=a.value;if(e.dependencies[c]!==t.dependencies[c])return!1}}catch(e){r=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}return e.closed===t.closed},J=function(){return K()({},W,Q())},ee=function(e){var t=e.nodes,n=e.sizes,i=e.parentKey,o={};o[i]={x:0,y:0};var r={};return function e(t){var n=t.nodes,i=t.sizes,o=t.familySizes,r=t.parentKey;var s=n[r];if(s.children.length>0){s.children.forEach(function(t){e({nodes:n,sizes:i,familySizes:o,parentKey:t})});var a=s.children.reduce(function(e,t){var n=o[t].width,r=Math.max(o[t].height,i[t].height);return{width:Math.max(e.width,n),height:e.height+r}},{width:0,height:0});s.closed?a.height=i[r].height:a.height+=j*(s.children.length-1),o[r]={width:i[r].width+a.width+U,height:Math.max(i[r].height,a.height),othersHeight:a.height}}else o[r]=I()({},i[r],{othersHeight:0})}({nodes:t,sizes:n,familySizes:r,parentKey:i}),function e(t){var n=t.nodes,i=t.sizes,o=t.familySizes,r=t.parentKey,s=t.positions;var a=n[r];var l=s[r];if(a.children.length>0){var c=o[r],u=l.x+i[r].width+U+c.height*z,d=void 0;d=(c.othersHeight,i[r].height,l.y-c.othersHeight/2+i[r].height/2),a.children.forEach(function(t){var r=i[t],a=o[t];s[t]={x:u,y:d+a.height/2-r.height/2},d+=a.height,d+=j,e({nodes:n,sizes:i,familySizes:o,parentKey:t,positions:s})})}}({nodes:t,sizes:n,familySizes:r,parentKey:i,positions:o}),o};function te(e){var t=e.nodes,n=e.childKey;return R()(t).find(function(e){return-1!==t[e].children.indexOf(n)})||null}function ne(e){var t=e.nodes,n=e.parentKey,i=[];return t[n].children.forEach(function(e){i.push(e);var n=ne({nodes:t,parentKey:e});i=i.concat(n)}),i}function ie(e){var t,n=e.nodes,i=e.parentKey,o=e.newKey,r=void 0===o?"key_"+Math.random():o,s=Q(),a=r,l=n[i],c=l.children.concat();return c.push(a),t={},K()(t,a,s),K()(t,i,I()({},l,{children:c,closed:!1})),t}function oe(e){var t=e.nodes,n=e.deleteKey,i=ne({nodes:t,parentKey:n}),o=K()({},n,null);i.forEach(function(e){o[e]=null});var s=te({nodes:t,childKey:n});if(s){var a=t[s],l=I()({},a);l.children=l.children.filter(function(e){return e!==n}),o[s]=l}return R()(t).forEach(function(e){var s=t[e],a=r()({},s.dependencies);s.dependencies[n]&&delete a[n];var l=!0,c=!1,u=void 0;try{for(var d,h=q()(i);!(l=(d=h.next()).done);l=!0){var f=d.value;a[f]&&delete a[f]}}catch(e){c=!0,u=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw u}}var v=r()({},s,{dependencies:a});Z(s,v)||(o[e]=v)}),o}function re(e){return I()({},e,{children:e.children.concat()})}function se(e){var t=e.nodes,n=e.targetKey,i=e.newParentKey,o=e.order,r=void 0===o?0:o,s=te({nodes:t,childKey:n}),a=re(t[s]),l=a.children.indexOf(n);if(a.children.splice(l,1),s===i)return r<=l?a.children.splice(r,0,n):a.children.splice(r-1,0,n),I()({},t,K()({},s,a));var c,u=re(t[i]);return u.children.splice(r,0,n),I()({},t,(c={},K()(c,s,a),K()(c,i,u),c))}function ae(e){var t=e.nodes,n=!1;return R()(t).some(function(e){if(e!==W&&!te({nodes:t,childKey:e}))return n=!0,!0;var i=t[e];return i.children.some(function(e){if(!t[e])return n=!0,!0}),n||R()(i.dependencies).some(function(e){if(!t[e])return n=!0,!0}),n}),n}function le(e){var t=e.nodes;return R()(t).reduce(function(e,n){var i=t[n];if(!e[n]&&i.closed){var o=ne({nodes:t,parentKey:n}),r=!0,s=!1,a=void 0;try{for(var l,c=q()(o);!(r=(l=c.next()).done);r=!0){e[l.value]=!0}}catch(e){s=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(s)throw a}}}return e},{})}var ce=function(e){var t=void 0,n=void 0,i=e.currentTarget.getBoundingClientRect(),o=i.left+window.pageXOffset,r=i.top+window.pageYOffset;if(ue(e)){var s=e.touches[0];t=s.pageX-o,n=s.pageY-r}else t=e.pageX-o,n=e.pageY-r;return{x:t,y:n}},ue=function(e){return e.touches},de={props:{x:{type:Number,default:0},y:{type:Number,default:0},rx:{type:Number,default:0},ry:{type:Number,default:0},width:{type:Number,default:50},height:{type:Number,default:50},strokeWidth:{type:Number,default:1},stroke:{type:String,default:"black"},fill:{type:String,default:"none"},strokeDasharray:{type:Number,default:0},strokeDashoffset:{type:Number,default:0}}},he=Object(v.a)(de,function(){var e=this,t=e.$createElement;return(e._self._c||t)("rect",{attrs:{x:e.x,y:e.y,rx:e.rx,ry:e.ry,width:e.width,height:e.height,stroke:e.stroke,"stroke-width":e.strokeWidth,fill:e.fill,"stroke-dasharray":e.strokeDasharray,"stroke-dashoffset":e.strokeDashoffset}})},[],!1,null,null,null).exports,fe={components:{SvgRectangle:he},data:function(){return{beforeMoveP:null,downStart:0,clickLast:0,rectangleSelecting:!1,downP:null,movingTimer:0,progressiveMove:{x:0,y:0},pinchDistance:null,lastSetupProgressiveMove:0,movinguInvalidateTimer:-1}},props:{x:{type:Number,default:0},y:{type:Number,default:0},width:{type:Number,default:400,validator:function(e){return e>0}},height:{type:Number,default:400,validator:function(e){return e>0}},scale:{type:Number,default:1,validator:function(e){return e>0}}},computed:{canvasWidth:function(){return this.width/this.scale},canvasHeight:function(){return this.height/this.scale},selectRectangle:function(){if(!this.rectangleSelecting||!this.downP||!this.beforeMoveP)return null;var e=this.dom2svg(this.downP),t=this.dom2svg(this.beforeMoveP);return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}}},methods:{dom2svg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return{x:e.x/t+this.x,y:e.y/t+this.y}},dom2svgScale:function(e){return{x:e.x/this.scale,y:e.y/this.scale}},svg2dom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return{x:(e.x-this.x)*t,y:(e.y-this.y)*t}},pinch:function(e){var t=function(e){for(var t=[],n=e.currentTarget.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset,r=0;r<e.touches.length;r++){var s=e.touches[r];t.push({x:s.pageX-i,y:s.pageY-o})}return t}(e),n=t[0],i=t[1],o=V(n,i),r=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}(n,i);if(this.pinchDistance&&Math.abs(this.pinchDistance-o)>1){var s=this.scale*(this.pinchDistance<o?1.1:1/1.1);this.$emit("zoom",{scale:s,x:r.x,y:r.y})}this.pinchDistance=o},canvasCursorMove:function(e){var t=this;-1===this.movinguInvalidateTimer&&(this._canvasCursorMove(e),this.movinguInvalidateTimer=setTimeout(function(){t.movinguInvalidateTimer=-1},10))},_canvasCursorMove:function(e){if(this.beforeMoveP)if(function(e){return ue(e)&&e.touches.length>1}(e))this.pinch(e);else if(!this.pinchDistance){var t=ce(e),n={x:this.beforeMoveP.x-t.x,y:this.beforeMoveP.y-t.y},i=this.dom2svgScale(n);if(!this.rectangleSelecting){this.$emit("move",{x:this.x+i.x,y:this.y+i.y});var o=Math.sqrt(n.x*n.x+n.y*n.y),r=o/this.scale;if(o>5){this.lastSetupProgressiveMove=Date.now();var s=Math.min(r,40);this.progressiveMove={x:i.x/r*s,y:i.y/r*s}}else this.progressiveMove={x:0,y:0}}this.beforeMoveP=I()({},t)}},canvasWheel:function(e){this.stopProgressiveMove();var t=e.wheelDeltaX,n=e.wheelDeltaY;this.$emit("move",{x:this.x-t/3/this.scale,y:this.y-n/3/this.scale})},stopProgressiveMove:function(){this.movingTimer>0&&(clearTimeout(this.movingTimer),this.movingTimer=0),this.progressiveMove={x:0,y:0}},canvasCursorDown:function(e){this.stopProgressiveMove(),this.pinchDistance=null},canvasCursorDownSelf:function(e){this.downStart=Date.now();var t=ce(e);this.beforeMoveP=I()({},t),this.rectangleSelecting=e.shiftKey,this.downP=t},canvasCursorUpSelf:function(e){var t=this,n=Date.now();n-this.lastSetupProgressiveMove<200?this.movingTimer=setTimeout(function(){t.movingLoop()},10):n-this.downStart<300&&(n-this.clickLast<300?this.$emit("doubleClick",e):this.$emit("click",e),this.clickLast=n)},canvasCursorUp:function(){this.selectRectangle&&this.$emit("selectRectangle",this.selectRectangle),this.beforeMoveP=null,this.rectangleSelecting=!1},movingLoop:function(){var e=this;if(this.movingTimer>0){var t=this.progressiveMove;this.$emit("move",{x:this.x+t.x,y:this.y+t.y}),t.x*=.92,t.y*=.92,Math.abs(t.x)+Math.abs(t.y)>2?this.movingTimer=setTimeout(function(){e.movingLoop()},10):(this.movingTimer=0,this.progressiveMove={x:0,y:0})}},getPostionAfterChangeScale:function(e,t){var n=t||{x:this.width/2,y:this.height/2},i=this.dom2svg(n),o=this.dom2svg(n,e);return{x:this.x+(i.x-o.x),y:this.y+(i.y-o.y)}}}};var ve=function(e){n("XzQZ")},me=Object(v.a)(fe,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"svg-canvas-wrapper",style:{width:e.width+"px",height:e.height+"px"}},[n("svg",{attrs:{"font-family":"sans-serif",viewBox:e.x+" "+e.y+" "+e.canvasWidth+" "+e.canvasHeight},on:{mousemove:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.canvasCursorMove(n)},mousedown:[function(t){return e.$isMobile.any?"":e.canvasCursorDown(t)},function(t){if(t.target!==t.currentTarget)return null;var n;n=t,!e.$isMobile.any&&e.canvasCursorDownSelf(n)}],mouseup:[function(t){if(t.target!==t.currentTarget)return null;!e.$isMobile.any&&e.canvasCursorUpSelf()},function(t){return e.$isMobile.any?"":e.canvasCursorUp()}],mousewheel:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.canvasWheel(n)},touchmove:function(t){var n;t.preventDefault(),n=t,e.$isMobile.any&&e.canvasCursorMove(n)},touchstart:[function(t){return e.$isMobile.any?e.canvasCursorDown(t):""},function(t){if(t.target!==t.currentTarget)return null;var n;n=t,e.$isMobile.any&&e.canvasCursorDownSelf(n)}],touchend:[function(t){if(t.target!==t.currentTarget)return null;var n;n=t,e.$isMobile.any&&e.canvasCursorUpSelf(n)},function(t){return e.$isMobile.any?e.canvasCursorUp():""}]}},[e._t("default"),e._v(" "),e.rectangleSelecting?n("SvgRectangle",{attrs:{x:e.selectRectangle.x,y:e.selectRectangle.y,rx:3,ry:3,width:e.selectRectangle.width,height:e.selectRectangle.height,fill:"none",stroke:"blue",strokeDasharray:5,strokeDashoffset:5}}):e._e()],2)])},[],!1,ve,"data-v-31c0bec4",null).exports,pe={props:{text:{type:String,required:!0},x:{type:Number,default:0},y:{type:Number,default:0},fontSize:{type:Number,default:10},fill:{type:String,default:"black"},fontWeight:{type:Number,default:500}},computed:{isLink:function(){return 0===this.text.indexOf("https://")||0===this.text.indexOf("http://")}},methods:{getBBox:function(){return this.$refs.text.getBBox()},moveLink:function(){window.open(this.text)}}},ye={components:{SvgText:Object(v.a)(pe,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("text",{ref:"text",attrs:{x:e.x,y:e.y,"font-size":e.fontSize,"font-weight":e.fontWeight,fill:e.fill},on:{click:function(t){e.isLink&&e.moveLink}}},[e._v("\n  "+e._s(e.isLink?"":e.text)+"\n  "),e.isLink?n("a",{style:{cursor:"pointer","text-shadow":"1px 1px 0 blue"},attrs:{"xlink:href":e.text,target:"_blank"}},[e._v("\n    "+e._s(e.text)+"\n  ")]):e._e()])},[],!1,null,null,null).exports,SvgRectangle:he},data:function(){return{textWidth:50}},props:{text:{type:String,required:!0},x:{type:Number,default:0},y:{type:Number,default:0},fontSize:{type:Number,default:10},strokeWidth:{type:Number,default:1},stroke:{type:String,default:"black"},fill:{type:String,default:"none"},textFill:{type:String,default:"black"},hiddenFamilyCount:{type:Number,default:0},commentCount:{type:Number,default:0},childrenCount:{type:Number,default:0}},computed:{lines:function(){return this.text?this.text.split(/\n|\r\n/):[]},width:function(){return this.textWidth},height:function(){return this.textHeight*Math.max(1,this.lines.length)+8},textHeight:function(){return this.fontSize+5},textX:function(){return this.x+this.textPaddingX},textY:function(){return this.y},textPaddingX:function(){return 5},closed:function(){return this.hiddenFamilyCount>0},countLength:function(){return this.closed?(""+this.hiddenFamilyCount).length:1},countFontSize:function(){return this.fontSize},countCircleMinRadius:function(){return 4+.5*this.countFontSize*1},countCircleRadius:function(){return 4+.5*this.countFontSize*this.countLength},rightRx:function(){return Math.max(this.countCircleRadius,this.countFontSize)},commentLength:function(){return(""+this.commentCount).length},commentFontSize:function(){return this.fontSize},commentCircleRadius:function(){return 3+.5*this.commentFontSize*this.commentLength},leftRx:function(){return this.commentCount>0?Math.max(this.commentCircleRadius,this.commentFontSize):0}},watch:{text:function(){var e=this;this.$nextTick().then(function(){e.adjustTextWidth()})}},mounted:function(){this.adjustTextWidth()},methods:{adjustTextWidth:function(){var e=this.getBBox();this.textWidth=e.width,this.$emit("calcSize",e)},getBBox:function(){var e=this;return{width:this.lines.reduce(function(t,n,i){var o=e.$refs.svgLine[i].getBBox().width;return Math.max(t,o)},50)+2*this.textPaddingX,height:this.height}}}},ge=Object(v.a)(ye,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[e.commentCount>0?n("g",{on:{click:function(t){e.$emit("clickComment")}}},[n("ellipse",{attrs:{cx:e.x+e.width/2,cy:e.y+e.height-2,rx:e.width/2,ry:1.7*e.fontSize,fill:"#ddd"}}),e._v(" "),n("SvgText",{attrs:{text:""+e.commentCount,x:e.x+e.width/2-e.commentCircleRadius/2,y:e.y+e.height+e.fontSize+1,"font-size":e.commentFontSize,fill:"black"}})],1):e._e(),e._v(" "),e.closed?n("g",{on:{click:function(t){e.$emit("open")}}},[n("ellipse",{attrs:{cx:e.x+e.width+e.countCircleRadius/2,cy:e.y+e.height/2,rx:e.rightRx,ry:e.fontSize,fill:"#444"}}),e._v(" "),n("SvgText",{attrs:{text:""+e.hiddenFamilyCount,x:e.x+e.width+1,y:e.y+e.height/2+3.5,"font-size":e.countFontSize,fill:"white"}})],1):e._e(),e._v(" "),!e.closed&&e.childrenCount>0?n("g",{on:{click:function(t){e.$emit("close")}}},[n("ellipse",{attrs:{cx:e.x+e.width+e.countCircleRadius/2,cy:e.y+e.height/2,rx:e.rightRx,ry:e.fontSize,fill:"#aaa"}}),e._v(" "),n("SvgText",{attrs:{text:"-",x:e.x+e.width+3,y:e.y+e.height/2+3.5,"font-size":e.countFontSize,fill:"white"}})],1):e._e(),e._v(" "),n("g",{on:{mousedown:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.$emit("down",n)},mouseup:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.$emit("up",n)},touchstart:function(t){var n;t.preventDefault(),n=t,e.$isMobile.any&&e.$emit("down",n)},touchend:function(t){var n;t.preventDefault(),n=t,e.$isMobile.any&&e.$emit("up",n)}}},[n("SvgRectangle",{attrs:{x:e.x,y:e.y,rx:3,ry:3,width:e.width,height:e.height,"stroke-width":e.strokeWidth,stroke:e.stroke,fill:e.fill}}),e._v(" "),e._l(e.lines,function(t,i){return n("SvgText",{key:i,ref:"svgLine",refInFor:!0,attrs:{x:e.textX,y:e.textY+e.textHeight*(i+1),"font-size":e.fontSize,text:t,fill:e.textFill}})}),e._v(" "),e.text?e._e():n("SvgText",{attrs:{text:"-XXACPR-",x:e.textX,y:e.textY+e.textHeight,"font-size":e.fontSize,fill:e.textFill}})],2)])},[],!1,null,null,null).exports,xe={props:{sx:{type:Number,required:!0},sy:{type:Number,required:!0},ex:{type:Number,required:!0},ey:{type:Number,required:!0},curve:{type:Boolean,default:!1}},computed:{qx:function(){return 7*this.sx/10+3*this.ex/10},qy:function(){return 1*this.sy/10+9*this.ey/10},cx:function(){return(this.sx+this.ex)/2},cy:function(){return(this.sy+this.ey)/2},d:function(){return this.curve?"M "+this.sx+" "+this.sy+" Q "+this.qx+" "+this.qy+" "+this.ex+" "+this.ey:"M "+this.sx+" "+this.sy+" L "+(this.sx+20)+" "+this.sy+" L "+(this.sx+20)+" "+this.ey+" L "+this.ex+" "+this.ey}},methods:{}},be=Object(v.a)(xe,function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{stroke:"black","stroke-width":"1",fill:"none",d:this.d}})},[],!1,null,null,null).exports,_e={props:{sx:{type:Number,required:!0},sy:{type:Number,required:!0},ex:{type:Number,required:!0},ey:{type:Number,required:!0},selected:{type:Boolean,default:!1}},computed:{qx1:function(){return this.sx+this.gap},qy1:function(){return this.sy},qx2:function(){return this.ex-this.gap},qy2:function(){return this.ey},xGap:function(){return Math.abs(this.sx-this.ex)},yGap:function(){return Math.abs(this.sy-this.ey)},gap:function(){return this.xGap/3+this.yGap/6}},methods:{}},Ce=Object(v.a)(_e,function(){var e=this,t=e.$createElement;return(e._self._c||t)("path",{attrs:{stroke:e.selected?"tomato":"green","stroke-width":e.selected?3:1,fill:"none","stroke-dasharray":"2 4",d:"M "+e.sx+" "+e.sy+" C "+e.qx1+" "+e.qy1+" "+e.qx2+" "+e.qy2+" "+e.ex+" "+e.ey}})},[],!1,null,null,null).exports,we={props:{value:{type:String,required:!0},targetKey:{type:String,required:!0}},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},lines:function(){return this._value.split(/\n|\r\n/)},rows:function(){return 3}},methods:{done:function(){this.$emit("done",{value:this.value,targetKey:this.targetKey})}}};var Ee=function(e){n("tOGR")},ke=Object(v.a)(we,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"float-text-input-wrapper"},[n("v-text-field",{staticClass:"text-field",attrs:{"multi-line":"","hide-details":"",autofocus:"",rows:e.rows},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key))return null;e.done(t)},blur:e.done},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}}),e._v(" "),n("v-btn",{staticClass:"submit",attrs:{fab:"",dark:"",small:"",color:"primary"}},[n("v-icon",{attrs:{dark:""}},[e._v("done")])],1)],1)},[],!1,Ee,"data-v-2b1234d1",null).exports,Se={data:function(){return{}},props:{defaultNodeProps:{color:{type:String,default:"#000"},backgroundColor:{type:String,default:"#fff"}}},computed:{colorProps:function(){return[{color:"#000",backgroundColor:"#B3E5FC"},{color:"#000",backgroundColor:"#81C784"},{color:"#000",backgroundColor:"#FFF176"},{color:"#000",backgroundColor:"#FFB74D"},{color:"#000",backgroundColor:"#E57373"},{color:"#000",backgroundColor:"#fff"},{color:"#fff",backgroundColor:"#000"}]}},methods:{selectProp:function(e){this.$emit("selectProp",e),this.colorMode=!1}}};var Te=function(e){n("1hse")},Ne=Object(v.a)(Se,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"float-edit-menu-wrapper"},[n("div",{staticClass:"button-box"},e._l(e.colorProps,function(t,i){return n("v-btn",{key:i,staticClass:"list-item color",style:{color:t.color,background:t.backgroundColor},attrs:{icon:"",small:""},on:{click:function(n){e.selectProp(t)}}},[n("v-icon",[e._v("text_format")])],1)}))])},[],!1,Te,"data-v-4d71e660",null).exports,Oe={props:{step:{type:Number,default:.1},min:{type:Number,default:-10},max:{type:Number,default:10},scaleRate:{type:Number,default:1}}};var Ae=function(e){n("zCCC")},Me=Object(v.a)(Oe,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scale-tool-wrapper",class:{mobile:e.$isMobile.any}},[n("div",{staticClass:"scale-slider-wrapper"},[n("v-slider",{staticClass:"slider",attrs:{"hide-details":"",step:e.step,min:e.min,max:e.max,value:e.scaleRate},on:{input:function(t){return e.$emit("changeScaleRate",t)}}})],1),e._v(" "),n("v-btn",{staticClass:"pan-button",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("clearZoom")}}},[n("v-icon",[e._v("center_focus_weak")])],1)],1)},[],!1,Ae,"data-v-509dd05e",null).exports;var Ke=function(e){n("RPEF")},De=Object(v.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"history-tool-wrapper",class:{mobile:e.$isMobile.any}},[n("div",{staticClass:"history-box"},[n("v-btn",{staticClass:"undo-button",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("undo")}}},[n("v-icon",[e._v("undo")])],1),e._v(" "),n("v-btn",{staticClass:"redo-button",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("redo")}}},[n("v-icon",[e._v("redo")])],1)],1)])},[],!1,Ke,"data-v-7b7c3c34",null).exports,Re={props:{x:{type:Number,default:0},y:{type:Number,default:0},closed:{type:Boolean,default:!1}}};var Fe=function(e){n("dEVr")},Le=Object(v.a)(Re,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toggle-close-button-wrapper",style:{left:e.x+"px",top:e.y+"px"}},[e.closed?n("v-btn",{staticClass:"button",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("open")}}},[n("v-icon",[e._v("arrow_drop_down")])],1):n("v-btn",{staticClass:"button",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("close")}}},[n("v-icon",[e._v("arrow_drop_up")])],1)],1)},[],!1,Fe,"data-v-4c2327ec",null).exports,Pe={props:{x:{type:Number,default:0},y:{type:Number,default:0},color:{type:String,default:"black"}}};var Ie=function(e){n("r14v")},Ue=Object(v.a)(Pe,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"float-button-wrapper",style:{left:e.x+"px",top:e.y+"px"}},[n("v-btn",{staticClass:"button",attrs:{icon:"",small:"",outline:"",color:e.color},on:{click:function(t){e.$emit("click")}}},[e._t("default")],2)],1)},[],!1,Ie,"data-v-1581e182",null).exports,je={data:function(){return{text:"",editKey:"",editText:"",snackbar:!1,open:!0}},props:{comments:{type:Object,required:!0},users:{type:Object,required:!0},user:{type:Object,default:function(){return{}}}},computed:{commentList:function(){var e=this;return R()(this.comments).map(function(t){return r()({},e.comments[t],{key:t})}).sort(function(e,t){return e.created-t.created})}},watch:{comments:function(){this.editKey="",this.snackbar=!1}},methods:{canEdit:function(e){var t=this.comments[e];return this.user&&this.user.uid===t.uid},readyEdit:function(e){if(this.canEdit(e)){var t=this.comments[e];this.editKey=e,this.editText=t.text}},submit:function(){this.$emit("postComment",{comment:{text:this.text}}),this.clear()},updateComment:function(){this.$emit("postComment",{comment:r()({},this.comments[this.editKey],{text:this.editText}),key:this.editKey}),this.editKey="",this.snackbar=!1},cancelEdit:function(){this.editKey="",this.snackbar=!1},deleteComment:function(){this.snackbar?(this.snackbar=!1,this.$emit("postComment",{comment:null,key:this.editKey}),this.editKey=""):this.snackbar=!0},clear:function(){this.editKey="",this.text="",this.snackbar=!1},dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+("0"+t.getDate()).slice(-2)}}};var ze=function(e){n("N4hk")},Be={name:"MapCanvas",components:{SvgCanvas:me,SvgRectangle:he,SvgTextRectangle:ge,SvgConnector:be,SvgBridgeConnector:Ce,FloatTextInput:ke,FloatEditMenu:Ne,ScaleToolBox:Me,HistoryToolBox:De,ToggleCloseButton:Le,FloatButton:Ue,CommentList:Object(v.a)(je,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user||e.commentList.length>0?n("v-card",{staticClass:"comment-list"},[n("div",{staticClass:"switch-buttons"},[e.open?n("v-btn",{attrs:{flat:"",small:"",color:"black"},on:{click:function(t){e.open=!1}}},[n("v-icon",{attrs:{dark:""}},[e._v("keyboard_arrow_up")])],1):n("v-btn",{attrs:{flat:"",small:"",color:"black"},on:{click:function(t){e.open=!0}}},[n("v-icon",{attrs:{dark:""}},[e._v("comment")]),e._v(" "),n("span",[e._v(e._s(e.commentList.length))])],1)],1),e._v(" "),e.open?n("v-list",{attrs:{"three-line":""}},[e._l(e.commentList,function(t){return[e.editKey===t.key?n("form",{key:t.key,staticClass:"form"},[n("v-text-field",{attrs:{"multi-line":"","hide-details":"",rows:3},model:{value:e.editText,callback:function(t){e.editText=t},expression:"editText"}}),e._v(" "),n("v-btn",{attrs:{flat:"",icon:"",small:"",color:"black"},on:{click:e.deleteComment}},[n("v-icon",{attrs:{dark:""}},[e._v("delete")])],1),e._v(" "),n("v-btn",{attrs:{flat:"",icon:"",small:"",color:"primary"},on:{click:e.cancelEdit}},[n("v-icon",{attrs:{dark:""}},[e._v("cancel")])],1),e._v(" "),n("v-btn",{attrs:{flat:"",icon:"",small:"",color:"primary",disabled:!e.editText.trim()},on:{click:e.updateComment}},[n("v-icon",{attrs:{dark:""}},[e._v("done")])],1)],1):n("v-list-tile",{key:t.key,staticClass:"comment-tile",class:{editable:e.canEdit(t.key)},attrs:{avatar:""},on:{click:function(n){e.readyEdit(t.key)}}},[n("v-list-tile-avatar",[e.users[t.uid]?n("img",{attrs:{src:e.users[t.uid].photoURL}}):n("v-icon",{staticClass:"unknown-user"},[e._v("account_circle")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-sub-title",[n("pre",{staticClass:"text"},[e._v(e._s(t.text))])]),e._v(" "),n("v-list-tile-sub-title",{staticClass:"comment-info"},[e._v(e._s(e.users[t.uid]?e.users[t.uid].displayName:"---")+", "+e._s(e.dateFormat(t.updated)))])],1)],1),e._v(" "),n("v-divider",{key:"line_"+t.key})]})],2):e._e(),e._v(" "),!e.editKey&&e.open&&e.user?n("form",{staticClass:"form"},[n("v-text-field",{attrs:{label:"Comment","multi-line":"","hide-details":"",rows:3},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e._v(" "),n("v-btn",{attrs:{flat:"",icon:"",small:"",color:"primary",disabled:!e.text.trim()},on:{click:e.submit}},[n("v-icon",{attrs:{dark:""}},[e._v("done")])],1)],1):e._e(),e._v(" "),n("v-snackbar",{attrs:{bottom:"",right:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    One more click to delete.\n  ")])],1):e._e()},[],!1,ze,"data-v-550347a4",null).exports},data:function(){return{x:0,y:0,scaleRate:0,nodeCursorDownStart:0,nodeCursorClickLast:0,nodeSizes:{},beforeMoveP:null,movingNodePositions:{},editTextTarget:null,editingText:"",editMenuTarget:null,floatEditMenuWidth:0,floatTextInputWidth:0,mode:$.NORMAL,adjustParentWithMovingTimer:null,insertInformationOfMovingNodes:null,comfirmDelete:!1}},props:{width:{type:Number,default:400},height:{type:Number,default:400},nodes:{type:Object,required:!0,validator:function(e){return W in e}},selectedNodes:{type:Object,default:function(){return{}}},fileAuthority:{type:Object,default:function(){return{}}},user:{type:Object,default:function(){return{}}},defaultNodeProps:{type:Object,default:function(){return{}}},canWrite:{type:Boolean,default:!1},comments:{type:Object,default:function(){return{}}},users:{type:Object,default:function(){return{}}}},mounted:function(){var e=this;this.$nextTick().then(function(){e.clearZoom()})},computed:{ROOT_NODE:function(){return W},NODE_MARGIN_Y:function(){return j},MIN_SCALE_RATE:function(){return Math.min(Math.log(this.scaleCoveringAllNode)/Math.log(1.1)-3,-5)},MAX_SCALE_RATE:function(){return 25},CANVAS_MODE:function(){return $},viewRectangle:function(){return{x:this.x,y:this.y,width:this.width/this.scale,height:this.height/this.scale}},nodeCount:function(){return R()(this.nodes).length},movingNodeCount:function(){return R()(this.movingNodePositions).length},scale:{get:function(){return Math.pow(1.1,this.scaleRate)},set:function(e){var t=Math.log(e)/Math.log(1.1);t<this.MIN_SCALE_RATE&&(t=this.MIN_SCALE_RATE),t>this.MAX_SCALE_RATE&&(t=this.MAX_SCALE_RATE),this.scaleRate=t}},showTextInput:function(){return this.editTextTargetNode&&0===this.movingNodeCount&&!this.isMultiSelect},showEditMenu:function(){return this.editMenuTarget&&0===this.movingNodeCount},editTextTargetNode:function(){return this.nodes[this.editTextTarget]},editMenuTargetNode:function(){return this.nodes[this.editMenuTarget]},editDependencyTarget:function(){return this.mode===$.DEPENDENCY?this.editMenuTarget:null},editTargetPosition:function(){var e=this.editMenuTarget;if(e){var t=this.nodePositions[e];return{x:(t.x-this.x)*this.scale,y:(t.y-this.y)*this.scale}}return null},fixLeftBoxPosition:function(){var e=this.editMenuTarget;if(e){var t=this.nodeSizes[e],n=this.editTargetPosition;return{x:n.x-19,y:n.y-14+t.height/2*this.scale}}return null},fixTopBoxPosition:function(){var e=this.editMenuTarget;if(e){var t=this.nodeSizes[e],n=this.editTargetPosition;return{x:n.x-2+t.width/2*this.scale,y:n.y-29}}return null},fixBottomBoxPosition:function(){var e=this.editMenuTarget;if(e){var t=this.nodeSizes[e],n=this.editTargetPosition;return{x:n.x-2+t.width/2*this.scale,y:n.y+1+t.height*this.scale}}return null},fixButtonMargin:function(){return 36},nodePositions:function(){var e=this,t={width:50,height:20},n={};return R()(this.nodes).forEach(function(i){n[i]=e.nodeSizes[i]||I()({},t)}),ee({nodes:this.nodes,sizes:n,parentKey:W})},connectors:function(){return e={nodes:this.nodes,positions:this.nodePositions,sizes:this.nodeSizes},t=e.nodes,n=e.positions,i=e.sizes,o={},r=le({nodes:t}),R()(t).forEach(function(e){var s=t[e],a=n[e],l=i[e];s.children.forEach(function(t){if(!r[e]&&!r[t]){var s=n[t],c=i[t];if(l&&c){var u=s.x+c.width/2<a.x+l.width/2;o[e+"-"+t]={sx:a.x+l.width-B,sy:a.y+l.height/2,ex:u?s.x+c.width:s.x,ey:s.y+c.height/2,from:e,to:t}}}})}),o;var e,t,n,i,o,r},dependencyConnectors:function(){return e={nodes:this.nodes,positions:this.nodePositions,sizes:this.nodeSizes},t=e.nodes,n=e.positions,i=e.sizes,o={},r=le({nodes:t}),R()(t).forEach(function(e){var s=t[e];if(!r[e]){var a=n[e],l=i[e];R()(s.dependencies).forEach(function(t){if(!r[t]&&s){var c=n[t],u=i[t];u&&l&&(o["depend_"+t+"-"+e]={sx:c.x+u.width,sy:c.y+u.height/2,ex:a.x,ey:a.y+l.height/2,from:t,to:e})}})}}),o;var e,t,n,i,o,r},selectedDependencyConnector:function(){var e=this;return R()(this.dependencyConnectors).reduce(function(t,n){var i=e.dependencyConnectors[n],o=!1;return(e.selectedNodes[i.from]||e.selectedNodes[i.to])&&(o=!0),r()({},t,K()({},n,o))},{})},connectorOfMovingNodes:function(){var e=this.insertInformationOfMovingNodes;if(e){var t=R()(this.movingNodePositions)[0];return function(e){var t=e.nodes,n=e.sizes,i=e.positions,o=e.targetKey,r=e.newParentKey,s=e.newChildOrder,a=t[r];if(a.children[s]!==o){var l=i[r],c=n[r],u={sx:l.x+c.width-B,sy:l.y+c.height/2};if(0===a.children.length)return I()({},u,{ex:u.sx+B+U,ey:u.sy});var d=s,h=a.children.indexOf(o);if(-1!==h&&h<d&&d++,a.children.length>d){var f=i[a.children[d]];if(d>0){var v=a.children[d-1],m=i[v],p=n[v],y=m.y+p.height;return I()({},u,{ex:f.x,ey:(f.y+y)/2})}return I()({},u,{ex:f.x,ey:f.y-j/2})}var g=a.children[d-1],x=i[g],b=n[g];return I()({},u,{ex:x.x,ey:x.y+b.height+j/2})}}({nodes:this.nodes,sizes:this.nodeSizes,positions:this.nodePositions,targetKey:t,newParentKey:e.parentKey,newChildOrder:e.order})}},rectangleCoveringAllNode:function(){var e=this,t={},n={};R()(this.nodes).forEach(function(i){e.hiddenNodes[i]||(t[i]=e.nodePositions[i],n[i]=e.nodeSizes[i])});var i=function(e){var t=e.positions,n=e.sizes,i=R()(t).filter(function(e){return t[e]&&n[e]});if(0===i.length)return{x:0,y:0,width:0,height:0};var o=i.reduce(function(e,n){return{x:Math.min(e.x,t[n].x),y:Math.min(e.y,t[n].y)}},{x:t[i[0]].x,y:t[i[0]].y}),r=i.reduce(function(e,i){return{width:Math.max(e.width,t[i].x+n[i].width-o.x),height:Math.max(e.height,t[i].y+n[i].height-o.y)}},{width:n[i[0]].width,height:n[i[0]].height});return{x:o.x,y:o.y,width:r.width,height:r.height}}({positions:t,sizes:n}),o=Math.max(i.width,i.height)<300?200:Math.max(100-Math.pow(this.nodeCount,2),20);return i.x-=o,i.y-=o,i.width+=2*o,i.height+=2*o,i},scaleCoveringAllNode:function(){var e=this.rectangleCoveringAllNode,t=this.width/e.width,n=this.height/e.height;return Math.min(t,n)},isMultiSelect:function(){return R()(this.selectedNodes).length>1},isShowNodes:function(){var e=this;return R()(this.nodes).reduce(function(t,n){var i=e.nodePositions[n],o=e.nodeSizes[n];if(o&&i){if(!e.hiddenNodes[n]){var r=i.x,s=r+o.width,a=i.y,l=a+o.height;e.isInViewBox({left:r,right:s,top:a,bottom:l})&&(t[n]=!0)}}else t[n]=!0;return t},{})},isShowConnectors:function(){var e=this;return R()(this.connectors).reduce(function(t,n){var i=e.connectors[n],o=Math.min(i.sx,i.ex),r=Math.max(i.sx,i.ex),s=Math.min(i.sy,i.ey),a=Math.max(i.sy,i.ey);return e.isInViewBox({left:o,right:r,top:s,bottom:a})&&(t[n]=!0),t},{})},hiddenNodes:function(){return le({nodes:this.nodes})},closedNodeFamilyCounts:function(){var e=this;return R()(this.nodes).reduce(function(t,n){if(e.nodes[n].closed){var i=ne({nodes:e.nodes,parentKey:n});t[n]=i.length}return t},{})},targetNodeComments:function(){var e=this;return R()(this.comments).reduce(function(t,n){var i=e.comments[n];return i.nodeId===e.editMenuTarget&&(t[n]=i),t},{})},commentCounts:function(){var e=this;return R()(this.comments).reduce(function(t,n){var i=e.comments[n];return i.nodeId in t?t[i.nodeId]++:t[i.nodeId]=1,t},{})}},watch:{selectedNodes:function(e,t){var n=R()(e);-1===n.indexOf(this.editMenuTarget)&&(this.editMenuTarget=null),-1===n.indexOf(this.editTextTarget)&&(this.editTextTarget=null)},showTextInput:function(e){var t=this;e&&this.$nextTick().then(function(){var e=t.$refs.floatTextInput;t.floatTextInputWidth=e.$el.clientWidth})},showEditMenu:function(e){var t=this;e&&this.$nextTick().then(function(){var e=t.$refs.floatEditMenu;t.floatEditMenuWidth=e.$el.clientWidth})}},methods:{isInViewBox:function(e){var t=e.left,n=e.right,i=e.top,o=e.bottom,r=this.viewRectangle;return t<=r.x+r.width&&n>=r.x&&i<=r.y+r.height&&o>=r.y},getStrokeWidth:function(e){return this.selectedNodes[e]?2:this.editDependencyTarget===e?2:1},getStrokeColor:function(e){return this.editDependencyTarget===e?"tomato":this.selectedNodes[e]?"blue":"black"},setScaleRateBaseCenter:function(e){this.scaleRate=e;var t=this.$refs.svgCanvas.getPostionAfterChangeScale(this.scale);this.x=t.x,this.y=t.y},getFocus:function(){this.$refs.svgCanvasWrapper.focus()},move:function(e){var t=e.x,n=e.y;this.x=t,this.y=n},zoom:function(e){var t=e.scale,n=e.x,i=e.y;this.scale=t;var o=this.$refs.svgCanvas.getPostionAfterChangeScale(this.scale,{x:n,y:i});this.x=o.x,this.y=o.y},clearZoom:function(){var e=this;return this.$refs.svgCanvas&&this.$refs.svgCanvas.stopProgressiveMove(),new L.a(function(t){var n=e.rectangleCoveringAllNode,i=e.width/n.width,o=e.height/n.height;e.scale=Math.min(i,o),e.$nextTick().then(function(){e.x=n.x,e.y=n.y,i<o?e.y-=(e.height/e.scale-n.height)/2:e.x-=(e.width/e.scale-n.width)/2,e.$nextTick().then(function(){t()})})})},nodeCursorDown:function(e,t){if(this.getFocus(),this.nodeCursorDownStart=Date.now(),t!==W){var n=ce(e),i=this.$refs.svgCanvas.svg2dom(this.nodePositions[t]);this.beforeMoveP={x:n.x+i.x,y:n.y+i.y},this.movingNodePositions=K()({},t,I()({},this.nodePositions[t]))}},nodeCursorUp:function(e,t){var n=t.shift,i=void 0!==n&&n,o=Date.now();o-this.nodeCursorDownStart<300&&(this.editDependencyTarget?this.toggleDependency({from:this.editDependencyTarget,to:e}):o-this.nodeCursorClickLast<300?this.readyEditText(e):this.toggleSelectNode(e,i),this.nodeCursorClickLast=o)},canvasCursorMove:function(e){var t=this;if(this.beforeMoveP){var n=ce(e),i=this.$refs.svgCanvas.dom2svgScale({x:this.beforeMoveP.x-n.x,y:this.beforeMoveP.y-n.y});R()(this.movingNodePositions).forEach(function(e){t.movingNodePositions[e].x-=i.x,t.movingNodePositions[e].y-=i.y}),this.beforeMoveP=I()({},n),this.adjustParentWithMovingTimer||(this.adjustParentWithMovingTimer=setTimeout(function(){t.adjustParentWithMoving(),t.adjustParentWithMovingTimer=null},250))}},canvasCursorUp:function(){this.$refs.svgCanvas&&this.$refs.svgCanvas.canvasCursorUp(),this.adjustParentWithMoving(!0),this.beforeMoveP=null,this.movingNodePositions={}},adjustParentWithMoving:function(e){if(this.movingNodeCount>0){var t=R()(this.movingNodePositions)[0],n=function(e){var t=e.nodes,n=e.sizes,i=e.positions,o=e.targetKey,r=e.movingPositions,s={},a=le({nodes:t}),l=ne({nodes:t,parentKey:o});R()(t).forEach(function(e){te({nodes:t,childKey:e})&&(a[e]||(s[e]={x:i[e].x,y:i[e].y,width:n[e].width,height:n[e].height}))});var c={x:r[o].x,y:r[o].y,width:n[o].width,height:n[o].height},u=G({rectangles:s,point:{x:c.x,y:c.y+c.height/2}});if(l.indexOf(u)>-1||u===o)return t;var d=t[u],h=s[u],f=X(c);if((0===d.children.length||1===d.children.length&&-1===d.children.indexOf(f))&&h.x+h.width/2<c.x)return se({nodes:t,targetKey:o,newParentKey:u,order:0});var v=f.y<h.y+h.height/2,m=te({nodes:t,childKey:u}),p=t[m].children.indexOf(u);return se({nodes:t,targetKey:o,newParentKey:m,order:p+(v?0:1)})}({nodes:this.nodes,sizes:this.nodeSizes,positions:this.nodePositions,targetKey:t,movingPositions:this.movingNodePositions}),i=te({nodes:n,childKey:t}),o=n[i];this.insertInformationOfMovingNodes={parentKey:i,order:o.children.indexOf(t)},e&&(this.$emit("updateNodes",n),this.insertInformationOfMovingNodes=null)}},clearSelect:function(){this.$emit("clearSelect"),this.editMenuTarget=null,this.editTextTarget=null,this.editingText="",this.mode=$.NORMAL},clearSelectNode:function(e){this.$emit("setSelectedNodes",I()({},this.selectedNodes,K()({},e,!1)));var t=R()(this.selectedNodes).filter(function(t){return t!==e});1===t.length?this.editMenuTarget=t[0]:this.editMenuTarget=null,this.editTextTarget=null,this.editingText="",this.mode=$.NORMAL},selectNode:function(e,t){this.canWrite&&(t?this.$emit("setSelectedNodes",I()({},this.selectedNodes,K()({},e,!0))):this.$emit("setSelectedNodes",K()({},e,!0)),this.editMenuTarget=e,this.moveViewToCoverSelectedNode(e),this.mode=$.NORMAL)},toggleSelectNode:function(e,t){this.selectedNodes[e]?this.clearSelectNode(e):this.selectNode(e,t)},moveViewToCoverSelectedNode:function(e){var t=this;if(this.nodes[e]){var n=this.nodePositions[e],i=this.nodeSizes[e];if(i){var o=this.viewRectangle,r=30/this.scale;i.width>o.width||n.x<o.x+r?this.x=n.x-r:n.x+i.width>o.x+o.width-r&&(this.x=n.x+i.width+r-o.width),i.height>o.height||n.y<o.y+r?this.y=n.y-r:n.y+i.height>o.y+o.height-r&&(this.y=n.y+i.height+3*r-o.height)}else this.$nextTick().then(function(){t.moveViewToCoverSelectedNode(e)})}},readyEditText:function(e){this.canWrite&&(this.selectNode(e),this.editTextTarget=e,this.editingText=this.nodes[e]?this.nodes[e].text:"",this.editMenuTarget=null)},doneEditText:function(e){var t=e.value,n=e.targetKey,i=this.nodes[n];if(i){var o=I()({},i,{text:t});this.$emit("updateNodes",K()({},n,o)),this.selectNode(n),this.editTextTarget=null,this.editingText="",this.$refs.svgCanvasWrapper.focus()}},createNode:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.editMenuTarget===W&&(t=!1);var n=g.database().ref().push().getKey(),i=t?function(e){var t=e.nodes,n=e.brotherKey,i=e.newKey,o=void 0===i?"key_"+Math.random():i,r=te({nodes:t,childKey:n}),s=ie({nodes:t,parentKey:r,newKey:o}),a=s[r];a.children.pop();var l=a.children.indexOf(n);return a.children.splice(l+1,0,o),s}({nodes:this.nodes,brotherKey:this.editMenuTarget,newKey:n}):ie({nodes:this.nodes,parentKey:this.editMenuTarget,newKey:n});i[n]=I()({},i[n],this.defaultNodeProps),this.$emit("updateNodes",i),this.$nextTick().then(function(){e.readyEditText(n)})},deleteNode:function(){var e,t,n,i;if(this.comfirmDelete)if(this.comfirmDelete=!1,this.isMultiSelect){var o=(e={nodes:this.nodes,deleteKeys:this.selectedNodes},t=e.nodes,n=e.deleteKeys,i=I()({},t),R()(n).reduce(function(e,t){if(t in e)return e;var n=oe({nodes:i,deleteKey:t});return i=R()(i).reduce(function(e,t){return null!==n[t]&&(e[t]=n[t]||i[t]),e},{}),I()({},e,n)},{}));this.$emit("updateNodes",o),this.clearSelect()}else{var r=this.editMenuTarget;if(r){var s=function(e){var t=e.nodes,n=e.childKey,i=te({nodes:t,childKey:n});if(!i)return null;var o=t[i],r=o.children.indexOf(n);return r>0?o.children[r-1]:i}({nodes:this.nodes,childKey:r});s&&this.selectNode(s);var a=oe({nodes:this.nodes,deleteKey:r});this.$emit("updateNodes",a)}}else this.comfirmDelete=!0},calcSize:function(e){var t=e.key,n=e.size;i.a.set(this.nodeSizes,t,n)},keydownEnter:function(){this.editMenuTarget&&!this.editTextTarget&&this.createNode(!0)},keydownShiftEnter:function(){this.editMenuTarget&&!this.editTextTarget&&this.createNode()},keydownSpace:function(){this.editMenuTarget&&this.readyEditText(this.editMenuTarget)},keydownDelete:function(){this.deleteNode()},moveSelect:function(e){var t=this.editMenuTarget;if(t){var n=function(e){var t=e.nodes,n=e.to,i=e.targetKey,o=null,r=i,s=t[r];if(s)if("right"===n)s.children.length>0&&(o=s.children[0]);else{var a=te({nodes:t,childKey:r});if(a){var l=t[a];if("left"===n&&(o=a),"down"===n){var c=(l.children.indexOf(r)+1)%l.children.length;o=l.children[c]}if("up"===n){var u=l.children.indexOf(r)-1;u=u<0?l.children.length-1:u,o=l.children[u]}}}return le({nodes:t})[o]&&(o=i),o}({nodes:this.nodes,to:e,targetKey:t});n&&this.selectNode(n)}},changeOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(e){var t=e.nodes,n=e.childKey,i=e.dif,o=te({nodes:t,childKey:n});if(!o)return null;var r=t[o],s=r.children.indexOf(n),a=s+i;a=a<0?r.children.length-1:a,a%=r.children.length;var l=re(r);return l.children.splice(s,1),l.children.splice(a,0,n),I()({},t,K()({},o,l))}({nodes:this.nodes,childKey:this.editMenuTarget,dif:e?-1:1});this.$emit("updateNodes",t)},mousewheel:function(e){this.$refs.svgCanvas.canvasWheel(e)},selectRectangle:function(e){var t=this,n=R()(this.nodes).reduce(function(n,i){if(!t.hiddenNodes[i]){var o={x:t.nodePositions[i].x,y:t.nodePositions[i].y,width:t.nodeSizes[i].width,height:t.nodeSizes[i].height};(s=(r={outer:e,inner:o}).outer,a=r.inner,!(s.x>a.x||s.y>a.y||s.x+s.width<a.x+a.width||s.y+s.height<a.y+a.height))&&(n[i]=!0,t.editMenuTarget=i)}var r,s,a;return n},{});this.$emit("setSelectedNodes",I()({},this.selectedNodes,n))},editDependency:function(){this.mode=this.mode===$.DEPENDENCY?$.NORMAL:$.DEPENDENCY},toggleDependency:function(e){var t=e.from,n=e.to;if(t!==n){var i=this.nodes[t],o=this.nodes[n];if(i&&o){var s=r()({},i,{dependencies:r()({},i.dependencies)});i.dependencies[n]?delete s.dependencies[n]:s.dependencies[n]=!0,this.$emit("updateNodes",K()({},t,s))}}},openNode:function(e){var t=this.nodes[e];this.$emit("updateNodes",K()({},e,r()({},t,{closed:!1})))},closeNode:function(e){this.selectedNodes[e]?this.selectNode(e):this.clearSelect();var t=this.nodes[e];this.$emit("updateNodes",K()({},e,r()({},t,{closed:!0})))},postComment:function(e){var t=e.comment,n=e.key,i=this.editMenuTarget;if(i){var o=n||g.database().ref().push().getKey(),s=t?Y(r()({},t,{uid:this.user.uid,nodeId:i})):null;this.$emit("postComment",{comment:s,key:o})}},showComments:function(e){this.selectNode(e),this.$refs.commentList.open=!0}}};var We=function(e){n("bwUd")},$e=Object(v.a)(Be,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-canvas-wrapper",on:{mouseup:function(t){return e.$isMobile.any?"":e.canvasCursorUp()},touchend:function(t){return e.$isMobile.any?e.canvasCursorUp():""}}},[n("div",{ref:"svgCanvasWrapper",staticClass:"canvas-wrapper",attrs:{tabindex:e.canWrite?"1":""},on:{click:e.getFocus,keydown:[function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key)?t.target!==t.currentTarget?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.keydownEnter(t):null},function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key)?t.target!==t.currentTarget?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:void e.keydownShiftEnter(t):null:null},function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key)?t.target!==t.currentTarget?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.moveSelect("up"):null},function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key)?t.target!==t.currentTarget?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.moveSelect("down"):null},function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key)?t.target!==t.currentTarget?null:"button"in t&&0!==t.button?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.moveSelect("left"):null},function(t){return"button"in t||!e._k(t.keyCode,"right",39,t.key)?t.target!==t.currentTarget?null:"button"in t&&2!==t.button?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.moveSelect("right"):null},function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key)?t.target!==t.currentTarget?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:void e.changeOrder(!0):null:null},function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key)?t.target!==t.currentTarget?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:void e.changeOrder():null:null},function(t){return"button"in t||!e._k(t.keyCode,"space",32,t.key)?t.target!==t.currentTarget?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.keydownSpace(t):null},function(t){return"button"in t||!e._k(t.keyCode,"delete",[8,46],t.key)?t.target!==t.currentTarget?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:void e.keydownDelete(t):null:null},function(t){return"button"in t||90===t.keyCode?t.target!==t.currentTarget?null:t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:void e.$emit("undo"):null:null},function(t){return"button"in t||90===t.keyCode?t.target!==t.currentTarget?null:t.metaKey?t.ctrlKey||t.shiftKey||t.altKey?null:void e.$emit("undo"):null:null},function(t){return"button"in t||90===t.keyCode?t.target!==t.currentTarget?null:t.ctrlKey&&t.shiftKey?t.altKey||t.metaKey?null:void e.$emit("redo"):null:null},function(t){return"button"in t||90===t.keyCode?t.target!==t.currentTarget?null:t.metaKey&&t.shiftKey?t.ctrlKey||t.altKey?null:void e.$emit("redo"):null:null}],mousewheel:function(e){e.preventDefault()}}},[e.canWrite?e._e():n("v-icon",{staticClass:"lock-button"},[e._v("lock")]),e._v(" "),n("SvgCanvas",{ref:"svgCanvas",attrs:{x:e.x,y:e.y,width:e.width,height:e.height,scale:e.scale},on:{move:e.move,zoom:e.zoom,selectRectangle:e.selectRectangle,click:e.clearSelect},nativeOn:{mousemove:function(t){var n;n=t,!e.$isMobile.any&&e.canvasCursorMove(n)},touchmove:function(t){var n;n=t,e.$isMobile.any&&e.canvasCursorMove(n)}}},[e._l(e.dependencyConnectors,function(t,i){return n("SvgBridgeConnector",{key:i,attrs:{sx:t.sx,sy:t.sy,ex:t.ex,ey:t.ey,selected:e.selectedDependencyConnector[i]}})}),e._v(" "),e._l(e.connectors,function(t,i){return e.isShowConnectors[i]?n("SvgConnector",{key:i,attrs:{sx:t.sx,sy:t.sy,ex:t.ex,ey:t.ey}}):e._e()}),e._v(" "),e._l(e.nodes,function(t,i){return e.isShowNodes[i]?n("SvgTextRectangle",{key:i,staticClass:"mind-node",class:{"moving-origin":e.movingNodePositions[i]},attrs:{x:e.nodePositions[i].x,y:e.nodePositions[i].y,text:i===e.editTextTarget?e.editingText:t.text,strokeWidth:e.getStrokeWidth(i),stroke:e.getStrokeColor(i),fill:t.backgroundColor,textFill:t.color,hiddenFamilyCount:e.closedNodeFamilyCounts[i],commentCount:e.commentCounts[i],childrenCount:t.children.length},on:{calcSize:function(t){return e.calcSize({key:i,size:t})},down:function(t){return e.canWrite?e.nodeCursorDown(t,i):""},up:function(t){return e.canWrite?e.nodeCursorUp(i,{shift:t.shiftKey}):""},open:function(t){e.openNode(i)},close:function(t){e.closeNode(i)},clickComment:function(t){e.showComments(i)}}}):e._e()}),e._v(" "),e.connectorOfMovingNodes?n("g",{staticClass:"inserting-marker"},[n("SvgConnector",{attrs:{sx:e.connectorOfMovingNodes.sx,sy:e.connectorOfMovingNodes.sy,ex:e.connectorOfMovingNodes.ex,ey:e.connectorOfMovingNodes.ey}}),e._v(" "),n("SvgRectangle",{attrs:{x:e.connectorOfMovingNodes.ex,y:e.connectorOfMovingNodes.ey-e.NODE_MARGIN_Y/3/2,rx:5,ry:5,width:50,height:e.NODE_MARGIN_Y/3,stroke:"none",fill:"blue"}})],1):e._e(),e._v(" "),e._l(e.movingNodePositions,function(t,i){return n("SvgTextRectangle",{key:"moving_"+i,staticClass:"mind-node moving-copy",attrs:{x:t.x,y:t.y,text:e.nodes[i].text,strokeWidth:e.selectedNodes[i]?2:1,stroke:e.selectedNodes[i]?"blue":"black",fill:e.nodes[i].backgroundColor,textFill:e.nodes[i].color,hiddenFamilyCount:e.closedNodeFamilyCounts[i],commentCount:e.commentCounts[i],childrenCount:e.nodes[i].children.length}})})],2)],1),e._v(" "),n("div",{staticClass:"scale-tool"},[n("ScaleToolBox",{attrs:{min:e.MIN_SCALE_RATE,max:e.MAX_SCALE_RATE,step:.1,scaleRate:e.scaleRate},on:{changeScaleRate:e.setScaleRateBaseCenter,clearZoom:e.clearZoom}})],1),e._v(" "),e.canWrite?n("div",{staticClass:"history-tool"},[n("HistoryToolBox",{on:{undo:function(t){e.$emit("undo")},redo:function(t){e.$emit("redo")}}})],1):e._e(),e._v(" "),e.showEditMenu&&e.editMenuTargetNode.children.length>0?n("ToggleCloseButton",{attrs:{x:e.fixTopBoxPosition.x,y:e.fixTopBoxPosition.y,closed:e.editMenuTargetNode.closed},on:{open:function(t){e.openNode(e.editMenuTarget)},close:function(t){e.closeNode(e.editMenuTarget)}},nativeOn:{mousewheel:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.mousewheel(n)}}}):e._e(),e._v(" "),e.showEditMenu?n("FloatButton",{attrs:{x:e.fixTopBoxPosition.x-e.fixButtonMargin,y:e.fixTopBoxPosition.y},on:{click:e.deleteNode},nativeOn:{mousewheel:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.mousewheel(n)}}},[n("v-icon",[e._v("delete")])],1):e._e(),e._v(" "),e.showEditMenu?n("FloatButton",{attrs:{x:e.fixTopBoxPosition.x+e.fixButtonMargin,y:e.fixTopBoxPosition.y,color:"indigo"},on:{click:function(t){e.readyEditText(e.editMenuTarget)}},nativeOn:{mousewheel:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.mousewheel(n)}}},[n("v-icon",[e._v("edit")])],1):e._e(),e._v(" "),e.showEditMenu?n("FloatButton",{attrs:{x:e.fixBottomBoxPosition.x-e.fixButtonMargin,y:e.fixBottomBoxPosition.y,color:e.mode===e.CANVAS_MODE.DEPENDENCY?"deep-orange":"indigo"},on:{click:e.editDependency},nativeOn:{mousewheel:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.mousewheel(n)}}},[n("v-icon",[e._v("call_missed")])],1):e._e(),e._v(" "),e.showEditMenu&&e.editMenuTarget!==e.ROOT_NODE?n("FloatButton",{attrs:{x:e.fixBottomBoxPosition.x,y:e.fixBottomBoxPosition.y,color:"indigo"},on:{click:function(t){e.createNode(!0)}},nativeOn:{mousewheel:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.mousewheel(n)}}},[n("v-icon",[e._v("add")])],1):e._e(),e._v(" "),e.showEditMenu?n("FloatButton",{attrs:{x:e.fixBottomBoxPosition.x+e.fixButtonMargin,y:e.fixBottomBoxPosition.y,color:"indigo"},on:{click:function(t){e.createNode(!1)}},nativeOn:{mousewheel:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.mousewheel(n)}}},[n("v-icon",[e._v("subdirectory_arrow_right")])],1):e._e(),e._v(" "),e.showTextInput?n("FloatTextInput",{ref:"floatTextInput",attrs:{targetKey:e.editTextTarget},on:{done:e.doneEditText},nativeOn:{mousewheel:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.mousewheel(n)}},model:{value:e.editingText,callback:function(t){e.editingText=t},expression:"editingText"}}):e._e(),e._v(" "),e.showEditMenu?n("FloatEditMenu",{ref:"floatEditMenu",attrs:{root:e.editMenuTarget===e.ROOT_NODE,mode:e.mode,defaultNodeProps:e.defaultNodeProps,multiSelect:e.isMultiSelect},on:{editDependency:e.editDependency,selectProp:function(t){return e.$emit("selectProp",t)},delete:e.deleteNode},nativeOn:{mousewheel:function(t){var n;t.preventDefault(),n=t,!e.$isMobile.any&&e.mousewheel(n)}}}):e._e(),e._v(" "),n("CommentList",{directives:[{name:"show",rawName:"v-show",value:e.showEditMenu,expression:"showEditMenu"}],ref:"commentList",staticClass:"comment-list",attrs:{comments:e.targetNodeComments,users:e.users,user:e.user},on:{postComment:e.postComment}}),e._v(" "),n("v-snackbar",{attrs:{bottom:"",right:"",timeout:2e3},model:{value:e.comfirmDelete,callback:function(t){e.comfirmDelete=t},expression:"comfirmDelete"}},[e._v("\n    One more click to delete.\n  ")])],1)},[],!1,We,"data-v-24c7bdfa",null).exports;var He=function(e){n("jRZq")},qe=Object(v.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("div",{staticClass:"headline"},[e._v("Permission denied")])])]),e._v(" "),n("v-card-text",[n("v-list",[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",[e._v("There may be some reasons.")])],1)],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-sub-title",[e._v("This file does not exist.")])],1)],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-sub-title",[e._v("You don't have an authority to read this file.")])],1)],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",[e._v("Let's reload after getting an authority.")])],1)],1)],1)],1)],1)},[],!1,He,"data-v-04fb0a94",null).exports,Xe="NODES",Ve="SELECTED_NODES",Ge="FILE_KEY",Qe="INITIAL_LOADING",Ye="DISCONNECT",Ze="LOAD_NODES",Je="UPDATE_NODES",et="UNDO_NODES",tt="REDO_NODES",nt="SET_SELECTED_NODES",it="CLEAR_SELECT",ot="RESCUE_CONFRICT",rt="UPDATE_NODES",st="SET_SELECTED_NODES",at="SET_FILE_KEY",lt="CLEAR_NODES",ct="SET_INITIAL_LOADING",ut="PUSH_UNDO_STACK",dt="POP_UNDO_STACK",ht="POP_REDO_STACK",ft="CLEAR_STACKS",vt="CLEAR_UNDO_STACKS",mt="CLEAR_REDO_STACKS",pt="COMMENTS",yt="FILE_KEY",gt="DISCONNECT",xt="LOAD_COMMENTS",bt="UPDATE_COMMENTS",_t="UPDATE_COMMENTS",Ct="SET_FILE_KEY",wt="CLEAR_COMMENTS",Et="USERS",kt="LOAD_USER",St="LOAD_USER_FROM_EMAIL",Tt="LOAD_USERS",Nt="LOAD_USERS_FROM_EMAIL",Ot="UPDATE_USERS",At="FILES",Mt="FILE_AUTHORITIES",Kt="SHARED_FILES",Dt="SHARED_FILE_AUTHORITIES",Rt="FILE_FROM_KEY",Ft="FILE_AUTHORITY_FROM_KEY",Lt="IS_MY_FILE_FROM_KEY",Pt="PERMISSION_DENIED",It="DISCONNECT_FILE",Ut="LOAD_FILE",jt="LOAD_FILES",zt="UPDATE_FILES",Bt="CREATE_FILE",Wt="CLONE_FILE",$t="DELETE_FILES",Ht="INVITE_USER",qt="UPDATE_STATUS",Xt="UPDATE_USER_AUTHORITIES",Vt="UPDATE_FILES",Gt="UPDATE_FILE_AUTHORITIES",Qt="UPDATE_SHARED_FILES",Yt="UPDATE_SHARED_FILE_AUTHORITIES",Zt="CLEAR_FILES",Jt="SET_PERMISSION_DENIED",en="NODE_COLOR",tn="TEXT_COLOR",nn="SET_NODE_COLOR",on="SET_TEXT_COLOR",rn="SET_NODE_COLOR",sn="SET_TEXT_COLOR",an={components:{MapCanvas:$e,PermissionDeniedMessage:qe},data:function(){return{message:""}},props:{fileKey:{type:String,required:!0}},computed:r()({},Object(s.c)("layouts",{leftDrawer:k}),Object(s.c)("user",{user:a,_canWrite:c}),Object(s.c)("nodes",{nodes:Xe,selectedNodes:Ve,initialLoading:Qe}),Object(s.c)("comments",{comments:pt}),Object(s.c)("users",{users:Et}),Object(s.c)("files",{fileFromKey:Rt,fileAuthorityFromKey:Ft,permissionDenied:Pt}),Object(s.c)("settings",{nodeColor:en,textColor:tn}),{canWrite:function(){return this._canWrite({fileKey:this.fileKey})},canvasWidth:function(){return this.$window.width>=1264&&this.leftDrawer?this.$window.width-300-20:this.$window.width-20},canvasHeight:function(){return this.$window.height-48},defaultNodeProps:function(){return{backgroundColor:this.nodeColor,color:this.textColor}},file:function(){return this.fileFromKey({fileKey:this.fileKey})},fileAuthority:function(){return this.fileAuthorityFromKey({fileKey:this.fileKey})},loaded:function(){return!this.initialLoading||this.file&&this.file.nodeCount<1},snackbar:{get:function(){return!!this.message},set:function(e){this.message=e?this.message:""}}}),watch:{comments:{handler:function(e){var t=this,n=R()(this.comments).reduce(function(e,n){var i=t.comments[n];return t.users[i.uid]||(e[i.uid]=!0),e},{});this.loadUsers({users:n})},deep:!0}},mounted:function(){this.loadFile({key:this.fileKey}),this.loadNodes({fileKey:this.fileKey}),this.loadComments({fileKey:this.fileKey})},destroyed:function(){this.disconnectComments(),this.disconnectNodes(),this.disconnectFile({key:this.fileKey})},methods:r()({},Object(s.b)("nodes",{disconnectNodes:Ye,updateNodes:Je,_setSelectedNodes:nt,clearSelect:it,loadNodes:Ze,_undo:et,_redo:tt}),Object(s.b)("comments",{disconnectComments:gt,loadComments:xt,updateComments:bt}),Object(s.b)("users",{loadUsers:Tt}),Object(s.b)("files",{disconnectFile:It,loadFile:Ut}),Object(s.b)("settings",{setNodeColor:nn,setTextColor:on}),{setSelectedNodes:function(e){var t=e.selectedNodes;this._setSelectedNodes({selectedNodes:t});var n=R()(t);if(n.length>0){var i=n[0],o=this.nodes[i];this.setTextColor({textColor:o.color}),this.setNodeColor({nodeColor:o.backgroundColor})}},undo:function(){var e=this;this._undo().catch(function(t){e.message=t.message})},redo:function(){var e=this;this._redo().catch(function(t){e.message=t.message})},changeSelectedNodesProps:function(e){var t=this,n=e.color,i=e.backgroundColor,o=R()(this.selectedNodes);if(o.length>0){var s=o.reduce(function(e,o){return e[o]=r()({},t.nodes[o],{color:n,backgroundColor:i}),e},{});this.updateNodes({nodes:s})}},selectProp:function(e){var t=e.color,n=e.backgroundColor;this.changeSelectedNodesProps({color:t,backgroundColor:n}),this.setTextColor({textColor:t}),this.setNodeColor({nodeColor:n})},postComment:function(e){var t=e.comment,n=e.key,i=K()({},n,t);this.updateComments({comments:i})}})};var ln=function(e){n("TaBb")},cn=Object(v.a)(an,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[e.loaded&&!e.permissionDenied?n("MapCanvas",{attrs:{width:e.canvasWidth,height:e.canvasHeight,nodes:e.nodes,selectedNodes:e.selectedNodes,fileAuthority:e.fileAuthority,user:e.user,canWrite:e.canWrite,defaultNodeProps:e.defaultNodeProps,comments:e.comments,users:e.users},on:{updateNodes:function(t){return e.updateNodes({nodes:t})},setSelectedNodes:function(t){return e.setSelectedNodes({selectedNodes:t})},clearSelect:e.clearSelect,undo:e.undo,redo:e.redo,selectProp:e.selectProp,postComment:e.postComment}}):e._e(),e._v(" "),e.permissionDenied?n("div",{staticClass:"center-box"},[n("PermissionDeniedMessage")],1):e._e(),e._v(" "),n("v-snackbar",{attrs:{bottom:"",left:"",color:"error",timeout:4e3},on:{click:function(t){e.snackbar=!1}},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.message)+"\n  ")])],1)},[],!1,ln,"data-v-fa04394e",null).exports,un={data:function(){return{dialog:!1,email:"",readOnly:!1,publicFileLocal:!1,publicReadOnlyLocal:!1,updatedAuthorities:{}}},props:{publicFile:{type:Boolean,default:!1},publicReadOnly:{type:Boolean,default:!1},canEditPublic:{type:Boolean,default:!0},userAuthorities:{type:Object,default:function(){return{}}},users:{type:Object,default:function(){return{}}},user:{type:Object,required:!0}},computed:{emailErrors:function(){return[]},owner:function(){var e=this,t=R()(this.userAuthorities).find(function(t){return e.userAuthorities[t].owner});return t?this.users[t]:null},invitedUserAuthorities:function(){var e=I()({},this.userAuthorities);return this.owner&&delete e[this.owner.uid],e}},watch:{dialog:function(e){e&&this.initData()}},methods:{isMe:function(e){return e===this.user.uid},initData:function(){this.email="",this.readOnly=!1,this.publicFileLocal=this.publicFile||!1,this.publicReadOnlyLocal=this.publicReadOnly||!1,this.updatedAuthorities={}},setStatus:function(){this.$emit("setStatus",{publicFile:this.publicFileLocal,readOnly:this.publicReadOnlyLocal})},invite:function(){this.email&&(this.$emit("invite",{email:this.email,readOnly:this.readOnly}),this.email="")},update:function(){var e=this,t=R()(this.updatedAuthorities).reduce(function(t,n){return e.userAuthorities[n]&&(e.updatedAuthorities[n]?t[n]=e.updatedAuthorities[n]:t[n]=null),t},{});this.$emit("updateUserAuthorities",t),this.updatedAuthorities={}},toggleDeleteUser:function(e){null===this.updatedAuthorities[e]?i.a.delete(this.updatedAuthorities,e):i.a.set(this.updatedAuthorities,e,null)},toggleWritableUser:function(e){var t=this.updatedAuthorities[e];null!==t&&(t?i.a.delete(this.updatedAuthorities,e):i.a.set(this.updatedAuthorities,e,{write:!this.userAuthorities[e].write}))}}};var dn=function(e){n("fja8")},hn=Object(v.a)(un,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{"max-width":"560"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[n("v-icon",[e._v("share")])],1),e._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("File status")]),e._v(" "),n("v-card-text",[n("form",[n("v-checkbox",{class:{updated:e.publicFile!==e.publicFileLocal},attrs:{"hide-details":"",label:"Public",disabled:!e.canEditPublic},model:{value:e.publicFileLocal,callback:function(t){e.publicFileLocal=t},expression:"publicFileLocal"}}),e._v(" "),e.publicFileLocal?n("v-checkbox",{class:{updated:e.publicReadOnly!==e.publicReadOnlyLocal},attrs:{"hide-details":"",label:"Read Only (except for invited users)",disabled:!e.canEditPublic},model:{value:e.publicReadOnlyLocal,callback:function(t){e.publicReadOnlyLocal=t},expression:"publicReadOnlyLocal"}}):e._e(),e._v(" "),n("div",{staticClass:"text-xs-right"},[e.canEditPublic?n("v-btn",{on:{click:e.setStatus}},[e._v("Update")]):e._e()],1)],1)]),e._v(" "),n("v-divider")],1),e._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Share")]),e._v(" "),n("v-card-text",[n("form",{on:{submit:function(t){t.preventDefault(),e.invite(t)}}},[n("v-text-field",{attrs:{label:"E-mail","error-messages":e.emailErrors,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),n("v-checkbox",{attrs:{"hide-details":"",label:"Read only"},model:{value:e.readOnly,callback:function(t){e.readOnly=t},expression:"readOnly"}}),e._v(" "),n("div",{staticClass:"text-xs-right"},[n("v-btn",{on:{click:e.invite}},[e._v("Invite")])],1)],1)]),e._v(" "),n("v-divider")],1),e._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Users")]),e._v(" "),n("v-card-text",[n("v-list",{attrs:{subheader:""}},[n("v-subheader",[e._v("Owner")]),e._v(" "),e.owner?n("v-list-tile",{attrs:{avatar:""}},[n("v-badge",{attrs:{overlay:"",left:"",color:"blue",overlap:""}},[n("v-icon",{attrs:{slot:"badge",dark:""},slot:"badge"},[e._v("edit")]),e._v(" "),n("v-avatar",{attrs:{size:"32px"}},[n("img",{attrs:{src:e.owner.photoURL}})])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(e.owner.displayName))]),e._v(" "),n("v-list-tile-sub-title",[e._v(e._s(e.owner.email))])],1)],1):e._e()],1),e._v(" "),n("v-list",{attrs:{subheader:""}},[n("v-subheader",[e._v("Invited users")]),e._v(" "),e._l(e.invitedUserAuthorities,function(t,i){return e.users[i]?n("v-list-tile",{key:i,class:{updated:i in e.updatedAuthorities},attrs:{avatar:""}},[n("v-badge",{staticClass:"toggle-writable",class:{myself:e.isMe(i)},attrs:{overlay:"",left:"",overlap:"",color:e.updatedAuthorities[i]?e.updatedAuthorities[i].write?"blue":"grey":t.write?"blue":"grey"},nativeOn:{click:function(t){!e.isMe(i)&&e.toggleWritableUser(i)}}},[n("v-icon",{attrs:{slot:"badge",dark:""},slot:"badge"},[e._v("edit")]),e._v(" "),n("v-avatar",{attrs:{size:"32px"}},[n("img",{attrs:{src:e.users[i].photoURL}})])],1),e._v(" "),n("v-list-tile-content",{class:{deleted:null===e.updatedAuthorities[i]}},[n("v-list-tile-title",[e._v(e._s(e.users[i].displayName)+e._s(e.isMe(i)?" ( you! )":""))]),e._v(" "),n("v-list-tile-sub-title",[e._v(e._s(e.users[i].email))])],1),e._v(" "),n("v-list-tile-action",[n("v-btn",{attrs:{icon:"",ripple:"",disabled:e.isMe(i)},on:{click:function(t){e.toggleDeleteUser(i)}}},[n("v-icon",{attrs:{color:null===e.updatedAuthorities[i]?"red":"grey"}},[e._v("delete")])],1)],1)],1):e._e()})],2),e._v(" "),n("div",{staticClass:"text-xs-right"},[n("v-btn",{on:{click:e.update}},[e._v("Update")])],1)],1)],1),e._v(" "),n("v-card",[n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"black darken-1",flat:"flat"},on:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1)],1)},[],!1,dn,"data-v-63b3ae06",null).exports;var fn=function(e){n("zG2H")},vn=Object(v.a)({data:function(){return{dialog:!1}}},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{width:"400px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[n("v-icon",[e._v("help")])],1),e._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Help")])]),e._v(" "),n("v-list",{attrs:{"two-line":"",subheader:""}},[n("v-divider"),e._v(" "),n("v-subheader",[e._v("Select")]),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Move focus\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Arrow key")])])],1)],1),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Multiple\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Shift")]),e._v(" + "),n("code",[e._v("Click")])])],1)],1),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Rectangle\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Shift")]),e._v(" + "),n("code",[e._v("Drag")])])],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-subheader",[e._v("Selecting a Node")]),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Create a younger node\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Enter")])])],1)],1),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Create a child node\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Shift")]),e._v(" + "),n("code",[e._v("Enter")])])],1)],1),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Delete a node\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Shift")]),e._v(" + "),n("code",[e._v("Delete")])])],1)],1),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Edit text\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Space")]),e._v(" , "),n("code",[e._v("Double click")])])],1)],1),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Complete editing text\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Escape")])])],1)],1),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Change the parent\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Drag")])])],1)],1),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Switch order\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Shift")]),e._v(" + "),n("code",[e._v("Up or Down")])])],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-subheader",[e._v("History")]),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Undo\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Control")]),e._v(" + "),n("code",[e._v("Z")]),e._v(" , "),n("code",[e._v("Command")]),e._v(" + "),n("code",[e._v("Z")])])],1)],1),e._v(" "),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n              Redo\n            ")]),e._v(" "),n("v-list-tile-sub-title",[n("code",[e._v("Control")]),e._v(" + "),n("code",[e._v("Shift")]),e._v(" + "),n("code",[e._v("Z")]),e._v(" , "),n("code",[e._v("Command")]),e._v(" + "),n("code",[e._v("Shift")]),e._v(" + "),n("code",[e._v("Z")])])],1)],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"black darken-1",flat:"flat"},on:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1)],1)},[],!1,fn,"data-v-e08a90b8",null).exports,mn={components:{InviteUserDialog:hn,MapHelpDialog:vn},computed:r()({},Object(s.c)("nodes",{fileKey:Ge}),Object(s.c)("files",{fileAuthorityFromKey:Ft,isMyFileFromKey:Lt}),Object(s.c)("user",{user:a}),Object(s.c)("users",{users:Et}),{fileAuthority:function(){return this.fileAuthorityFromKey({fileKey:this.fileKey})},canEditPublic:function(){return this.isMyFileFromKey({fileKey:this.fileKey})},canShare:function(){if(!this.user)return!1;var e=this.user.uid,t=this.fileAuthority;if(t){var n=t.users[e];return n&&n.write}return!1},publicFile:function(){var e=this.fileAuthority;return e?e.public:null},userAuthorities:function(){return this.fileAuthority.users||{}}}),methods:r()({},Object(s.b)("files",{inviteUser:Ht,updateStatus:qt,_updateUserAuthorities:Xt}),Object(s.b)("users",{_loadUsers:Tt,_loadUsersFromEmail:Nt}),{invite:function(e){var t=e.email,n=e.readOnly;this.inviteUser({fileKey:this.fileKey,email:t,readOnly:n}),this._loadUsersFromEmail({emailList:[t]})},setStatus:function(e){var t=e.publicFile,n=e.readOnly;this.updateStatus({publicFile:t,readOnly:n,fileKey:this.fileKey})},loadUsers:function(){this._loadUsers({users:this.userAuthorities})},updateUserAuthorities:function(e){this._updateUserAuthorities({userAuthorities:e,fileKey:this.fileKey})}})};var pn=function(e){n("j8xj")},yn=Object(v.a)(mn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-menu"},[e.canShare?n("InviteUserDialog",{attrs:{publicFile:!!e.publicFile,publicReadOnly:!!e.publicFile&&!e.publicFile.write,canEditPublic:e.canEditPublic,userAuthorities:e.userAuthorities,users:e.users,user:e.user},on:{setStatus:e.setStatus,invite:e.invite,updateUserAuthorities:e.updateUserAuthorities},nativeOn:{click:function(t){e.loadUsers(t)}}}):e._e(),e._v(" "),n("MapHelpDialog")],1)},[],!1,pn,"data-v-9229e150",null).exports,gn={components:{InviteUserDialog:hn,MapHelpDialog:vn},props:{},computed:r()({},Object(s.c)("nodes",{fileKey:Ge}),Object(s.c)("files",{fileFromKey:Rt}),{file:function(){return this.fileFromKey({fileKey:this.fileKey})}}),methods:{moveToHome:function(){this.$router.push({name:"WorkSpace"})}}};var xn=function(e){n("cyUf")},bn=Object(v.a)(gn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-title-wrapper"},[e.file?n("div",{staticClass:"header-title"},[e.file?n("v-btn",{staticClass:"button",attrs:{icon:"",small:""},on:{click:e.moveToHome}},[n("v-icon",[e._v("arrow_back")])],1):e._e(),e._v(" "),n("h1",{staticClass:"title-text"},[e._v(e._s(e.file.name||"untitled"))])],1):n("v-btn",{staticClass:"header-title",attrs:{flat:""},on:{click:e.moveToHome}},[e._v("MindXXACPR")])],1)},[],!1,xn,"data-v-1c0b2031",null).exports,_n=n("Zzkc"),Cn={components:{ColorPicker:_n.Swatches,MapCanvas:$e},data:function(){return{renderCanvas:!1,showNodeColorPicker:!1,showTextColorPicker:!1}},props:{nodes:{type:Object,required:!0,validator:function(e){return W in e}},file:{type:Object,required:!0},nodeColor:{type:String,default:"#87cefa"},textColor:{type:String,default:"#000000"},canWrite:{type:Boolean,default:!1}},computed:{canvasWidth:function(){return 1024},canvasHeight:function(){return 1024}},methods:{printSvg:function(){var e=this;this.renderCanvas=!0,this.$nextTick().then(function(){var t=e.$refs.mapCanvas;t.clearZoom().then(function(){var n=t.$refs.svgCanvas.$el,i=(new XMLSerializer).serializeToString(n);e.downloadText(i,e.file.name),e.renderCanvas=!1})})},downloadText:function(e,t){var n=t.replace(/^.*[(\\|/|:|*|?|"|<|>||)].*$/,"_"),i=new Blob([e],{type:"image/svg+xml"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,n);else{var o=document.createElement("a");o.href=URL.createObjectURL(i),o.target="_blank",o.download=t,o.click()}}}};var wn=function(e){n("fxIO")},En={components:{MapLeftDrawer:Object(v.a)(Cn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tabs",{attrs:{grow:""}},[n("v-tabs-bar",{staticClass:"grey lighten-4",attrs:{light:""}},[e.canWrite?n("v-tabs-item",{staticClass:"primary--text",attrs:{href:"#left-drawer-edit"}},[n("v-icon",[e._v("mode_edit")])],1):e._e(),e._v(" "),n("v-tabs-item",{staticClass:"primary--text",attrs:{href:"#left-drawer-file"}},[n("v-icon",[e._v("insert_drive_file")])],1),e._v(" "),n("v-tabs-slider",{attrs:{color:"yellow"}})],1),e._v(" "),n("v-tabs-items",[e.canWrite?n("v-tabs-content",{attrs:{id:"left-drawer-edit"}},[n("v-list",[n("v-list-tile",{style:{background:e.nodeColor},on:{click:function(t){e.showNodeColorPicker=!e.showNodeColorPicker}}},[n("v-list-tile-action",[n("v-icon",{style:{color:e.textColor}},[e._v("palette")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{style:{color:e.textColor}},[n("b",[e._v("Node Color")])])],1)],1),e._v(" "),e.showNodeColorPicker?n("li",{staticClass:"picker-box"},[n("ColorPicker",{attrs:{value:e.nodeColor},on:{input:function(t){return e.$emit("changeNodeColor",t.hex)}}})],1):e._e(),e._v(" "),n("v-list-tile",{style:{background:e.nodeColor},on:{click:function(t){e.showTextColorPicker=!e.showTextColorPicker}}},[n("v-list-tile-action",[n("v-icon",{style:{color:e.textColor}},[e._v("palette")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{style:{color:e.textColor}},[n("b",[e._v("Text Color")])])],1)],1),e._v(" "),e.showTextColorPicker?n("li",{staticClass:"picker-box"},[n("ColorPicker",{attrs:{value:e.textColor},on:{input:function(t){return e.$emit("changeTextColor",t.hex)}}})],1):e._e()],1)],1):e._e(),e._v(" "),n("v-tabs-content",{attrs:{id:"left-drawer-file"}},[n("v-list",[n("v-list-tile",{on:{click:e.printSvg}},[n("v-list-tile-action",[n("v-icon",[e._v("file_download")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v("SVG")])],1)],1),e._v(" "),e.renderCanvas?n("MapCanvas",{ref:"mapCanvas",staticClass:"map-canvas",attrs:{nodes:e.nodes,width:e.canvasWidth,height:e.canvasHeight}}):e._e(),e._v(" "),n("v-divider"),e._v(" "),e.canWrite?n("v-list-tile",{on:{click:function(t){e.$emit("repairFile")}}},[n("v-list-tile-action",[n("v-icon",[e._v("autorenew")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Repair file")])],1)],1):e._e()],1)],1)],1)],1)},[],!1,wn,"data-v-90a735e6",null).exports},computed:r()({},Object(s.c)("nodes",{nodes:Xe,selectedNodes:Ve,fileKey:Ge}),Object(s.c)("settings",{nodeColor:en,textColor:tn}),Object(s.c)("files",{fileFromKey:Rt}),Object(s.c)("user",{_canWrite:c}),{canWrite:function(){return this._canWrite({fileKey:this.fileKey})},file:function(){return this.fileFromKey({fileKey:this.fileKey})}}),methods:r()({},Object(s.b)("nodes",{updateNodes:Je,_repairFile:ot}),Object(s.b)("settings",{setNodeColor:nn,setTextColor:on}),{changeSelectedNodesProps:function(e){var t=this,n=R()(this.selectedNodes);if(n.length>0){var i=n.reduce(function(n,i){return n[i]=I()({},t.nodes[i],e),n},{});this.updateNodes({nodes:i})}},changeNodeColor:function(e){this.setNodeColor({nodeColor:e}),this.changeSelectedNodesProps({backgroundColor:e})},changeTextColor:function(e){this.setTextColor({textColor:e}),this.changeSelectedNodesProps({color:e})},repairFile:function(){this._repairFile().then(function(){location.reload()})}})};var kn=function(e){n("lUGE")},Sn=Object(v.a)(En,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.file?n("MapLeftDrawer",{attrs:{nodes:e.nodes,file:e.file,nodeColor:e.nodeColor,textColor:e.textColor,canWrite:e.canWrite},on:{changeNodeColor:e.changeNodeColor,changeTextColor:e.changeTextColor,repairFile:e.repairFile}}):e._e()},[],!1,kn,"data-v-e7695976",null).exports,Tn={data:function(){return{pagination:{sortBy:"updated",descending:!0},snackbar:!1,dataKind:"all"}},props:{files:{type:Object,default:function(){return{}}},fileAuthorities:{type:Object,default:function(){return{}}},sharedFiles:{type:Object,default:function(){return{}}},sharedFileAuthorities:{type:Object,default:function(){return{}}},user:{type:Object,default:function(){return{}}}},computed:{headers:function(){return[{text:"Name",align:"left",value:"name"},{text:"Count",value:"nodeCount"},{text:"Updated",value:"updated"},{text:"Created",value:"created"},{text:"",value:"",sortable:!1},{text:"",value:"",sortable:!1}]},currentFiles:function(){return"shared"===this.dataKind?this.sharedFiles:"workSpace"===this.dataKind?this.files:r()({},this.sharedFiles,this.files)},currentFileAuthorities:function(){return"shared"===this.dataKind?this.sharedFileAuthorities:"workSpace"===this.dataKind?this.fileAuthorities:r()({},this.sharedFileAuthorities,this.fileAuthorities)},sortedFileList:function(){var e=this,t=[this.pagination.sortBy],n=this.pagination.descending?-1:1;return R()(this.currentFiles).map(function(t){return I()({},e.currentFiles[t],{key:t})}).sort(function(e,i){return(e[t]-i[t])*n})},canWrite:function(){var e=this,t=this.user.uid;return R()(this.currentFileAuthorities).reduce(function(n,i){var o=e.currentFileAuthorities[i];if(o){var r=o.users[t];r?n[i]=r.write:o.public?n[i]=o.public.write:n[i]=!1}else n[i]=!1;return n},{})},hideEditTools:function(){return"shared"===this.dataKind}},methods:{changeName:function(e){var t=e.key,n=e.name,i=K()({},t,I()({},this.currentFiles[t],{name:n}));this.$emit("changeName",{files:i})},createFile:function(){this.$emit("createFile",{file:{name:""}}),this.pagination.sortBy="updated",this.pagination.descending=!0},deleteFile:function(e){if(this.snackbar){var t=K()({},e,null);this.$emit("deleteFiles",{files:t}),this.snackbar=!1}else this.snackbar=!0},cloneFile:function(e){this.currentFiles[e]&&this.$emit("cloneFile",{fileKey:e})},dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}}};var Nn=function(e){n("qOlY")},On={components:{WorkSpace:Object(v.a)(Tn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"work-space-component"},[n("v-card",[n("v-card-title",[n("v-flex",{attrs:{xs6:""}},[n("v-select",{staticClass:"data-kind-select",attrs:{items:[{text:"All files",value:"all"},{text:"My files",value:"workSpace"},{text:"Shared files",value:"shared"}],"single-line":"",bottom:"","hide-details":""},model:{value:e.dataKind,callback:function(t){e.dataKind=t},expression:"dataKind"}})],1),e._v(" "),n("div",{staticClass:"header-buttons"},[e.hideEditTools?e._e():n("v-btn",{attrs:{dark:"",fab:"",small:"",color:"green"},on:{click:e.createFile}},[n("v-icon",[e._v("add")])],1)],1)],1)],1),e._v(" "),n("v-card",[n("div",{staticClass:"header-tools"}),e._v(" "),e._l(e.sortedFileList,function(t){return n("v-flex",{key:t.key,attrs:{"xs-12":""}},[n("v-card",{staticClass:"file-card"},[n("v-card-title",{staticClass:"card-title"},[n("div",{staticClass:"content-box",on:{click:function(n){e.$router.push({name:"Map",params:{fileKey:t.key}})}}},[n("p",{staticClass:"file-name mb-0"},[e._v(e._s(t.name||"untitled"))]),e._v(" "),n("dl",[n("dt",[e._v("Nodes: ")]),n("dd",[e._v(e._s(t.nodeCount))])]),e._v(" "),n("dl",[n("dt",[e._v("Updated: ")]),n("dd",[e._v(e._s(e.dateFormat(t.updated)))]),e._v(" "),n("dt",[e._v("Created: ")]),n("dd",[e._v(e._s(e.dateFormat(t.created)))])])]),e._v(" "),n("div",{staticClass:"button-box"},[n("v-chip",{staticClass:"shared-tag",class:{hidden:!e.sharedFileAuthorities[t.key]}},[e._v("\n                shared\n            ")]),e._v(" "),n("v-edit-dialog",{class:{hidden:!e.canWrite[t.key]},attrs:{lazy:""}},[n("v-btn",{staticClass:"file-button edit-name",attrs:{dark:"",fab:"",small:"",color:"blue"}},[n("v-icon",[e._v("textsms")])],1),e._v(" "),n("v-text-field",{attrs:{slot:"input","single-line":"",counter:"",label:"Edit",value:t.name},on:{change:function(n){return e.changeName({key:t.key,name:n})}},slot:"input"})],1),e._v(" "),n("v-btn",{staticClass:"file-button",attrs:{dark:"",fab:"",small:"",outline:"",color:"black"},on:{click:function(n){e.cloneFile(t.key)}}},[n("v-icon",[e._v("content_copy")])],1),e._v(" "),n("v-btn",{staticClass:"file-button",class:{hidden:e.sharedFileAuthorities[t.key]},attrs:{dark:"",fab:"",small:"",outline:"",color:"black"},on:{click:function(n){e.deleteFile(t.key)}}},[n("v-icon",[e._v("delete")])],1)],1)])],1)],1)})],2),e._v(" "),n("v-snackbar",{attrs:{bottom:"",right:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    One more click to delete.\n  ")])],1)},[],!1,Nn,"data-v-04ba6b31",null).exports},computed:r()({},Object(s.c)("files",{files:At,fileAuthorities:Mt,sharedFiles:Kt,sharedFileAuthorities:Dt}),Object(s.c)("user",{user:a})),mounted:function(){this.loadFiles()},methods:r()({},Object(s.b)("files",{loadFiles:jt,updateFiles:zt,createFile:Bt,cloneFile:Wt,deleteFiles:$t}))};var An=function(e){n("nqpz")},Mn=Object(v.a)(On,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"work-space-wrapper"},[n("WorkSpace",{attrs:{files:e.files,fileAuthorities:e.fileAuthorities,sharedFiles:e.sharedFiles,sharedFileAuthorities:e.sharedFileAuthorities,user:e.user},on:{changeName:e.updateFiles,createFile:e.createFile,cloneFile:e.cloneFile,deleteFiles:e.deleteFiles}})],1)},[],!1,An,"data-v-24187cea",null).exports;i.a.use(p.a);var Kn,Dn,Rn,Fn,Ln,Pn,In,Un,jn,zn,Bn,Wn,$n,Hn,qn,Xn,Vn=new p.a({mode:"history",routes:[{path:"/",redirect:{name:"WorkSpace"}},{path:"/map",component:A,props:{needAuth:!1,hideLedfDrawer:!1},children:[{path:":fileKey",name:"Map",components:{content:cn,headerTitle:bn,headerIconList:yn,leftDrawer:Sn},props:{content:!0}}]},{path:"/workspace",component:A,props:{needAuth:!0,hideLedfDrawer:!0},children:[{path:"",name:"WorkSpace",components:{headerTitle:bn,content:Mn}}]}]}),Gn={namespaced:!0,state:{leftDrawer:!1},modules:{},actions:K()({},S,function(e,t){var n=t.leftDrawer;e.commit(T,{leftDrawer:n})}),mutations:K()({},T,function(e,t){var n=t.leftDrawer;e.leftDrawer=n}),getters:K()({},k,function(e){return e.leftDrawer})},Qn=function(e,t){var n=t.nodes,i=e.state.fileKey,o=e.rootState.comments.comments,r=R()(o),s=R()(n).reduce(function(e,t){return e["/nodes/"+i+"/"+t]=n[t],n[t]||r.forEach(function(n){o[n].nodeId===t&&(e["/comments/"+i+"/"+n]=null)}),e},{});s["/files/"+i+"/updated"]=g.database.ServerValue.TIMESTAMP;var a=I()({},e.state.nodes,n);return s["/files/"+i+"/nodeCount"]=R()(a).reduce(function(e,t){return a[t]?e+1:e},0),g.database().ref().update(s)},Yn=function(e){return g.database().ref("nodes/"+e.state.fileKey).off()},Zn=function(e,t){var n=t.fileKey,i=g.database().ref("nodes/"+n);return i.on("child_added",function(t){var n=K()({},t.key,Q(t.val()));e.commit(rt,{nodes:n}),e.state.initialLoading&&e.commit(ct,{initialLoading:!1})}),i.on("child_changed",function(t){var n=K()({},t.key,Q(t.val()));e.commit(rt,{nodes:n})}),i.on("child_removed",function(t){var n=K()({},t.key,null);e.commit(rt,{nodes:n})}),L.a.resolve()},Jn=(Kn={},K()(Kn,Ye,function(e){e.state.fileKey&&Yn(e),e.commit(lt)}),K()(Kn,Ze,function(e,t){var n=t.fileKey;e.dispatch(Ye),e.commit(at,{fileKey:n}),e.commit(ct,{initialLoading:!0}),Zn(e,{fileKey:n})}),K()(Kn,Je,function(e,t){var n=t.nodes,i=function(e){var t=e.nodes,n=e.updatedNodes;return R()(n).reduce(function(e,i){var o=t[i],r=n[i];return o&&r&&Z(o,r)||(e[i]=r),e},{})}({nodes:e.state.nodes,updatedNodes:n});0!==R()(i).length&&(e.commit(ut,{nodes:i}),e.commit(rt,{nodes:i}),Qn(e,{nodes:i}))}),K()(Kn,et,function(e){return new L.a(function(t,n){var i=e.state.undoStacks;if(!(i.length>0))return n(new Error("No undo history"));var o=i[i.length-1];if(o){var r=I()({},e.state.nodes,o);for(var s in r)r[s]||delete r[s];if(ae({nodes:r}))return e.commit(vt),n(new Error("Failed to undo. Others may edit and conflicted."));e.commit(dt),e.commit(rt,{nodes:o}),Qn(e,{nodes:o})}return t()})}),K()(Kn,tt,function(e){return new L.a(function(t,n){var i=e.state.redoStacks;if(!(i.length>0))return n(new Error("No redo history"));var o=i[i.length-1];if(o){var r=I()({},e.state.nodes,o);for(var s in r)r[s]||delete r[s];if(ae({nodes:r}))return e.commit(mt),n(new Error("Failed to redo. Others may edit and conflicted."));e.commit(ht),e.commit(rt,{nodes:o}),Qn(e,{nodes:o})}return t()})}),K()(Kn,ot,function(e){if(!ae({nodes:e.state.nodes}))return L.a.resolve();var t=function(e){var t=e.nodes;return R()(t).reduce(function(e,n){if(n!==W&&!te({nodes:t,childKey:n}))return r()({},e,K()({},n,null));var i=t[n].children.filter(function(e){if(t[e])return!0}),o=R()(t[n].dependencies).reduce(function(e,n){return t[n]?r()({},e,{childKey:!0}):e},{});return e[n]=I()({},t[n],{children:i,dependencies:o}),e},{})}({nodes:e.state.nodes});return e.commit(ft),e.commit(st,{}),e.commit(rt,{nodes:t}),Qn(e,{nodes:t})}),K()(Kn,nt,function(e,t){var n=t.selectedNodes;e.commit(st,{selectedNodes:n})}),K()(Kn,it,function(e){e.commit(st,{})}),Kn),ei=(Dn={},K()(Dn,rt,function(e,t){var n=t.nodes;R()(n).forEach(function(t){n[t]?i.a.set(e.nodes,t,n[t]):i.a.delete(e.nodes,t)}),0===R()(e.nodes).length&&(e.nodes=J()),e.selectedNodes=R()(e.selectedNodes).reduce(function(t,n){return e.nodes[n]&&(t[n]=!0),t},{})}),K()(Dn,st,function(e,t){var n=t.selectedNodes,i=void 0===n?{}:n;e.selectedNodes=R()(i).reduce(function(e,t){return i[t]&&(e[t]=!0),e},{})}),K()(Dn,at,function(e,t){var n=t.fileKey;e.fileKey=n}),K()(Dn,lt,function(e){e.fileKey=null,e.nodes=J(),e.selectedNodes={},e.undoStacks=[],e.redoStacks=[]}),K()(Dn,ct,function(e,t){var n=t.initialLoading;e.initialLoading=n}),K()(Dn,ut,function(e,t){var n=t.nodes,i=R()(n).reduce(function(t,n){return t[n]=e.nodes[n]?re(e.nodes[n]):null,t},{});e.undoStacks.push(I()({},i)),e.redoStacks=[]}),K()(Dn,dt,function(e){if(e.undoStacks.length>0){var t=e.undoStacks.pop(),n=R()(t).reduce(function(t,n){return t[n]=e.nodes[n]?re(e.nodes[n]):null,t},{});e.redoStacks.push(n)}}),K()(Dn,ht,function(e){if(e.redoStacks.length>0){var t=e.redoStacks.pop(),n=R()(t).reduce(function(t,n){return t[n]=e.nodes[n]?re(e.nodes[n]):null,t},{});e.undoStacks.push(n)}}),K()(Dn,ft,function(e){e.undoStacks=[],e.redoStacks=[]}),K()(Dn,vt,function(e){e.undoStacks=[]}),K()(Dn,mt,function(e){e.redoStacks=[]}),Dn),ti=(Rn={},K()(Rn,Xe,function(e){return e.nodes}),K()(Rn,Ve,function(e){return e.selectedNodes}),K()(Rn,Ge,function(e){return e.fileKey}),K()(Rn,Qe,function(e){return e.initialLoading}),Rn),ni={namespaced:!0,state:{fileKey:null,nodes:K()({},W,Q()),selectedNodes:{},initialLoading:!0,undoStacks:[],redoStacks:[]},modules:{},actions:Jn,mutations:ei,getters:ti},ii=function(e,t){var n=t.comments,i=e.state.fileKey,o=R()(n).reduce(function(t,o){var s=e.state.comments[o];return t["/comments/"+i+"/"+o]=r()({},n[o],{updated:g.database.ServerValue.TIMESTAMP,created:s?s.created:g.database.ServerValue.TIMESTAMP}),t},{});return o["/files/"+i+"/updated"]=g.database.ServerValue.TIMESTAMP,g.database().ref().update(o)},oi=function(e){return g.database().ref("comments/"+e.state.fileKey).off()},ri=function(e,t){var n=t.fileKey,i=g.database().ref("comments/"+n);return i.on("child_added",function(t){var n=K()({},t.key,Y(t.val()));e.commit(_t,{comments:n})}),i.on("child_changed",function(t){var n=K()({},t.key,Y(t.val()));e.commit(_t,{comments:n})}),i.on("child_removed",function(t){var n=K()({},t.key,null);e.commit(_t,{comments:n})}),L.a.resolve()},si={namespaced:!0,state:{fileKey:null,comments:{}},modules:{},actions:(Fn={},K()(Fn,gt,function(e){e.state.fileKey&&oi(e),e.commit(wt)}),K()(Fn,xt,function(e,t){var n=t.fileKey;e.dispatch(gt),e.commit(Ct,{fileKey:n}),ri(e,{fileKey:n})}),K()(Fn,bt,function(e,t){var n=t.comments;ii(e,{comments:n})}),Fn),mutations:(Ln={},K()(Ln,_t,function(e,t){var n=t.comments;R()(n).forEach(function(t){n[t]?i.a.set(e.comments,t,n[t]):i.a.delete(e.comments,t)})}),K()(Ln,Ct,function(e,t){var n=t.fileKey;e.fileKey=n}),K()(Ln,wt,function(e){e.fileKey=null,e.comments={}}),Ln),getters:(Pn={},K()(Pn,pt,function(e){return e.comments}),K()(Pn,yt,function(e){return e.fileKey}),Pn)},ai={namespaced:!0,state:{user:null,authorityLoading:!0},modules:{},actions:(In={},K()(In,u.LOAD_USER,function(e){return e.commit(h,!0),g.auth().onAuthStateChanged(function(t){return e.commit(h,!0),t?(e.commit(d,t),e.commit(h,!1),g.database().ref("/users/"+t.uid).set(e.getters[a])):g.auth().getRedirectResult().then(function(t){e.commit(d,t.user),e.commit(h,!1)}).catch(function(t){return e.commit(d,null),e.commit(h,!1),console.log(t),L.a.reject(t)})})}),K()(In,u.SIGN_OUT,function(e){return new L.a(function(t,n){g.auth().signOut().then(function(){e.commit(d,null),t()}).catch(function(t){e.commit(d,null),n(t)})})}),K()(In,u.DELETE_USER,function(e){return g.auth().currentUser.delete()}),In),mutations:(Un={},K()(Un,d,function(e,t){t?(e.user={uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL},e.authorityLoading=!1):(e.user=null,e.authorityLoading=!0)}),K()(Un,h,function(e,t){e.authorityLoading=t}),Un),getters:(jn={},K()(jn,a,function(e,t){return e.user}),K()(jn,l,function(e,t){return e.authorityLoading}),K()(jn,c,function(e,t,n,i){return function(t){var n=t.fileKey,o=i["files/"+Ft]({fileKey:n}),r=e.user;if(o){if(o.public&&o.public.write)return!0;if(!r)return!1;var s=o.users?o.users[r.uid]:null;return!!s&&s.write}return!1}}),jn)},li={namespaced:!0,state:{users:{}},modules:{},actions:(zn={},K()(zn,kt,function(e,t){var n=t.uid;return e.rootState.user.user?e.getters[Et][n]?L.a.resolve():g.database().ref("/users/"+n).once("value").then(function(t){var n=t.val();return n&&e.commit(Ot,{users:K()({},n.uid,n)}),L.a.resolve()}):L.a.resolve()}),K()(zn,St,function(e,t){var n=t.email;if(!e.rootState.user.user)return L.a.resolve();var i=e.getters[Et];return R()(i).find(function(e){return i[e].email===n})?L.a.resolve():g.database().ref("/users").orderByChild("email").equalTo(n).once("value").then(function(t){var n=t.val();return n&&e.commit(Ot,{users:n}),L.a.resolve()})}),K()(zn,Tt,function(e,t){var n=t.users;return L.a.all(R()(n).map(function(t){return e.dispatch(kt,{uid:t})}))}),K()(zn,Nt,function(e,t){var n=t.emailList;return L.a.all(n.map(function(t){return e.dispatch(St,{email:t})}))}),zn),mutations:K()({},Ot,function(e,t){var n=t.users;R()(n).forEach(function(t){n[t]?i.a.set(e.users,t,n[t]):i.a.delete(e.users,t)})}),getters:K()({},Et,function(e){return e.users})},ci=function(e,t){var n=t.file,i=g.auth().currentUser.uid,o=g.database().ref().child("file_authorities").push().key;return g.database().ref("/file_authorities/"+o+"/users/"+i).set({write:!0,owner:!0}).then(function(){e.commit(Gt,{fileAuthorities:K()({},o,{users:K()({},i,{write:!0,owner:!0})})});var t,r=I()({},(t=n,I()({},{name:"",nodeCount:0,created:0,updated:0},t)),{created:g.database.ServerValue.TIMESTAMP,updated:g.database.ServerValue.TIMESTAMP}),s={};return s["/files/"+o]=r,s["/work_spaces/"+i+"/files/"+o]=!0,g.database().ref().update(s).then(function(){return L.a.resolve({fileKey:o})})})},ui=function(e,t){var n=t.key;return e.commit(Jt,{permissionDenied:!1}),g.database().ref("/file_authorities/"+n).off(),L.a.resolve()},di={namespaced:!0,state:{files:{},fileAuthorities:{},sharedFiles:{},sharedFileAuthorities:{},permissionDenied:!1},modules:{},actions:(Bn={},K()(Bn,It,function(e,t){var n=t.key;return ui(e,{key:n})}),K()(Bn,Ut,function(e,t){var n=t.key;return ui(e,{key:n}).then(function(){var t=!1,i=void 0;if(g.auth().currentUser){var o=g.auth().currentUser.uid;i=g.database().ref("/work_spaces/"+o+"/files/"+n).once("value").then(function(e){return t=e.exists(),L.a.resolve()})}else i=L.a.resolve();return i.then(function(){g.database().ref("/file_authorities/"+n).on("value",function(i){e.commit(Jt,{permissionDenied:!1});var o=i.val();t?e.commit(Gt,{fileAuthorities:K()({},n,o)}):e.commit(Yt,{sharedFileAuthorities:K()({},n,o)})},function(t){e.commit(Jt,{permissionDenied:!0})}),g.database().ref("/files/"+n).once("value").then(function(i){var o=i.val();t?e.commit(Vt,{files:K()({},n,o)}):e.commit(Qt,{sharedFiles:K()({},n,o)})}).catch(function(t){return e.commit(Jt,{permissionDenied:!0}),L.a.resolve()})})})}),K()(Bn,jt,function(e,t){e.commit(Zt);var n=g.auth().currentUser.uid;g.database().ref("/work_spaces/"+n).once("value").then(function(t){var n=t.val();if(n){var i=n.files||{},o=n.invited_files||{};R()(i).forEach(function(t){g.database().ref("/file_authorities/"+t).once("value").then(function(n){var i=n.val();e.commit(Gt,{fileAuthorities:K()({},t,i)})}),g.database().ref("/files/"+t).once("value").then(function(n){var i=n.val();e.commit(Vt,{files:K()({},t,i)})})}),R()(o).forEach(function(t){g.database().ref("/file_authorities/"+t).once("value").then(function(n){var i=n.val();e.commit(Yt,{sharedFileAuthorities:K()({},t,i)})}),g.database().ref("/files/"+t).once("value").then(function(n){var i=n.val();e.commit(Qt,{sharedFiles:K()({},t,i)})})})}})}),K()(Bn,zt,function(e,t){var n=t.files,i=void 0===n?{}:n,o=R()(i).reduce(function(e,t){return e["/files/"+t]=i[t],e},{});g.database().ref().update(o).then(function(){e.commit(Vt,{files:i})})}),K()(Bn,Bt,function(e,t){var n=t.file;return ci(e,{file:void 0===n?{}:n}).then(function(t){var n=t.fileKey;return g.database().ref("/files/"+n).once("value").then(function(t){e.commit(Vt,{files:K()({},n,t.val())})})})}),K()(Bn,Wt,function(e,t){var n=t.fileKey,i=e.state.files[n]||e.state.sharedFiles[n],o=r()({},i,{name:i.name+" ["+(new Date).toString()+"]"});return o?ci(e,{file:o}).then(function(t){var i=t.fileKey,r=function(){return g.database().ref("/files/"+i).once("value").then(function(t){e.commit(Vt,{files:K()({},i,t.val())})})};return o.nodeCount>0?g.database().ref("nodes/"+n).once("value").then(function(e){return g.database().ref("nodes/"+i).update(e.val())}).then(function(){return g.database().ref("comments/"+n).once("value").then(function(e){return g.database().ref("comments/"+i).update(e.val())})}).then(function(){return r()}):r()}):L.a.reject(new Error("not found the file: "+n))}),K()(Bn,$t,function(e,t){var n=t.files,i=g.auth().currentUser.uid,o=R()(n).reduce(function(e,t){return e["/work_spaces/"+i+"/files/"+t]=null,e},{});g.database().ref().update(o).then(function(){return e.commit(Vt,{files:n}),L.a.resolve()})}),K()(Bn,Ht,function(e,t){var n=t.email,i=t.fileKey,o=t.readOnly,r=g.database().ref().child("file_invitations").push().key;g.database().ref("/file_invitations/"+i+"/"+r).set({email:n,write:!o}).then(function(){})}),K()(Bn,qt,function(e,t){var n=t.publicFile,i=t.readOnly,o=t.fileKey,r=n?{write:!i}:null;return g.database().ref("/file_authorities/"+o+"/public").set(r).then(function(){return g.database().ref("/file_authorities/"+o).once("value")}).then(function(t){var n=e.getters[Lt]({fileKey:o}),i=t.val();n?e.commit(Gt,{fileAuthorities:K()({},o,i)}):e.commit(Yt,{sharedFileAuthorities:K()({},o,i)})})}),K()(Bn,Xt,function(e,t){var n=t.userAuthorities,i=t.fileKey,o=R()(n).reduce(function(e,t){var o=n[t];return o?e["/file_authorities/"+i+"/users/"+t]=o:(e["/file_authorities/"+i+"/users/"+t]=null,e["/work_spaces/"+t+"/invited_files/"+i]=null),e},{});return g.database().ref().update(o)}),Bn),mutations:(Wn={},K()(Wn,Vt,function(e,t){var n=t.files;R()(n).forEach(function(t){n[t]?i.a.set(e.files,t,n[t]):i.a.delete(e.files,t)})}),K()(Wn,Gt,function(e,t){var n=t.fileAuthorities;R()(n).forEach(function(t){n[t]?i.a.set(e.fileAuthorities,t,n[t]):i.a.delete(e.fileAuthorities,t)})}),K()(Wn,Qt,function(e,t){var n=t.sharedFiles;R()(n).forEach(function(t){n[t]?i.a.set(e.sharedFiles,t,n[t]):i.a.delete(e.sharedFiles,t)})}),K()(Wn,Yt,function(e,t){var n=t.sharedFileAuthorities;R()(n).forEach(function(t){n[t]?i.a.set(e.sharedFileAuthorities,t,n[t]):i.a.delete(e.sharedFileAuthorities,t)})}),K()(Wn,Zt,function(e){e.files={},e.fileAuthorities={},e.sharedFiles={},e.sharedFileAuthorities={}}),K()(Wn,Jt,function(e,t){var n=t.permissionDenied;e.permissionDenied=n}),Wn),getters:($n={},K()($n,At,function(e){return e.files}),K()($n,Mt,function(e){return e.fileAuthorities}),K()($n,Kt,function(e){return e.sharedFiles}),K()($n,Dt,function(e){return e.sharedFileAuthorities}),K()($n,Rt,function(e){return function(t){var n=t.fileKey;return e.sharedFiles[n]||e.files[n]||null}}),K()($n,Ft,function(e){return function(t){var n=t.fileKey;return e.sharedFileAuthorities[n]||e.fileAuthorities[n]||null}}),K()($n,Lt,function(e){return function(t){return t.fileKey in e.files}}),K()($n,Pt,function(e){return e.permissionDenied}),$n)},hi={namespaced:!0,state:{nodeColor:"#B3E5FC",textColor:"#000000"},modules:{},actions:(Hn={},K()(Hn,nn,function(e,t){var n=t.nodeColor;e.commit(rn,{nodeColor:n})}),K()(Hn,on,function(e,t){var n=t.textColor;e.commit(sn,{textColor:n})}),Hn),mutations:(qn={},K()(qn,rn,function(e,t){var n=t.nodeColor;e.nodeColor=n}),K()(qn,sn,function(e,t){var n=t.textColor;e.textColor=n}),qn),getters:(Xn={},K()(Xn,en,function(e){return e.nodeColor}),K()(Xn,tn,function(e){return e.textColor}),Xn)};i.a.use(s.a);var fi=new s.a.Store({strict:!1,namespaced:!0,state:{},modules:{files:di,layouts:Gn,nodes:ni,comments:si,settings:hi,user:ai,users:li},mutations:{}}),vi=n("3EgV"),mi=n.n(vi),pi={install:function(e){var t={scrollX:0,scrollY:0,width:0,height:0},n=function(){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight};window.addEventListener("resize",n),n(),e.util.defineReactive(e.prototype,"$window",t)}};i.a.use(pi);var yi=n("Sst2"),gi={install:function(e){e.util.defineReactive(e.prototype,"$isMobile",yi)}};i.a.use(gi);var xi=n("pFYg"),bi=n.n(xi);console.log("app version: 0.0.32");var _i={accessToken:"e04b82a2f3814043855eba2262729877",captureUncaught:"production"===Object({NODE_ENV:"production"}),payload:{environment:"production"}};"production"===Object({NODE_ENV:"production"})&&function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i=n(1),o=n(4);(_i=_i||{}).rollbarJsUrl=_i.rollbarJsUrl||"https://cdnjs.cloudflare.com/ajax/libs/rollbar.js/2.3.1/rollbar.min.js",_i.async=void 0===_i.async||_i.async;var r=i.setupShim(window,_i),s=o(_i);window.rollbar=i.Rollbar,r.loadFull(window,document,!_i.async,_i,s)},function(e,t,n){function i(e){return function(){try{return e.apply(this,arguments)}catch(e){try{console.error("[Rollbar]: Internal error",e)}catch(e){}}}}function o(e,t){this.options=e,this._rollbarOldOnError=null;var n=a++;this.shimId=function(){return n},window&&window._rollbarShims&&(window._rollbarShims[n]={handler:t,messages:[]})}function r(e){return i(function(){var t=Array.prototype.slice.call(arguments,0),n={shim:this,method:e,args:t,ts:new Date};window._rollbarShims[this.shimId()].messages.push(n)})}var s=n(2),a=0,l=n(3).bind(null,function(e,t){return new o(e,t)});o.prototype.loadFull=function(e,t,n,o,r){var s=!1,a=t.createElement("script"),l=t.getElementsByTagName("script")[0],c=l.parentNode;a.crossOrigin="",a.src=o.rollbarJsUrl,n||(a.async=!0),a.onload=a.onreadystatechange=i(function(){if(!(s||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){a.onload=a.onreadystatechange=null;try{c.removeChild(a)}catch(e){}s=!0,function(){var t;if(void 0===e._rollbarDidLoad){t=new Error("rollbar.js did not load");for(var n,i,o,s,a=0;n=e._rollbarShims[a++];)for(n=n.messages||[];i=n.shift();)for(o=i.args||[],a=0;a<o.length;++a)if(s=o[a],"function"==typeof s){s(t);break}}"function"==typeof r&&r(t)}()}}),c.insertBefore(a,l)},o.prototype.wrap=function(e,t,n){try{var i;if(i="function"==typeof t?t:function(){return t||{}},"function"!=typeof e)return e;if(e._isWrap)return e;if(!e._rollbar_wrapped&&(e._rollbar_wrapped=function(){n&&"function"==typeof n&&n.apply(this,arguments);try{return e.apply(this,arguments)}catch(n){var t=n;throw"string"==typeof t&&(t=new String(t)),t._rollbarContext=i()||{},t._rollbarContext._wrappedSource=e.toString(),window._rollbarWrappedError=t,t}},e._rollbar_wrapped._isWrap=!0,e.hasOwnProperty))for(var o in e)e.hasOwnProperty(o)&&(e._rollbar_wrapped[o]=e[o]);return e._rollbar_wrapped}catch(t){return e}};for(var c="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,captureDomContentLoaded,captureLoad".split(","),u=0;u<c.length;++u)o.prototype[c[u]]=r(c[u]);e.exports={setupShim:function(e,t){var n=t.globalAlias||"Rollbar";if("object"==bi()(e[n]))return e[n];e._rollbarShims={},e._rollbarWrappedError=null;var o=new l(t);return i(function(){t.captureUncaught&&(o._rollbarOldOnError=e.onerror,s.captureUncaughtExceptions(e,o,!0),s.wrapGlobals(e,o,!0)),t.captureUnhandledRejections&&s.captureUnhandledRejections(e,o,!0);var i=t.autoInstrument;return(void 0===i||!0===i||"object"==(void 0===i?"undefined":bi()(i))&&i.network)&&e.addEventListener&&(e.addEventListener("load",o.captureLoad.bind(o)),e.addEventListener("DOMContentLoaded",o.captureDomContentLoaded.bind(o))),e[n]=o,o})()},Rollbar:l}},function(e,t){function n(e,t,n){if(t.hasOwnProperty&&t.hasOwnProperty("addEventListener")){for(var i=t.addEventListener;i._rollbarOldAdd&&i.belongsToShim;)i=i._rollbarOldAdd;var o=function(t,n,o){i.call(this,t,e.wrap(n),o)};o._rollbarOldAdd=i,o.belongsToShim=n,t.addEventListener=o;for(var r=t.removeEventListener;r._rollbarOldRemove&&r.belongsToShim;)r=r._rollbarOldRemove;var s=function(e,t,n){r.call(this,e,t&&t._rollbar_wrapped||t,n)};s._rollbarOldRemove=r,s.belongsToShim=n,t.removeEventListener=s}}e.exports={captureUncaughtExceptions:function(e,t,n){if(e){var i;"function"==typeof t._rollbarOldOnError?i=t._rollbarOldOnError:e.onerror&&!e.onerror.belongsToShim&&(i=e.onerror,t._rollbarOldOnError=i);var o=function(){var n=Array.prototype.slice.call(arguments,0);!function(e,t,n,i){e._rollbarWrappedError&&(i[4]||(i[4]=e._rollbarWrappedError),i[5]||(i[5]=e._rollbarWrappedError._rollbarContext),e._rollbarWrappedError=null),t.handleUncaughtException.apply(t,i),n&&n.apply(e,i)}(e,t,i,n)};o.belongsToShim=n,e.onerror=o}},captureUnhandledRejections:function(e,t,n){if(e){"function"==typeof e._rollbarURH&&e._rollbarURH.belongsToShim&&e.removeEventListener("unhandledrejection",e._rollbarURH);var i=function(e){var n=e.reason,i=e.promise,o=e.detail;!n&&o&&(n=o.reason,i=o.promise),t&&t.handleUnhandledRejection&&t.handleUnhandledRejection(n,i)};i.belongsToShim=n,e._rollbarURH=i,e.addEventListener("unhandledrejection",i)}},wrapGlobals:function(e,t,i){if(e){var o,r,s="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(o=0;o<s.length;++o)e[r=s[o]]&&e[r].prototype&&n(t,e[r].prototype,i)}}}},function(e,t){function n(e,t){this.impl=e(t,this),this.options=t,function(e){for(var t=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);if(this.impl[e])return this.impl[e].apply(this.impl,t)}},n="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,_createItem,wrap,loadFull,shimId,captureDomContentLoaded,captureLoad".split(","),i=0;i<n.length;i++)e[n[i]]=t(n[i])}(n.prototype)}n.prototype._swapAndProcessMessages=function(e,t){this.impl=e(this.options);for(var n,i,o;n=t.shift();)i=n.method,o=n.args,this[i]&&"function"==typeof this[i]&&("captureDomContentLoaded"===i||"captureLoad"===i?this[i].apply(this,[o[0],n.ts]):this[i].apply(this,o));return this},e.exports=n},function(e,t){e.exports=function(e){return function(t){if(!t&&!window._rollbarInitialized){for(var n,i,o=(e=e||{}).globalAlias||"Rollbar",r=window.rollbar,s=function(e){return new r(e)},a=0;n=window._rollbarShims[a++];)i||(i=n.handler),n.handler._swapAndProcessMessages(s,n.messages);window[o]=i,window._rollbarInitialized=!0}}}}]),i.a.config.errorHandler=function(e,t,n){t.$options.propsData&&console.log("Props passed to component",t.$options.propsData);var i="Error in component: <"+t.$options.name+" />\n";throw n&&(i+="Error occurred during lifecycle hook: "+n+"\n"),console.log(i),"production"===Object({NODE_ENV:"production"})&&window.Rollbar.error(i,e),e};n("o8dz"),n("7zck"),n("5myX"),n("H/op");i.a.use(mi.a),i.a.config.productionTip=!1,new i.a({el:"#app",router:Vn,store:fi,template:"<App/>",components:{App:m}})},RPEF:function(e,t){},TaBb:function(e,t){},XzQZ:function(e,t){},bwUd:function(e,t){},cyUf:function(e,t){},dEVr:function(e,t){},fja8:function(e,t){},fxIO:function(e,t){},iVZg:function(e,t){},j8xj:function(e,t){},jRZq:function(e,t){},lUGE:function(e,t){},nqpz:function(e,t){},o8dz:function(e,t){},qOlY:function(e,t){},qq8b:function(e,t){},r14v:function(e,t){},tOGR:function(e,t){},v7EL:function(e,t){},"y/zs":function(e,t){e.exports="data:image/png;base64,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"},zCCC:function(e,t){},zG2H:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.3d305b81a8640a70831a.js.map