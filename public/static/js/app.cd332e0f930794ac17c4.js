webpackJsonp([1],{"/KFP":function(e,t){},"0H93":function(e,t){},"5myX":function(e,t){},"6Fuj":function(e,t){},"7zck":function(e,t){},ABVx:function(e,t){},"C+3M":function(e,t){},DKZx:function(e,t){},GC0o:function(e,t){},"H/op":function(e,t){},LEm9:function(e,t){},NHnr:function(e,t,i){"use strict";function n(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function r(e,t){return Math.pow(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),.5)}function o(e){var t=e.rectangles,i=e.point,n=$()(t);if(0===n.length)return null;var o=null,s=Number.POSITIVE_INFINITY;return n.forEach(function(e){var n=function(e){var t=e.rectangle,i=e.point;switch(function(e){var t=e.rectangle,i=e.point;return i.x<t.x?i.y<t.y?1:i.y>t.y+t.height?7:4:i.x>t.x+t.width?i.y<t.y?3:i.y>t.y+t.height?9:6:i.y<t.y?2:i.y>t.y+t.height?8:5}({rectangle:t,point:i})){case 1:return r(i,{x:t.x,y:t.y});case 2:return t.y-i.y;case 3:return r(i,{x:t.x+t.width,y:t.y});case 4:return t.x-i.x;case 5:return 0;case 6:return i.x-(t.x+t.width);case 7:return r(i,{x:t.x,y:t.y+t.height});case 8:return i.y-(t.y+t.height);case 9:return r(i,{x:t.x+t.width,y:t.y+t.height})}}({rectangle:t[e],point:i});n<s&&(o=e,s=n)}),o}function s(e){var t=e.nodes,i=e.sizes,n=e.familySizes,r=e.parentKey,o=e.positions,a=t[r],l=o[r];if(a.children.length>0){var c=n[r],u=l.x+i[r].width+G+c.height*Z,d=void 0;d=(c.othersHeight,i[r].height,l.y-c.othersHeight/2+i[r].height/2),a.children.forEach(function(e){var r=i[e],a=n[e];o[e]={x:u,y:d+a.height/2-r.height/2},d+=a.height,d+=Y,s({nodes:t,sizes:i,familySizes:n,parentKey:e,positions:o})})}}function a(e){var t=e.nodes,i=e.sizes,n=e.familySizes,r=e.parentKey,o=t[r];if(o.children.length>0){o.children.forEach(function(e){a({nodes:t,sizes:i,familySizes:n,parentKey:e})});var s=o.children.reduce(function(e,t){var r=n[t].width,o=Math.max(n[t].height,i[t].height);return{width:Math.max(e.width,r),height:e.height+o}},{width:0,height:0});s.height+=Y*(o.children.length-1),n[r]={width:i[r].width+s.width+G,height:Math.max(i[r].height,s.height),othersHeight:s.height}}else n[r]=Q()({},i[r],{othersHeight:0})}function l(e){var t=e.nodes,i=e.childKey;return $()(t).find(function(e){return-1!==t[e].children.indexOf(i)})||null}function c(e){var t=e.nodes,i=e.parentKey,n=[];return t[i].children.forEach(function(e){n.push(e);var i=c({nodes:t,parentKey:e});n=n.concat(i)}),n}function u(e){var t,i=e.nodes,n=e.parentKey,r=e.newKey,o=void 0===r?"key_"+Math.random():r,s=oe(),a=o,l=i[n],c=l.children.concat();c.push(a);return t={},X()(t,a,s),X()(t,n,Q()({},l,{children:c})),t}function d(e){var t=e.nodes,i=e.deleteKey,n=c({nodes:t,parentKey:i}),r=X()({},i,null);n.forEach(function(e){r[e]=null});var o=l({nodes:t,childKey:i});if(o){var s=t[o],a=Q()({},s);a.children=a.children.filter(function(e){return e!==i}),r[o]=a}return $()(t).forEach(function(e){var o=t[e],s=g()({},o.dependencies);o.dependencies[i]&&delete s[i];var a=!0,l=!1,c=void 0;try{for(var u,d=re()(n);!(a=(u=d.next()).done);a=!0){var h=u.value;s[h]&&delete s[h]}}catch(e){l=!0,c=e}finally{try{!a&&d.return&&d.return()}finally{if(l)throw c}}var f=g()({},o,{dependencies:s});se(o,f)||(r[e]=f)}),r}function h(e){return Q()({},e,{children:e.children.concat()})}function f(e){var t=e.nodes,i=e.targetKey,n=e.newParentKey,r=e.order,o=void 0===r?0:r,s=l({nodes:t,childKey:i}),a=h(t[s]),c=a.children.indexOf(i);if(a.children.splice(c,1),s===n)return o<=c?a.children.splice(o,0,i):a.children.splice(o-1,0,i),Q()({},t,X()({},s,a));var u,d=h(t[n]);return d.children.splice(o,0,i),Q()({},t,(u={},X()(u,s,a),X()(u,n,d),u))}function v(e){var t=e.nodes,i=!1;return $()(t).some(function(e){if(e!==ee&&!l({nodes:t,childKey:e}))return i=!0;return t[e].children.some(function(e){if(!t[e])return i=!0,!0}),i}),i}Object.defineProperty(t,"__esModule",{value:!0});var p=i("7+uW"),y=i("Dd8w"),g=i.n(y),m=i("NYxO"),x="USER",_="AUTHORITY_LOADING",b="CAN_WRITE",w={LOAD_USER:"LOAD_USER",SIGN_OUT:"SIGN_OUT",SET_AUTHORITY_LOADING:"SET_AUTHORITY_LOADING",DELETE_USER:"DELETE_USER"},C="SET_USER",S="SET_AUTHORITY_LOADING",E={name:"app",computed:{},mounted:function(){this.loadUser()},methods:g()({},Object(m.b)("user",{loadUser:w.LOAD_USER}))},k={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},T=i("VU/8")(E,k,!1,null,null,null).exports,N=i("/ocq"),A=i("Sazm");A.initializeApp({apiKey:"AIzaSyB_t7IC5k4U8bedjSXvpbtsdF6KH5RfpOk",authDomain:"mind-xx-acpr.firebaseapp.com",databaseURL:"https://mind-xx-acpr.firebaseio.com",projectId:"mind-xx-acpr",storageBucket:"mind-xx-acpr.appspot.com",messagingSenderId:"940754615168"});var O=A,M={props:{value:{type:Boolean,required:!0},reauth:{type:Boolean,default:!1},persistent:{type:Boolean,default:!0}},methods:{authGoogle:function(){var e=new O.auth.GoogleAuthProvider;O.auth().signInWithRedirect(e)}}},K={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{"max-width":"280",value:e.value,persistent:e.persistent},on:{input:function(t){return e.$emit("input",t)}}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Please sign in")]),e._v(" "),n("v-card-text",{staticClass:"text-xs-left"},[n("div",[e._v(e._s(e.reauth?"and retry to continue":""))]),e._v(" "),n("br"),e._v(" "),n("v-btn",{attrs:{color:"white"},on:{click:e.authGoogle}},[n("img",{staticClass:"image",attrs:{src:i("y/zs")}})])],1)],1)],1)],1)},staticRenderFns:[]},D=i("VU/8")(M,K,!1,function(e){i("ABVx")},"data-v-ef986022",null).exports,R={props:{value:{type:Boolean,required:!0},title:{type:String,default:"Confirm"},message:{type:String,required:!0},ok:{type:String,default:"OK"},cancel:{type:String,default:"CANCEL"}},methods:{}},F={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{row:"","justify-center":""}},[i("v-dialog",{attrs:{"max-width":"300",value:e.value,persistent:!1},on:{input:function(t){return e.$emit("input",t)}}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]),e._v(" "),i("v-card-text",{staticClass:"text-xs-left"},[e._v("\n        "+e._s(e.message)+"\n      ")]),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"black darken-1",flat:"flat"},on:{click:function(t){e.$emit("cancel")}}},[e._v("\n          "+e._s(e.cancel)+"\n        ")]),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",flat:"flat"},on:{click:function(t){e.$emit("ok")}}},[e._v("\n          "+e._s(e.ok)+"\n        ")])],1)],1)],1)],1)},staticRenderFns:[]},L="LEFT_DRAWER",U="SET_LEFT_DRAWER",P="SET_LEFT_DRAWER",I={components:{AuthDialog:D,ConfirmDialog:i("VU/8")(R,F,!1,function(e){i("vpxZ")},"data-v-e1aead5a",null).exports},data:function(){return{reauth:!1,deleteConfirm:!1,needAuthLocal:!1}},props:{needAuth:{type:Boolean,default:!1},hideLedfDrawer:{type:Boolean,default:!1}},computed:g()({},Object(m.c)("layouts",{leftDrawer:L}),Object(m.c)("user",{user:x,authorityLoading:_}),{authenticated:function(){return!!this.user},_needAuth:function(){return this.needAuth||this.needAuthLocal}}),methods:g()({},Object(m.b)("layouts",{setLeftDrawer:U}),Object(m.b)("user",{_signOut:w.SIGN_OUT,_deleteUser:w.DELETE_USER,reauthenticate:w.REAUTHENTICATE}),{signOut:function(){this._signOut().then().catch().then(function(){location.reload()})},deleteUser:function(){var e=this;this.deleteConfirm=!1,this._deleteUser().then(function(){window.location.reload()}).catch(function(t){e.reauth=!0})}})},W={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.authorityLoading||e.needAuth&&!e.authenticated?e._e():i("div",[e.hideLedfDrawer?e._e():i("v-navigation-drawer",{attrs:{fixed:"",clipped:"",app:"",value:e.leftDrawer},on:{input:function(t){return e.setLeftDrawer({leftDrawer:t})}}},[i("router-view",{attrs:{name:"leftDrawer"}})],1),e._v(" "),i("v-toolbar",{attrs:{color:"blue darken-3",dark:"",app:"","clipped-left":"",fixed:"",dense:""}},[i("v-toolbar-title",{staticClass:"ml-0 pl-3"},[e.hideLedfDrawer?e._e():i("v-toolbar-side-icon",{staticClass:"left-drawer-activator",on:{click:function(t){t.stopPropagation(),e.setLeftDrawer({leftDrawer:!e.leftDrawer})}}}),e._v(" "),i("router-view",{attrs:{name:"headerTitle"}})],1),e._v(" "),i("div",{staticClass:"d-flex align-center icon-box",staticStyle:{"margin-left":"auto"}},[i("router-view",{attrs:{name:"headerIconList"}}),e._v(" "),e.user?i("v-menu",{attrs:{bottom:"",left:"","offset-y":"","nudge-bottom":6}},[i("v-btn",{attrs:{slot:"activator",icon:"",dark:""},slot:"activator"},[i("v-avatar",{attrs:{size:"32px"}},[i("img",{attrs:{src:e.user.photoURL}})])],1),e._v(" "),i("v-list",[i("v-list-tile",[i("v-list-tile-title",[e._v(e._s(e.user.displayName))])],1),e._v(" "),i("v-divider"),e._v(" "),i("v-list-tile",{on:{click:e.signOut}},[i("v-list-tile-title",[e._v("Sign out")])],1),e._v(" "),i("v-divider"),e._v(" "),i("v-list-tile",{on:{click:function(t){e.deleteConfirm=!0}}},[i("v-list-tile-title",[e._v("Delete account")])],1)],1)],1):i("v-btn",{attrs:{flat:""},on:{click:function(t){e.needAuthLocal=!0}}},[e._v("SIGN IN")])],1)],1),e._v(" "),i("v-content",{ref:"content"},[i("v-container",{attrs:{fluid:"","fill-height":""}},[i("v-layout",{staticClass:"main-layout"},[i("router-view",{attrs:{name:"content"}})],1)],1)],1),e._v(" "),i("AuthDialog",{attrs:{reauth:!0,persistent:!1},model:{value:e.reauth,callback:function(t){e.reauth=t},expression:"reauth"}}),e._v(" "),i("ConfirmDialog",{attrs:{message:"All your files will be deleted and cannot revert. Are you sure you want to delete?"},on:{ok:e.deleteUser,cancel:function(t){e.deleteConfirm=!1}},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}})],1),e._v(" "),e.authorityLoading||!e._needAuth||e.authenticated?e._e():i("AuthDialog",{attrs:{value:!0,persistent:e.needAuth},on:{input:function(t){return e.needAuthLocal=t}}}),e._v(" "),e.authorityLoading?i("v-progress-linear",{staticClass:"top-progress",attrs:{indeterminate:!0}}):e._e()],1)},staticRenderFns:[]},j=i("VU/8")(I,W,!1,function(e){i("C+3M")},"data-v-3eb8a500",null).exports,z=i("fZjL"),$=i.n(z),H=i("//Fk"),B=i.n(H),V=i("bOdI"),X=i.n(V),q=i("woOf"),Q=i.n(q),G=20,Y=20,Z=.1,J=5,ee="root",te="NORMAL",ie="DEPENDENCY",ne=i("BO1k"),re=i.n(ne),oe=function(e){return Q()({},{text:"",children:[],backgroundColor:"#B3E5FC",color:"#000000",dependencies:{}},e)},se=function(e,t){if(e.text!==t.text)return!1;if(e.backgroundColor!==t.backgroundColor)return!1;if(e.color!==t.color)return!1;if(e.children.join("/")!==t.children.join("/"))return!1;var i=$()(e.dependencies),n=$()(t.dependencies);if(i.length!==n.length)return!1;var r=!0,o=!1,s=void 0;try{for(var a,l=re()(i);!(r=(a=l.next()).done);r=!0){var c=a.value;if(e.dependencies[c]!==t.dependencies[c])return!1}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}return!0},ae=function(){return X()({},ee,oe())},le=function(e){var t=void 0,i=void 0,n=e.currentTarget.getBoundingClientRect(),r=n.left+window.pageXOffset,o=n.top+window.pageYOffset;if(ce(e)){var s=e.touches[0];t=s.pageX-r,i=s.pageY-o}else t=e.pageX-r,i=e.pageY-o;return{x:t,y:i}},ce=function(e){return e.touches},ue={props:{x:{type:Number,default:0},y:{type:Number,default:0},rx:{type:Number,default:0},ry:{type:Number,default:0},width:{type:Number,default:50},height:{type:Number,default:50},strokeWidth:{type:Number,default:1},stroke:{type:String,default:"black"},fill:{type:String,default:"none"},strokeDasharray:{type:Number,default:0},strokeDashoffset:{type:Number,default:0}}},de={render:function(){var e=this.$createElement;return(this._self._c||e)("rect",{attrs:{x:this.x,y:this.y,rx:this.rx,ry:this.ry,width:this.width,height:this.height,stroke:this.stroke,"stroke-width":this.strokeWidth,fill:this.fill,"stroke-dasharray":this.strokeDasharray,"stroke-dashoffset":this.strokeDashoffset}})},staticRenderFns:[]},he=i("VU/8")(ue,de,!1,null,null,null).exports,fe={components:{SvgRectangle:he},data:function(){return{beforeMoveP:null,downStart:0,clickLast:0,rectangleSelecting:!1,downP:null,movingTimer:0,progressiveMove:{x:0,y:0},pinchDistance:null,lastSetupProgressiveMove:0,movinguInvalidateTimer:-1}},props:{x:{type:Number,default:0},y:{type:Number,default:0},width:{type:Number,default:400,validator:function(e){return e>0}},height:{type:Number,default:400,validator:function(e){return e>0}},scale:{type:Number,default:1,validator:function(e){return e>0}}},computed:{canvasWidth:function(){return this.width/this.scale},canvasHeight:function(){return this.height/this.scale},selectRectangle:function(){if(!this.rectangleSelecting||!this.downP||!this.beforeMoveP)return null;var e=this.dom2svg(this.downP),t=this.dom2svg(this.beforeMoveP);return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}}},methods:{dom2svg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return{x:e.x/t+this.x,y:e.y/t+this.y}},dom2svgScale:function(e){return{x:e.x/this.scale,y:e.y/this.scale}},svg2dom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return{x:(e.x-this.x)*t,y:(e.y-this.y)*t}},pinch:function(e){var t=function(e){for(var t=[],i=e.currentTarget.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset,o=0;o<e.touches.length;o++){var s=e.touches[o];t.push({x:s.pageX-n,y:s.pageY-r})}return t}(e),i=t[0],n=t[1],o=r(i,n),s=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}(i,n);if(this.pinchDistance&&Math.abs(this.pinchDistance-o)>1){var a=this.scale*(this.pinchDistance<o?1.1:1/1.1);this.$emit("zoom",{scale:a,x:s.x,y:s.y})}this.pinchDistance=o},canvasCursorMove:function(e){var t=this;-1===this.movinguInvalidateTimer&&(this._canvasCursorMove(e),this.movinguInvalidateTimer=setTimeout(function(){t.movinguInvalidateTimer=-1},10))},_canvasCursorMove:function(e){if(this.beforeMoveP)if(function(e){return ce(e)&&e.touches.length>1}(e))this.pinch(e);else if(!this.pinchDistance){var t=le(e),i={x:this.beforeMoveP.x-t.x,y:this.beforeMoveP.y-t.y},n=this.dom2svgScale(i);if(!this.rectangleSelecting){this.$emit("move",{x:this.x+n.x,y:this.y+n.y});var r=Math.sqrt(i.x*i.x+i.y*i.y),o=r/this.scale;if(r>5){this.lastSetupProgressiveMove=Date.now();var s=Math.min(o,40);this.progressiveMove={x:n.x/o*s,y:n.y/o*s}}else this.progressiveMove={x:0,y:0}}this.beforeMoveP=Q()({},t)}},canvasWheel:function(e){this.stopProgressiveMove();var t=e.wheelDeltaX,i=e.wheelDeltaY;this.$emit("move",{x:this.x-t/3/this.scale,y:this.y-i/3/this.scale})},stopProgressiveMove:function(){this.movingTimer>0&&(clearTimeout(this.movingTimer),this.movingTimer=0),this.progressiveMove={x:0,y:0}},canvasCursorDown:function(e){this.stopProgressiveMove(),this.pinchDistance=null},canvasCursorDownSelf:function(e){this.downStart=Date.now();var t=le(e);this.beforeMoveP=Q()({},t),this.rectangleSelecting=e.shiftKey,this.downP=t},canvasCursorUpSelf:function(e){var t=this,i=Date.now();i-this.lastSetupProgressiveMove<200?this.movingTimer=setTimeout(function(){t.movingLoop()},20):i-this.downStart<300&&(i-this.clickLast<300?this.$emit("doubleClick",e):this.$emit("click",e),this.clickLast=i)},canvasCursorUp:function(e){this.selectRectangle&&this.$emit("selectRectangle",this.selectRectangle),this.beforeMoveP=null,this.rectangleSelecting=!1},movingLoop:function(){var e=this;if(this.movingTimer>0){var t=this.progressiveMove;this.$emit("move",{x:this.x+t.x,y:this.y+t.y}),t.x*=.95,t.y*=.95,Math.abs(t.x)+Math.abs(t.y)>2?this.movingTimer=setTimeout(function(){e.movingLoop()},20):(this.movingTimer=0,this.progressiveMove={x:0,y:0})}},getPostionAfterChangeScale:function(e,t){var i=t||{x:this.width/2,y:this.height/2},n=this.dom2svg(i),r=this.dom2svg(i,e);return{x:this.x+(n.x-r.x),y:this.y+(n.y-r.y)}}}},ve={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"svg-canvas-wrapper",style:{width:e.width+"px",height:e.height+"px"}},[i("svg",{attrs:{"font-family":"sans-serif",viewBox:e.x+" "+e.y+" "+e.canvasWidth+" "+e.canvasHeight},on:{mousemove:function(t){t.preventDefault(),function(t){e.$isMobile.any||e.canvasCursorMove(t)}(t)},mousedown:[function(t){return e.$isMobile.any?"":e.canvasCursorDown(t)},function(t){if(t.target!==t.currentTarget)return null;!function(t){e.$isMobile.any||e.canvasCursorDownSelf(t)}(t)}],mouseup:[function(t){if(t.target!==t.currentTarget)return null;!function(t){e.$isMobile.any||e.canvasCursorUpSelf(t)}(t)},function(t){return e.$isMobile.any?"":e.canvasCursorUp(t)}],mousewheel:function(t){t.preventDefault(),function(t){e.$isMobile.any||e.canvasWheel(t)}(t)},touchmove:function(t){t.preventDefault(),function(t){e.$isMobile.any&&e.canvasCursorMove(t)}(t)},touchstart:[function(t){return e.$isMobile.any?e.canvasCursorDown(t):""},function(t){if(t.target!==t.currentTarget)return null;!function(t){e.$isMobile.any&&e.canvasCursorDownSelf(t)}(t)}],touchend:[function(t){if(t.target!==t.currentTarget)return null;!function(t){e.$isMobile.any&&e.canvasCursorUpSelf(t)}(t)},function(t){return e.$isMobile.any?e.canvasCursorUp(t):""}]}},[e._t("default"),e._v(" "),e.rectangleSelecting?i("SvgRectangle",{attrs:{x:e.selectRectangle.x,y:e.selectRectangle.y,rx:3,ry:3,width:e.selectRectangle.width,height:e.selectRectangle.height,fill:"none",stroke:"blue",strokeDasharray:5,strokeDashoffset:5}}):e._e()],2)])},staticRenderFns:[]},pe=i("VU/8")(fe,ve,!1,function(e){i("0H93")},"data-v-5d0b4e22",null).exports,ye={props:{text:{type:String,required:!0},x:{type:Number,default:0},y:{type:Number,default:0},fontSize:{type:Number,default:10},fill:{type:String,default:"black"},fontWeight:{type:Number,default:500}},computed:{isLink:function(){return 0===this.text.indexOf("https://")||0===this.text.indexOf("http://")}},methods:{getBBox:function(){return this.$refs.text.getBBox()},moveLink:function(){window.open(this.text)}}},ge={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("text",{ref:"text",attrs:{x:e.x,y:e.y,"font-size":e.fontSize,"font-weight":e.fontWeight,fill:e.fill},on:{click:function(t){e.isLink&&e.moveLink}}},[e._v("\n  "+e._s(e.isLink?"":e.text)+"\n  "),e.isLink?i("a",{style:{cursor:"pointer","text-shadow":"1px 1px 0 blue"},attrs:{"xlink:href":e.text,target:"_blank"}},[e._v("\n    "+e._s(e.text)+"\n  ")]):e._e()])},staticRenderFns:[]},me={components:{SvgText:i("VU/8")(ye,ge,!1,null,null,null).exports,SvgRectangle:he},data:function(){return{textWidth:50}},props:{text:{type:String,required:!0},x:{type:Number,default:0},y:{type:Number,default:0},fontSize:{type:Number,default:10},strokeWidth:{type:Number,default:1},stroke:{type:String,default:"black"},fill:{type:String,default:"none"},textFill:{type:String,default:"black"}},computed:{lines:function(){return this.text?this.text.split(/\n|\r\n/):[]},width:function(){return this.textWidth},height:function(){return this.textHeight*Math.max(1,this.lines.length)+8},textHeight:function(){return this.fontSize+5},textX:function(){return this.x+this.textPaddingX},textY:function(){return this.y},textPaddingX:function(){return 5}},watch:{text:function(){var e=this;this.$nextTick().then(function(){e.adjustTextWidth()})}},mounted:function(){this.adjustTextWidth()},methods:{adjustTextWidth:function(){var e=this.getBBox();this.textWidth=e.width,this.$emit("calcSize",e)},getBBox:function(){var e=this;return{width:this.lines.reduce(function(t,i,n){var r=e.$refs.svgLine[n].getBBox().width;return Math.max(t,r)},50)+2*this.textPaddingX,height:this.height}}}},xe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("SvgRectangle",{attrs:{x:e.x,y:e.y,rx:3,ry:3,width:e.textWidth,height:e.height,"stroke-width":e.strokeWidth,stroke:e.stroke,fill:e.fill}}),e._v(" "),e._l(e.lines,function(t,n){return i("SvgText",{key:n,ref:"svgLine",refInFor:!0,attrs:{x:e.textX,y:e.textY+e.textHeight*(n+1),"font-size":e.fontSize,text:t,fill:e.textFill}})}),e._v(" "),e.text?e._e():i("SvgText",{attrs:{text:"-XXACPR-",x:e.textX,y:e.textY+e.textHeight,"font-size":e.fontSize,fill:e.textFill}})],2)},staticRenderFns:[]},_e=i("VU/8")(me,xe,!1,null,null,null).exports,be={props:{sx:{type:Number,required:!0},sy:{type:Number,required:!0},ex:{type:Number,required:!0},ey:{type:Number,required:!0}},computed:{qx:function(){return 7*this.sx/10+3*this.ex/10},qy:function(){return 1*this.sy/10+9*this.ey/10},cx:function(){return(this.sx+this.ex)/2},cy:function(){return(this.sy+this.ey)/2}},methods:{}},we={render:function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{stroke:"black","stroke-width":"1",fill:"none",d:"M "+this.sx+" "+this.sy+" Q "+this.qx+" "+this.qy+" "+this.ex+" "+this.ey}})},staticRenderFns:[]},Ce=i("VU/8")(be,we,!1,null,null,null).exports,Se={props:{sx:{type:Number,required:!0},sy:{type:Number,required:!0},ex:{type:Number,required:!0},ey:{type:Number,required:!0},selected:{type:Boolean,default:!1}},computed:{qx1:function(){return this.sx+this.gap},qy1:function(){return this.sy},qx2:function(){return this.ex-this.gap},qy2:function(){return this.ey},xGap:function(){return Math.abs(this.sx-this.ex)},yGap:function(){return Math.abs(this.sy-this.ey)},gap:function(){return this.xGap/3+this.yGap/6}},methods:{}},Ee={render:function(){var e=this.$createElement;return(this._self._c||e)("path",{attrs:{stroke:this.selected?"tomato":"green","stroke-width":this.selected?3:1,fill:"none","stroke-dasharray":"2 4",d:"M "+this.sx+" "+this.sy+" C "+this.qx1+" "+this.qy1+" "+this.qx2+" "+this.qy2+" "+this.ex+" "+this.ey}})},staticRenderFns:[]},ke=i("VU/8")(Se,Ee,!1,null,null,null).exports,Te={props:{value:{type:String,required:!0},x:{type:Number,default:0},y:{type:Number,default:0},targetKey:{type:String,required:!0}},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},lines:function(){return this._value.split(/\n|\r\n/)},rows:function(){return 3},_x:function(){return this.$isMobile.any?0:this.x},_y:function(){return this.$isMobile.any?0:this.y},width:function(){return this.$isMobile.any?"100%":"40%"}},methods:{done:function(){this.$emit("done",{value:this.value,targetKey:this.targetKey})}}},Ne={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"float-text-input-wrapper",class:{mobile:e.$isMobile.any},style:{top:e._y+"px",left:e._x+"px",width:e.width}},[i("v-text-field",{staticClass:"text-field",attrs:{"multi-line":"","hide-details":"",autofocus:"",rows:e.rows},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key))return null;e.done(t)},blur:e.done},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}}),e._v(" "),i("v-btn",{staticClass:"submit",attrs:{fab:"",dark:"",small:"",color:"primary"}},[i("v-icon",{attrs:{dark:""}},[e._v("done")])],1)],1)},staticRenderFns:[]},Ae=i("VU/8")(Te,Ne,!1,function(e){i("VDvE")},"data-v-287f9c68",null).exports,Oe={data:function(){return{snackbar:!1,colorMode:!1}},props:{x:{type:Number,default:0},y:{type:Number,default:0},root:{type:Boolean,default:!1},mode:{type:String,default:te},defaultNodeProps:{color:{type:String,default:"#000"},backgroundColor:{type:String,default:"#fff"}},multiSelect:{type:Boolean,default:!1}},computed:{_x:function(){return this.$isMobile.any?0:this.x},_y:function(){return this.$isMobile.any?0:this.y},width:function(){return this.$isMobile.any?"100%":""},modeDependency:function(){return this.mode===ie},colorProps:function(){return[{color:"#000",backgroundColor:"#B3E5FC"},{color:"#000",backgroundColor:"#C8E6C9"},{color:"#000",backgroundColor:"#FFE0B2"},{color:"#000",backgroundColor:"#F8BBD0"},{color:"#000",backgroundColor:"#fff"},{color:"#fff",backgroundColor:"#000"}]},selectedProp:function(){var e=this;return this.colorProps.findIndex(function(t){return t.color===e.defaultNodeProps.color&&t.backgroundColor===e.defaultNodeProps.backgroundColor})}},methods:{clickDelete:function(){this.snackbar?(this.$emit("delete"),this.snackbar=!1):this.snackbar=!0},selectProp:function(e){this.$emit("selectProp",e),this.colorMode=!1}}},Me={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"float-edit-menu-wrapper",class:{mobile:e.$isMobile.any},style:{top:e._y+"px",left:e._x+"px",width:e.width}},[e.colorMode?i("div",{staticClass:"button-box"},e._l(e.colorProps,function(t,n){return i("v-btn",{key:n,staticClass:"list-item color",class:{selected:n===e.selectedProp},style:{color:t.color,background:t.backgroundColor},attrs:{icon:"",small:""},on:{click:function(i){e.selectProp(t)}}},[i("v-icon",[e._v("text_format")])],1)})):i("div",{staticClass:"button-box"},[e.multiSelect?e._e():i("v-btn",{staticClass:"list-item",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("editText")}}},[i("v-icon",[e._v("edit")])],1),e._v(" "),e.root||e.multiSelect?e._e():i("v-btn",{staticClass:"list-item",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("addBrother")}}},[i("v-icon",[e._v("add")])],1),e._v(" "),e.multiSelect?e._e():i("v-btn",{staticClass:"list-item",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("addChild")}}},[i("v-icon",[e._v("subdirectory_arrow_right")])],1),e._v(" "),e.multiSelect?e._e():i("v-btn",{staticClass:"list-item",attrs:{icon:"",small:"",outline:"",color:e.modeDependency?"red lighten-2":"indigo"},on:{click:function(t){e.$emit("editDependency")}}},[i("v-icon",[e._v("call_missed")])],1),e._v(" "),i("v-btn",{staticClass:"list-item",style:{color:e.defaultNodeProps.color,background:e.defaultNodeProps.backgroundColor},attrs:{icon:"",small:""},on:{click:function(t){e.colorMode=!0}}},[i("v-icon",[e._v("text_format")])],1),e._v(" "),i("v-btn",{staticClass:"list-item",attrs:{icon:"",small:"",outline:"",color:"grey"},on:{click:e.clickDelete}},[i("v-icon",[e._v("delete")])],1)],1),e._v(" "),i("v-snackbar",{attrs:{bottom:"",right:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    One more click to delete.\n  ")])],1)},staticRenderFns:[]},Ke=i("VU/8")(Oe,Me,!1,function(e){i("NjuY")},"data-v-03d1f0b2",null).exports,De={props:{step:{type:Number,default:.1},min:{type:Number,default:-10},max:{type:Number,default:10},scaleRate:{type:Number,default:1}}},Re={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scale-tool-wrapper",class:{mobile:e.$isMobile.any}},[i("div",{staticClass:"scale-slider-wrapper"},[i("v-slider",{staticClass:"slider",attrs:{"hide-details":"",step:e.step,min:e.min,max:e.max,value:e.scaleRate},on:{input:function(t){return e.$emit("changeScaleRate",t)}}})],1),e._v(" "),i("v-btn",{staticClass:"pan-button",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("clearZoom")}}},[i("v-icon",[e._v("center_focus_weak")])],1)],1)},staticRenderFns:[]},Fe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"history-tool-wrapper",class:{mobile:e.$isMobile.any}},[i("div",{staticClass:"history-box"},[i("v-btn",{staticClass:"undo-button",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("undo")}}},[i("v-icon",[e._v("undo")])],1),e._v(" "),i("v-btn",{staticClass:"redo-button",attrs:{icon:"",small:"",outline:"",color:"indigo"},on:{click:function(t){e.$emit("redo")}}},[i("v-icon",[e._v("redo")])],1)],1)])},staticRenderFns:[]},Le={name:"MapCanvas",components:{SvgCanvas:pe,SvgRectangle:he,SvgTextRectangle:_e,SvgConnector:Ce,SvgBridgeConnector:ke,FloatTextInput:Ae,FloatEditMenu:Ke,ScaleToolBox:i("VU/8")(De,Re,!1,function(e){i("GC0o")},"data-v-509dd05e",null).exports,HistoryToolBox:i("VU/8")({},Fe,!1,function(e){i("Tobs")},"data-v-7b7c3c34",null).exports},data:function(){return{x:0,y:0,scaleRate:0,nodeCursorDownStart:0,nodeCursorClickLast:0,nodeSizes:{},beforeMoveP:null,movingNodePositions:{},editTextTarget:null,editingText:"",editMenuTarget:null,floatEditMenuWidth:0,floatTextInputWidth:0,mode:te,adjustParentWithMovingTimer:null,insertInformationOfMovingNodes:null}},props:{width:{type:Number,default:400},height:{type:Number,default:400},nodes:{type:Object,required:!0,validator:function(e){return ee in e}},selectedNodes:{type:Object,default:function(){return{}}},fileAuthority:{type:Object,default:function(){return{}}},user:{type:Object,default:function(){return{}}},defaultNodeProps:{type:Object,default:function(){return{}}},canWrite:{type:Boolean,default:!1}},mounted:function(){var e=this;this.$nextTick().then(function(){e.clearZoom()})},computed:{ROOT_NODE:function(){return ee},NODE_MARGIN_Y:function(){return Y},MIN_SCALE_RATE:function(){return Math.min(Math.log(this.scaleCoveringAllNode)/Math.log(1.1)-3,-5)},MAX_SCALE_RATE:function(){return 25},viewRectangle:function(){return{x:this.x,y:this.y,width:this.width/this.scale,height:this.height/this.scale}},nodeCount:function(){return $()(this.nodes).length},movingNodeCount:function(){return $()(this.movingNodePositions).length},scale:{get:function(){return Math.pow(1.1,this.scaleRate)},set:function(e){var t=Math.log(e)/Math.log(1.1);t<this.MIN_SCALE_RATE&&(t=this.MIN_SCALE_RATE),t>this.MAX_SCALE_RATE&&(t=this.MAX_SCALE_RATE),this.scaleRate=t}},showTextInput:function(){return this.editTextTargetNode&&0===this.movingNodeCount&&!this.isMultiSelect},showEditMenu:function(){return this.editMenuTarget&&0===this.movingNodeCount},editTextTargetNode:function(){return this.nodes[this.editTextTarget]},editDependencyTarget:function(){return this.mode===ie?this.editMenuTarget:null},editTextTargetPosition:function(){return this.editTextTarget?this.getFloatMenuPosition(this.editTextTarget,80,this.floatTextInputWidth):{x:0,y:0}},editMenuTargetPosition:function(){return this.editMenuTarget?this.getFloatMenuPosition(this.editMenuTarget,80,this.floatEditMenuWidth):{x:0,y:0}},nodePositions:function(){var e=this,t={width:50,height:20},i={};return $()(this.nodes).forEach(function(n){i[n]=e.nodeSizes[n]||Q()({},t)}),function(e){var t=e.nodes,i=e.sizes,n=e.parentKey,r={};r[n]={x:0,y:0};var o={};return a({nodes:t,sizes:i,familySizes:o,parentKey:n}),s({nodes:t,sizes:i,familySizes:o,parentKey:n,positions:r}),r}({nodes:this.nodes,sizes:i,parentKey:ee})},connectors:function(){return function(e){var t=e.nodes,i=e.positions,n=e.sizes,r={};return $()(t).forEach(function(e){var o=t[e],s=i[e],a=n[e];o.children.forEach(function(t){var o=i[t],l=n[t];if(a&&l){var c=o.x+l.width/2<s.x+a.width/2;r[e+"-"+t]={sx:s.x+a.width-J,sy:s.y+a.height/2,ex:c?o.x+l.width:o.x,ey:o.y+l.height/2}}})}),r}({nodes:this.nodes,positions:this.nodePositions,sizes:this.nodeSizes})},dependencyConnectors:function(){return function(e){var t=e.nodes,i=e.positions,n=e.sizes,r={};return $()(t).forEach(function(e){var o=t[e],s=i[e],a=n[e];$()(o.dependencies).forEach(function(o){if(t[e]){var l=i[o],c=n[o];c&&a&&(r["depend_"+o+"-"+e]={sx:l.x+c.width,sy:l.y+c.height/2,ex:s.x,ey:s.y+a.height/2,from:o,to:e})}})}),r}({nodes:this.nodes,positions:this.nodePositions,sizes:this.nodeSizes})},selectedDependencyConnector:function(){var e=this;return $()(this.dependencyConnectors).reduce(function(t,i){var n=e.dependencyConnectors[i],r=!1;return(e.selectedNodes[n.from]||e.selectedNodes[n.to])&&(r=!0),g()({},t,X()({},i,r))},{})},connectorOfMovingNodes:function(){var e=this.insertInformationOfMovingNodes;if(e){var t=$()(this.movingNodePositions)[0];return function(e){var t=e.nodes,i=e.sizes,n=e.positions,r=e.targetKey,o=e.newParentKey,s=e.newChildOrder,a=t[o];if(a.children[s]!==r){var l=n[o],c=i[o],u={sx:l.x+c.width-J,sy:l.y+c.height/2};if(0===a.children.length)return Q()({},u,{ex:u.sx+J+G,ey:u.sy});var d=s,h=a.children.indexOf(r);if(-1!==h&&h<d&&d++,a.children.length>d){var f=n[a.children[d]];if(d>0){var v=a.children[d-1],p=n[v],y=i[v],g=p.y+y.height;return Q()({},u,{ex:f.x,ey:(f.y+g)/2})}return Q()({},u,{ex:f.x,ey:f.y-Y/2})}var m=a.children[d-1],x=n[m],_=i[m];return Q()({},u,{ex:x.x,ey:x.y+_.height+Y/2})}}({nodes:this.nodes,sizes:this.nodeSizes,positions:this.nodePositions,targetKey:t,newParentKey:e.parentKey,newChildOrder:e.order})}},rectangleCoveringAllNode:function(){var e=function(e){var t=e.positions,i=e.sizes,n=$()(t).filter(function(e){return t[e]&&i[e]});if(0===n.length)return{x:0,y:0,width:0,height:0};var r=n.reduce(function(e,i){return{x:Math.min(e.x,t[i].x),y:Math.min(e.y,t[i].y)}},{x:t[n[0]].x,y:t[n[0]].y}),o=n.reduce(function(e,n){return{width:Math.max(e.width,t[n].x+i[n].width-r.x),height:Math.max(e.height,t[n].y+i[n].height-r.y)}},{width:i[n[0]].width,height:i[n[0]].height});return{x:r.x,y:r.y,width:o.width,height:o.height}}({positions:this.nodePositions,sizes:this.nodeSizes}),t=Math.max(e.width,e.height)<300?200:Math.max(100-Math.pow(this.nodeCount,2),20);return e.x-=t,e.y-=t,e.width+=2*t,e.height+=2*t,e},scaleCoveringAllNode:function(){var e=this.rectangleCoveringAllNode,t=this.width/e.width,i=this.height/e.height;return Math.min(t,i)},isMultiSelect:function(){return $()(this.selectedNodes).length>1}},watch:{selectedNodes:function(e,t){var i=$()(e);-1===i.indexOf(this.editMenuTarget)&&(this.editMenuTarget=null),-1===i.indexOf(this.editTextTarget)&&(this.editTextTarget=null)},showTextInput:function(e){var t=this;e&&this.$nextTick().then(function(){var e=t.$refs.floatTextInput;t.floatTextInputWidth=e.$el.clientWidth})},showEditMenu:function(e){var t=this;e&&this.$nextTick().then(function(){var e=t.$refs.floatEditMenu;t.floatEditMenuWidth=e.$el.clientWidth})}},methods:{getStrokeWidth:function(e){return this.selectedNodes[e]?2:this.editDependencyTarget===e?2:1},getStrokeColor:function(e){return this.editDependencyTarget===e?"tomato":this.selectedNodes[e]?"blue":"black"},setScaleRateBaseCenter:function(e){this.scaleRate=e;var t=this.$refs.svgCanvas.getPostionAfterChangeScale(this.scale);this.x=t.x,this.y=t.y},getFocus:function(){this.$refs.svgCanvasWrapper.focus()},move:function(e){var t=e.x,i=e.y;this.x=t,this.y=i},zoom:function(e){var t=e.scale,i=e.x,n=e.y;this.scale=t;var r=this.$refs.svgCanvas.getPostionAfterChangeScale(this.scale,{x:i,y:n});this.x=r.x,this.y=r.y},clearZoom:function(){var e=this;return this.$refs.svgCanvas&&this.$refs.svgCanvas.stopProgressiveMove(),new B.a(function(t){var i=e.rectangleCoveringAllNode,n=e.width/i.width,r=e.height/i.height;e.scale=Math.min(n,r),e.$nextTick().then(function(){e.x=i.x,e.y=i.y,n<r?e.y-=(e.height/e.scale-i.height)/2:e.x-=(e.width/e.scale-i.width)/2,e.$nextTick().then(function(){t()})})})},nodeCursorDown:function(e,t){if(this.getFocus(),this.nodeCursorDownStart=Date.now(),t!==ee){var i=le(e),n=this.$refs.svgCanvas.svg2dom(this.nodePositions[t]);this.beforeMoveP={x:i.x+n.x,y:i.y+n.y},this.movingNodePositions=X()({},t,Q()({},this.nodePositions[t]))}},nodeCursorUp:function(e,t){var i=t.shift,n=void 0!==i&&i,r=Date.now();r-this.nodeCursorDownStart<300&&(this.editDependencyTarget?this.toggleDependency({from:this.editDependencyTarget,to:e}):r-this.nodeCursorClickLast<300?this.readyEditText(e):this.toggleSelectNode(e,n),this.nodeCursorClickLast=r)},canvasCursorMove:function(e){var t=this;if(this.beforeMoveP){var i=le(e),n=this.$refs.svgCanvas.dom2svgScale({x:this.beforeMoveP.x-i.x,y:this.beforeMoveP.y-i.y});$()(this.movingNodePositions).forEach(function(e){t.movingNodePositions[e].x-=n.x,t.movingNodePositions[e].y-=n.y}),this.beforeMoveP=Q()({},i),this.adjustParentWithMovingTimer||(this.adjustParentWithMovingTimer=setTimeout(function(){t.adjustParentWithMoving(),t.adjustParentWithMovingTimer=null},250))}},canvasCursorUp:function(e){this.adjustParentWithMoving(!0),this.beforeMoveP=null,this.movingNodePositions={}},adjustParentWithMoving:function(e){if(this.movingNodeCount>0){var t=$()(this.movingNodePositions)[0],i=function(e){var t=e.nodes,i=e.sizes,r=e.positions,s=e.targetKey,a=e.movingPositions,u={},d=c({nodes:t,parentKey:s});$()(t).forEach(function(e){l({nodes:t,childKey:e})&&(u[e]={x:r[e].x,y:r[e].y,width:i[e].width,height:i[e].height})});var h={x:a[s].x,y:a[s].y,width:i[s].width,height:i[s].height},v=o({rectangles:u,point:{x:h.x,y:h.y+h.height/2}});if(d.indexOf(v)>-1||v===s)return t;var p=t[v],y=u[v],g=n(h);if((0===p.children.length||1===p.children.length&&-1===p.children.indexOf(g))&&y.x+y.width/2<h.x)return f({nodes:t,targetKey:s,newParentKey:v,order:0});var m=g.y<y.y+y.height/2,x=l({nodes:t,childKey:v}),_=t[x].children.indexOf(v);return f({nodes:t,targetKey:s,newParentKey:x,order:_+(m?0:1)})}({nodes:this.nodes,sizes:this.nodeSizes,positions:this.nodePositions,targetKey:t,movingPositions:this.movingNodePositions}),r=l({nodes:i,childKey:t}),s=i[r];this.insertInformationOfMovingNodes={parentKey:r,order:s.children.indexOf(t)},e&&(this.$emit("updateNodes",i),this.insertInformationOfMovingNodes=null)}},clearSelect:function(){this.$emit("clearSelect"),this.editMenuTarget=null,this.editTextTarget=null,this.editingText="",this.mode=te},clearSelectNode:function(e){this.$emit("setSelectedNodes",Q()({},this.selectedNodes,X()({},e,!1)));var t=$()(this.selectedNodes).filter(function(t){return t!==e});1===t.length?this.editMenuTarget=t[0]:this.editMenuTarget=null,this.editTextTarget=null,this.editingText="",this.mode=te},selectNode:function(e,t){this.canWrite&&(t?this.$emit("setSelectedNodes",Q()({},this.selectedNodes,X()({},e,!0))):this.$emit("setSelectedNodes",X()({},e,!0)),this.editMenuTarget=e,this.moveViewToCoverSelectedNode(e))},toggleSelectNode:function(e,t){this.selectedNodes[e]?this.clearSelectNode(e):this.selectNode(e,t)},moveViewToCoverSelectedNode:function(e){var t=this;if(this.nodes[e]){var i=this.nodePositions[e],n=this.nodeSizes[e];if(n){var r=this.viewRectangle,o=30/this.scale;n.width>r.width||i.x<r.x+o?this.x=i.x-o:i.x+n.width>r.x+r.width-o&&(this.x=i.x+n.width+o-r.width),n.height>r.height||i.y<r.y+o?this.y=i.y-o:i.y+n.height>r.y+r.height-o&&(this.y=i.y+n.height+3*o-r.height)}else this.$nextTick().then(function(){t.moveViewToCoverSelectedNode(e)})}},readyEditText:function(e){this.canWrite&&(this.selectNode(e),this.editTextTarget=e,this.editingText=this.nodes[e]?this.nodes[e].text:"",this.editMenuTarget=null)},doneEditText:function(e){var t=e.value,i=e.targetKey,n=this.nodes[i];if(n){var r=Q()({},n,{text:t});this.$emit("updateNodes",X()({},i,r)),this.editMenuTarget=i,this.editTextTarget=null,this.editingText="",this.$refs.svgCanvasWrapper.focus()}},createNode:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.editMenuTarget===ee&&(t=!1);var i=O.database().ref().push().getKey(),n=t?function(e){var t=e.nodes,i=e.brotherKey,n=e.newKey,r=void 0===n?"key_"+Math.random():n,o=l({nodes:t,childKey:i}),s=u({nodes:t,parentKey:o,newKey:r}),a=s[o];a.children.pop();var c=a.children.indexOf(i);return a.children.splice(c+1,0,r),s}({nodes:this.nodes,brotherKey:this.editMenuTarget,newKey:i}):u({nodes:this.nodes,parentKey:this.editMenuTarget,newKey:i});n[i]=Q()({},n[i],this.defaultNodeProps),this.$emit("updateNodes",n),this.$nextTick().then(function(){e.readyEditText(i)})},deleteNode:function(){if(this.isMultiSelect){var e=function(e){var t=e.nodes,i=e.deleteKeys,n=Q()({},t);return $()(i).reduce(function(e,t){if(t in e)return e;var i=d({nodes:n,deleteKey:t});return n=$()(n).reduce(function(e,t){return null!==i[t]&&(e[t]=i[t]||n[t]),e},{}),Q()({},e,i)},{})}({nodes:this.nodes,deleteKeys:this.selectedNodes});this.$emit("updateNodes",e),this.clearSelect()}else{var t=this.editMenuTarget;if(t){var i=function(e){var t=e.nodes,i=e.childKey,n=l({nodes:t,childKey:i});if(!n)return null;var r=t[n],o=r.children.indexOf(i);return o>0?r.children[o-1]:n}({nodes:this.nodes,childKey:t});i&&this.selectNode(i);var n=d({nodes:this.nodes,deleteKey:t});this.$emit("updateNodes",n)}}},calcSize:function(e){var t=e.key,i=e.size;p.a.set(this.nodeSizes,t,i)},keydownEnter:function(){this.editMenuTarget&&!this.editTextTarget&&this.createNode(!0)},keydownShiftEnter:function(){this.editMenuTarget&&!this.editTextTarget&&this.createNode()},keydownSpace:function(){this.editMenuTarget&&this.readyEditText(this.editMenuTarget)},keydownDelete:function(){this.deleteNode()},moveSelect:function(e){var t=this.editMenuTarget;if(t){var i=function(e){var t=e.nodes,i=e.to,n=null,r=e.targetKey,o=t[r];if(o)if("right"===i)o.children.length>0&&(n=o.children[0]);else{var s=l({nodes:t,childKey:r});if(s){var a=t[s];if("left"===i&&(n=s),"down"===i){var c=(a.children.indexOf(r)+1)%a.children.length;n=a.children[c]}if("up"===i){var u=a.children.indexOf(r)-1;u=u<0?a.children.length-1:u,n=a.children[u]}}}return n}({nodes:this.nodes,to:e,targetKey:t});i&&this.selectNode(i)}},changeOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(e){var t=e.nodes,i=e.childKey,n=e.dif,r=l({nodes:t,childKey:i});if(!r)return null;var o=t[r],s=o.children.indexOf(i),a=s+n;a=a<0?o.children.length-1:a,a%=o.children.length;var c=h(o);return c.children.splice(s,1),c.children.splice(a,0,i),Q()({},t,X()({},r,c))}({nodes:this.nodes,childKey:this.editMenuTarget,dif:e?-1:1});this.$emit("updateNodes",t)},mousewheel:function(e){this.$refs.svgCanvas.canvasWheel(e)},getFloatMenuPosition:function(e,t,i){var n=this.nodePositions[e],r=this.nodeSizes[e],o=(this.viewRectangle.y+this.viewRectangle.height-this.y)*this.scale,s=(n.y-this.y)*this.scale,a=(n.y-this.y+r.height)*this.scale,l=Math.min(a,o-t)+5;l=Math.max(l,s);var c=(this.viewRectangle.x-this.x)*this.scale,u=(n.x-this.x)*this.scale,d=(n.x+r.width-this.x)*this.scale,h=Math.max(u,c+20)+8;return h=Math.min(h,d),h=Math.min(h,this.width-i-6),h=Math.max(h,u-i),{x:h,y:l}},selectRectangle:function(e){var t=this,i=$()(this.nodes).reduce(function(i,n){var r={x:t.nodePositions[n].x,y:t.nodePositions[n].y,width:t.nodeSizes[n].width,height:t.nodeSizes[n].height};return function(e){var t=e.outer,i=e.inner;return!(t.x>i.x||t.y>i.y||t.x+t.width<i.x+i.width||t.y+t.height<i.y+i.height)}({outer:e,inner:r})&&(i[n]=!0,t.editMenuTarget=n),i},{});this.$emit("setSelectedNodes",Q()({},this.selectedNodes,i))},editDependency:function(){this.mode=this.mode===ie?te:ie},toggleDependency:function(e){var t=e.from,i=e.to;if(t!==i){var n=this.nodes[t],r=this.nodes[i];if(n&&r){var o=g()({},n,{dependencies:g()({},n.dependencies)});n.dependencies[i]?delete o.dependencies[i]:o.dependencies[i]=!0,this.$emit("updateNodes",X()({},t,o))}}}}},Ue={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map-canvas-wrapper"},[i("div",{ref:"svgCanvasWrapper",staticClass:"canvas-wrapper",attrs:{tabindex:e.canWrite?"1":""},on:{click:e.getFocus,keydown:[function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key)?t.target!==t.currentTarget?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.keydownEnter(t):null},function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key)?t.target!==t.currentTarget?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:void e.keydownShiftEnter(t):null:null},function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key)?t.target!==t.currentTarget?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.moveSelect("up"):null},function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key)?t.target!==t.currentTarget?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.moveSelect("down"):null},function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key)?t.target!==t.currentTarget?null:"button"in t&&0!==t.button?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.moveSelect("left"):null},function(t){return"button"in t||!e._k(t.keyCode,"right",39,t.key)?t.target!==t.currentTarget?null:"button"in t&&2!==t.button?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.moveSelect("right"):null},function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key)?t.target!==t.currentTarget?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:void e.changeOrder(!0):null:null},function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key)?t.target!==t.currentTarget?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:void e.changeOrder():null:null},function(t){return"button"in t||!e._k(t.keyCode,"space",32,t.key)?t.target!==t.currentTarget?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void e.keydownSpace(t):null},function(t){return"button"in t||!e._k(t.keyCode,"delete",[8,46],t.key)?t.target!==t.currentTarget?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:void e.keydownDelete(t):null:null},function(t){return"button"in t||90===t.keyCode?t.target!==t.currentTarget?null:t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:void e.$emit("undo"):null:null},function(t){return"button"in t||90===t.keyCode?t.target!==t.currentTarget?null:t.metaKey?t.ctrlKey||t.shiftKey||t.altKey?null:void e.$emit("undo"):null:null},function(t){return"button"in t||90===t.keyCode?t.target!==t.currentTarget?null:t.ctrlKey&&t.shiftKey?t.altKey||t.metaKey?null:void e.$emit("redo"):null:null},function(t){return"button"in t||90===t.keyCode?t.target!==t.currentTarget?null:t.metaKey&&t.shiftKey?t.ctrlKey||t.altKey?null:void e.$emit("redo"):null:null}],mousewheel:function(e){e.preventDefault()}}},[e.canWrite?e._e():i("v-icon",{staticClass:"lock-button"},[e._v("lock")]),e._v(" "),i("SvgCanvas",{ref:"svgCanvas",attrs:{x:e.x,y:e.y,width:e.width,height:e.height,scale:e.scale},on:{move:e.move,zoom:e.zoom,selectRectangle:e.selectRectangle,click:e.clearSelect},nativeOn:{mousemove:function(t){!function(t){e.$isMobile.any||e.canvasCursorMove(t)}(t)},mouseup:function(t){!function(t){e.$isMobile.any||e.canvasCursorUp(t)}(t)},touchmove:function(t){!function(t){e.$isMobile.any&&e.canvasCursorMove(t)}(t)},touchend:function(t){!function(t){e.$isMobile.any&&e.canvasCursorUp(t)}(t)}}},[e._l(e.dependencyConnectors,function(t,n){return i("SvgBridgeConnector",{key:n,attrs:{sx:t.sx,sy:t.sy,ex:t.ex,ey:t.ey,selected:e.selectedDependencyConnector[n]}})}),e._v(" "),e._l(e.connectors,function(e,t){return i("SvgConnector",{key:t,attrs:{sx:e.sx,sy:e.sy,ex:e.ex,ey:e.ey}})}),e._v(" "),e.connectorOfMovingNodes?i("g",{staticClass:"inserting-marker"},[i("SvgConnector",{attrs:{sx:e.connectorOfMovingNodes.sx,sy:e.connectorOfMovingNodes.sy,ex:e.connectorOfMovingNodes.ex,ey:e.connectorOfMovingNodes.ey}}),e._v(" "),i("SvgRectangle",{attrs:{x:e.connectorOfMovingNodes.ex,y:e.connectorOfMovingNodes.ey-e.NODE_MARGIN_Y/3/2,rx:5,ry:5,width:50,height:e.NODE_MARGIN_Y/3,stroke:"none",fill:"blue"}})],1):e._e(),e._v(" "),e._l(e.nodes,function(t,n){return i("SvgTextRectangle",{key:n,ref:"node_"+n,refInFor:!0,staticClass:"mind-node",class:{"moving-origin":e.movingNodePositions[n]},attrs:{x:e.nodePositions[n].x,y:e.nodePositions[n].y,text:n===e.editTextTarget?e.editingText:t.text,strokeWidth:e.getStrokeWidth(n),stroke:e.getStrokeColor(n),fill:t.backgroundColor,textFill:t.color},on:{calcSize:function(t){return e.calcSize({key:n,size:t})}},nativeOn:{mousedown:function(t){t.preventDefault(),function(t){e.canWrite&&(e.$isMobile.any||e.nodeCursorDown(t,n))}(t)},mouseup:function(t){t.preventDefault(),function(t){e.canWrite&&(e.$isMobile.any||e.nodeCursorUp(n,{shift:t.shiftKey}))}(t)},touchstart:function(t){t.preventDefault(),function(t){e.canWrite&&e.$isMobile.any&&e.nodeCursorDown(t,n)}(t)},touchend:function(t){t.preventDefault(),function(t){e.canWrite&&e.$isMobile.any&&e.nodeCursorUp(n,{shift:t.shiftKey})}(t)}}})}),e._v(" "),e._l(e.movingNodePositions,function(t,n){return i("SvgTextRectangle",{key:"moving_"+n,staticClass:"mind-node moving-copy",attrs:{x:t.x,y:t.y,text:e.nodes[n].text,strokeWidth:e.selectedNodes[n]?2:1,stroke:e.selectedNodes[n]?"blue":"black",fill:e.nodes[n].backgroundColor,textFill:e.nodes[n].color}})})],2)],1),e._v(" "),i("div",{staticClass:"scale-tool"},[i("ScaleToolBox",{attrs:{min:e.MIN_SCALE_RATE,max:e.MAX_SCALE_RATE,step:.1,scaleRate:e.scaleRate},on:{changeScaleRate:e.setScaleRateBaseCenter,clearZoom:e.clearZoom}})],1),e._v(" "),e.canWrite?i("div",{staticClass:"history-tool"},[i("HistoryToolBox",{on:{undo:function(t){e.$emit("undo")},redo:function(t){e.$emit("redo")}}})],1):e._e(),e._v(" "),e.showTextInput?i("FloatTextInput",{ref:"floatTextInput",attrs:{x:e.editTextTargetPosition.x,y:e.editTextTargetPosition.y,targetKey:e.editTextTarget},on:{done:e.doneEditText},nativeOn:{mousewheel:function(t){t.preventDefault(),function(t){e.$isMobile.any||e.mousewheel(t)}(t)}},model:{value:e.editingText,callback:function(t){e.editingText=t},expression:"editingText"}}):e._e(),e._v(" "),e.showEditMenu?i("FloatEditMenu",{ref:"floatEditMenu",attrs:{root:e.editMenuTarget===e.ROOT_NODE,x:e.editMenuTargetPosition.x,y:e.editMenuTargetPosition.y,mode:e.mode,defaultNodeProps:e.defaultNodeProps,multiSelect:e.isMultiSelect},on:{editText:function(t){e.readyEditText(e.editMenuTarget)},addBrother:function(t){e.createNode(!0)},addChild:function(t){e.createNode(!1)},editDependency:e.editDependency,selectProp:function(t){return e.$emit("selectProp",t)},delete:e.deleteNode},nativeOn:{mousewheel:function(t){t.preventDefault(),function(t){e.$isMobile.any||e.mousewheel(t)}(t)}}}):e._e()],1)},staticRenderFns:[]},Pe=i("VU/8")(Le,Ue,!1,function(e){i("w7VV")},"data-v-d9a26900",null).exports,Ie={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-card",[t("v-card-title",{attrs:{"primary-title":""}},[t("div",[t("div",{staticClass:"headline"},[this._v("Permission denied")])])]),this._v(" "),t("v-card-text",[t("v-list",[t("v-list-tile",[t("v-list-tile-content",[t("v-list-tile-title",[this._v("There may be some reasons.")])],1)],1),this._v(" "),t("v-list-tile",[t("v-list-tile-content",[t("v-list-tile-sub-title",[this._v("This file does not exist.")])],1)],1),this._v(" "),t("v-list-tile",[t("v-list-tile-content",[t("v-list-tile-sub-title",[this._v("You don't have an authority to read this file.")])],1)],1),this._v(" "),t("v-list-tile",[t("v-list-tile-content",[t("v-list-tile-title",[this._v("Let's reload after getting an authority.")])],1)],1)],1)],1)],1)},staticRenderFns:[]},We="NODES",je="SELECTED_NODES",ze="FILE_KEY",$e="INITIAL_LOADING",He="DISCONNECT",Be="LOAD_NODES",Ve="UPDATE_NODES",Xe="UNDO_NODES",qe="REDO_NODES",Qe="SET_SELECTED_NODES",Ge="CLEAR_SELECT",Ye="RESCUE_CONFRICT",Ze="UPDATE_NODES",Je="SET_SELECTED_NODES",et="SET_FILE_KEY",tt="CLEAR_NODES",it="SET_INITIAL_LOADING",nt="PUSH_UNDO_STACK",rt="POP_UNDO_STACK",ot="POP_REDO_STACK",st="CLEAR_STACKS",at="CLEAR_UNDO_STACKS",lt="CLEAR_REDO_STACKS",ct="FILES",ut="FILE_AUTHORITIES",dt="SHARED_FILES",ht="SHARED_FILE_AUTHORITIES",ft="FILE_FROM_KEY",vt="FILE_AUTHORITY_FROM_KEY",pt="IS_MY_FILE_FROM_KEY",yt="PERMISSION_DENIED",gt="LOAD_FILE",mt="LOAD_FILES",xt="UPDATE_FILES",_t="CREATE_FILE",bt="CLONE_FILE",wt="DELETE_FILES",Ct="INVITE_USER",St="UPDATE_STATUS",Et="UPDATE_USER_AUTHORITIES",kt="UPDATE_FILES",Tt="UPDATE_FILE_AUTHORITIES",Nt="UPDATE_SHARED_FILES",At="UPDATE_SHARED_FILE_AUTHORITIES",Ot="CLEAR_FILES",Mt="SET_PERMISSION_DENIED",Kt="NODE_COLOR",Dt="TEXT_COLOR",Rt="SET_NODE_COLOR",Ft="SET_TEXT_COLOR",Lt="SET_NODE_COLOR",Ut="SET_TEXT_COLOR",Pt={components:{MapCanvas:Pe,PermissionDeniedMessage:i("VU/8")({},Ie,!1,function(e){i("j80+")},"data-v-04fb0a94",null).exports},data:function(){return{message:""}},props:{fileKey:{type:String,required:!0}},computed:g()({},Object(m.c)("layouts",{leftDrawer:L}),Object(m.c)("user",{user:x,_canWrite:b}),Object(m.c)("nodes",{nodes:We,selectedNodes:je,initialLoading:$e}),Object(m.c)("files",{fileFromKey:ft,fileAuthorityFromKey:vt,permissionDenied:yt}),Object(m.c)("settings",{nodeColor:Kt,textColor:Dt}),{canWrite:function(){return this._canWrite({fileKey:this.fileKey})},canvasWidth:function(){return this.$window.width>=1264&&this.leftDrawer?this.$window.width-300-20:this.$window.width-20},canvasHeight:function(){return this.$window.height-48},defaultNodeProps:function(){return{backgroundColor:this.nodeColor,color:this.textColor}},file:function(){return this.fileFromKey({fileKey:this.fileKey})},fileAuthority:function(){return this.fileAuthorityFromKey({fileKey:this.fileKey})},loaded:function(){return!this.initialLoading||this.file&&this.file.nodeCount<1},snackbar:{get:function(){return!!this.message},set:function(e){this.message=e?this.message:""}}}),mounted:function(){this.loadFile({key:this.fileKey}),this.loadNodes({fileKey:this.fileKey})},destroyed:function(){this.disconnect()},methods:g()({},Object(m.b)("nodes",{disconnect:He,updateNodes:Ve,_setSelectedNodes:Qe,clearSelect:Ge,loadNodes:Be,_undo:Xe,_redo:qe}),Object(m.b)("files",{loadFile:gt}),Object(m.b)("settings",{setNodeColor:Rt,setTextColor:Ft}),{setSelectedNodes:function(e){var t=e.selectedNodes;this._setSelectedNodes({selectedNodes:t});var i=$()(t);if(i.length>0){var n=i[0],r=this.nodes[n];this.setTextColor({textColor:r.color}),this.setNodeColor({nodeColor:r.backgroundColor})}},undo:function(){var e=this;this._undo().catch(function(t){e.message=t.message})},redo:function(){var e=this;this._redo().catch(function(t){e.message=t.message})},changeSelectedNodesProps:function(e){var t=this,i=e.color,n=e.backgroundColor,r=$()(this.selectedNodes);if(r.length>0){var o=r.reduce(function(e,r){return e[r]=g()({},t.nodes[r],{color:i,backgroundColor:n}),e},{});this.updateNodes({nodes:o})}},selectProp:function(e){var t=e.color,i=e.backgroundColor;this.changeSelectedNodesProps({color:t,backgroundColor:i}),this.setTextColor({textColor:t}),this.setNodeColor({nodeColor:i})}})},It={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[e.loaded&&!e.permissionDenied?i("MapCanvas",{attrs:{width:e.canvasWidth,height:e.canvasHeight,nodes:e.nodes,selectedNodes:e.selectedNodes,fileAuthority:e.fileAuthority,user:e.user,canWrite:e.canWrite,defaultNodeProps:e.defaultNodeProps},on:{updateNodes:function(t){return e.updateNodes({nodes:t})},setSelectedNodes:function(t){return e.setSelectedNodes({selectedNodes:t})},clearSelect:e.clearSelect,undo:e.undo,redo:e.redo,selectProp:e.selectProp}}):e._e(),e._v(" "),e.permissionDenied?i("div",{staticClass:"center-box"},[i("PermissionDeniedMessage")],1):e._e(),e._v(" "),i("v-snackbar",{attrs:{bottom:"",left:"",color:"error",timeout:4e3},on:{click:function(t){e.snackbar=!1}},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.message)+"\n  ")])],1)},staticRenderFns:[]},Wt=i("VU/8")(Pt,It,!1,function(e){i("DKZx")},"data-v-d0ce5dd2",null).exports,jt={data:function(){return{dialog:!1,email:"",readOnly:!1,publicFileLocal:!1,publicReadOnlyLocal:!1,updatedAuthorities:{}}},props:{publicFile:{type:Boolean,default:!1},publicReadOnly:{type:Boolean,default:!1},canEditPublic:{type:Boolean,default:!0},userAuthorities:{type:Object,default:function(){return{}}},users:{type:Object,default:function(){return{}}},user:{type:Object,required:!0}},computed:{emailErrors:function(){return[]},owner:function(){var e=this,t=$()(this.userAuthorities).find(function(t){return e.userAuthorities[t].owner});return t?this.users[t]:null},invitedUserAuthorities:function(){var e=Q()({},this.userAuthorities);return this.owner&&delete e[this.owner.uid],e}},watch:{dialog:function(e){e&&this.initData()}},methods:{isMe:function(e){return e===this.user.uid},initData:function(){this.email="",this.readOnly=!1,this.publicFileLocal=this.publicFile||!1,this.publicReadOnlyLocal=this.publicReadOnly||!1,this.updatedAuthorities={}},setStatus:function(){this.$emit("setStatus",{publicFile:this.publicFileLocal,readOnly:this.publicReadOnlyLocal})},invite:function(){this.email&&(this.$emit("invite",{email:this.email,readOnly:this.readOnly}),this.email="")},update:function(){var e=this,t=$()(this.updatedAuthorities).reduce(function(t,i){return e.userAuthorities[i]&&(e.updatedAuthorities[i]?t[i]=e.updatedAuthorities[i]:t[i]=null),t},{});this.$emit("updateUserAuthorities",t),this.updatedAuthorities={}},toggleDeleteUser:function(e){null===this.updatedAuthorities[e]?p.a.delete(this.updatedAuthorities,e):p.a.set(this.updatedAuthorities,e,null)},toggleWritableUser:function(e){var t=this.updatedAuthorities[e];null!==t&&(t?p.a.delete(this.updatedAuthorities,e):p.a.set(this.updatedAuthorities,e,{write:!this.userAuthorities[e].write}))}}},zt={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{row:"","justify-center":""}},[i("v-dialog",{attrs:{"max-width":"560"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[i("v-icon",[e._v("share")])],1),e._v(" "),i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v("File status")]),e._v(" "),i("v-card-text",[i("form",[i("v-checkbox",{class:{updated:e.publicFile!==e.publicFileLocal},attrs:{"hide-details":"",label:"Public",disabled:!e.canEditPublic},model:{value:e.publicFileLocal,callback:function(t){e.publicFileLocal=t},expression:"publicFileLocal"}}),e._v(" "),e.publicFileLocal?i("v-checkbox",{class:{updated:e.publicReadOnly!==e.publicReadOnlyLocal},attrs:{"hide-details":"",label:"Read Only (except for invited users)",disabled:!e.canEditPublic},model:{value:e.publicReadOnlyLocal,callback:function(t){e.publicReadOnlyLocal=t},expression:"publicReadOnlyLocal"}}):e._e(),e._v(" "),i("div",{staticClass:"text-xs-right"},[e.canEditPublic?i("v-btn",{on:{click:e.setStatus}},[e._v("Update")]):e._e()],1)],1)]),e._v(" "),i("v-divider")],1),e._v(" "),i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v("Share")]),e._v(" "),i("v-card-text",[i("form",{on:{submit:function(t){t.preventDefault(),e.invite(t)}}},[i("v-text-field",{attrs:{label:"E-mail","error-messages":e.emailErrors,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),i("v-checkbox",{attrs:{"hide-details":"",label:"Read only"},model:{value:e.readOnly,callback:function(t){e.readOnly=t},expression:"readOnly"}}),e._v(" "),i("div",{staticClass:"text-xs-right"},[i("v-btn",[e._v("Invite")])],1)],1)]),e._v(" "),i("v-divider")],1),e._v(" "),i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v("Users")]),e._v(" "),i("v-card-text",[i("v-list",{attrs:{subheader:""}},[i("v-subheader",[e._v("Owner")]),e._v(" "),e.owner?i("v-list-tile",{attrs:{avatar:""}},[i("v-badge",{attrs:{overlay:"",left:"",color:"blue",overlap:""}},[i("v-icon",{attrs:{slot:"badge",dark:""},slot:"badge"},[e._v("edit")]),e._v(" "),i("v-avatar",{attrs:{size:"32px"}},[i("img",{attrs:{src:e.owner.photoURL}})])],1),e._v(" "),i("v-list-tile-content",[i("v-list-tile-title",[e._v(e._s(e.owner.displayName))]),e._v(" "),i("v-list-tile-sub-title",[e._v(e._s(e.owner.email))])],1)],1):e._e()],1),e._v(" "),i("v-list",{attrs:{subheader:""}},[i("v-subheader",[e._v("Invited users")]),e._v(" "),e._l(e.invitedUserAuthorities,function(t,n){return e.users[n]?i("v-list-tile",{key:n,class:{updated:n in e.updatedAuthorities},attrs:{avatar:""}},[i("v-badge",{staticClass:"toggle-writable",class:{myself:e.isMe(n)},attrs:{overlay:"",left:"",overlap:"",color:e.updatedAuthorities[n]?e.updatedAuthorities[n].write?"blue":"grey":t.write?"blue":"grey"},nativeOn:{click:function(t){!e.isMe(n)&&e.toggleWritableUser(n)}}},[i("v-icon",{attrs:{slot:"badge",dark:""},slot:"badge"},[e._v("edit")]),e._v(" "),i("v-avatar",{attrs:{size:"32px"}},[i("img",{attrs:{src:e.users[n].photoURL}})])],1),e._v(" "),i("v-list-tile-content",{class:{deleted:null===e.updatedAuthorities[n]}},[i("v-list-tile-title",[e._v(e._s(e.users[n].displayName)+e._s(e.isMe(n)?" ( you! )":""))]),e._v(" "),i("v-list-tile-sub-title",[e._v(e._s(e.users[n].email))])],1),e._v(" "),i("v-list-tile-action",[i("v-btn",{attrs:{icon:"",ripple:"",disabled:e.isMe(n)},on:{click:function(t){e.toggleDeleteUser(n)}}},[i("v-icon",{attrs:{color:null===e.updatedAuthorities[n]?"red":"grey"}},[e._v("delete")])],1)],1)],1):e._e()})],2),e._v(" "),i("div",{staticClass:"text-xs-right"},[i("v-btn",{on:{click:e.update}},[e._v("Update")])],1)],1)],1),e._v(" "),i("v-card",[i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"black darken-1",flat:"flat"},on:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1)],1)},staticRenderFns:[]},$t=i("VU/8")(jt,zt,!1,function(e){i("V8RT")},"data-v-1d9dc55e",null).exports,Ht={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{row:"","justify-center":""}},[i("v-dialog",{attrs:{width:"400px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[i("v-icon",[e._v("help")])],1),e._v(" "),i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v("Help")])]),e._v(" "),i("v-list",{attrs:{"two-line":"",subheader:""}},[i("v-divider"),e._v(" "),i("v-subheader",[e._v("Select")]),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Move focus\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Arrow key")])])],1)],1),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Multiple\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Shift")]),e._v(" + "),i("code",[e._v("Click")])])],1)],1),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Rectangle\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Shift")]),e._v(" + "),i("code",[e._v("Drag")])])],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-subheader",[e._v("Selecting a Node")]),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Create a younger node\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Enter")])])],1)],1),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Create a child node\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Shift")]),e._v(" + "),i("code",[e._v("Enter")])])],1)],1),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Delete a node\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Shift")]),e._v(" + "),i("code",[e._v("Delete")])])],1)],1),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Edit text\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Space")]),e._v(" , "),i("code",[e._v("Double click")])])],1)],1),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Complete editing text\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Escape")])])],1)],1),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Change the parent\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Drag")])])],1)],1),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Switch order\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Shift")]),e._v(" + "),i("code",[e._v("Up or Down")])])],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-subheader",[e._v("History")]),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Undo\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Control")]),e._v(" + "),i("code",[e._v("Z")]),e._v(" , "),i("code",[e._v("Command")]),e._v(" + "),i("code",[e._v("Z")])])],1)],1),e._v(" "),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-content",[i("v-list-tile-title",[e._v("\n              Redo\n            ")]),e._v(" "),i("v-list-tile-sub-title",[i("code",[e._v("Control")]),e._v(" + "),i("code",[e._v("Shift")]),e._v(" + "),i("code",[e._v("Z")]),e._v(" , "),i("code",[e._v("Command")]),e._v(" + "),i("code",[e._v("Shift")]),e._v(" + "),i("code",[e._v("Z")])])],1)],1)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"black darken-1",flat:"flat"},on:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1)],1)},staticRenderFns:[]},Bt=i("VU/8")({data:function(){return{dialog:!1}}},Ht,!1,function(e){i("zYKD")},"data-v-e08a90b8",null).exports,Vt="USERS",Xt="LOAD_USER",qt="LOAD_USER_FROM_EMAIL",Qt="LOAD_USERS",Gt="LOAD_USERS_FROM_EMAIL",Yt="UPDATE_USERS",Zt={components:{InviteUserDialog:$t,MapHelpDialog:Bt},computed:g()({},Object(m.c)("nodes",{fileKey:ze}),Object(m.c)("files",{fileAuthorityFromKey:vt,isMyFileFromKey:pt}),Object(m.c)("user",{user:x}),Object(m.c)("users",{users:Vt}),{fileAuthority:function(){return this.fileAuthorityFromKey({fileKey:this.fileKey})},canEditPublic:function(){return this.isMyFileFromKey({fileKey:this.fileKey})},canShare:function(){if(!this.user)return!1;var e=this.user.uid,t=this.fileAuthority;if(t){var i=t.users[e];return i&&i.write}return!1},publicFile:function(){var e=this.fileAuthority;return e?e.public:null},userAuthorities:function(){return this.fileAuthority.users||{}}}),methods:g()({},Object(m.b)("files",{inviteUser:Ct,updateStatus:St,_updateUserAuthorities:Et}),Object(m.b)("users",{_loadUsers:Qt,_loadUsersFromEmail:Gt}),{invite:function(e){var t=e.email,i=e.readOnly;this.inviteUser({fileKey:this.fileKey,email:t,readOnly:i}),this._loadUsersFromEmail({emailList:[t]})},setStatus:function(e){var t=e.publicFile,i=e.readOnly;this.updateStatus({publicFile:t,readOnly:i,fileKey:this.fileKey})},loadUsers:function(){this._loadUsers({users:this.userAuthorities})},updateUserAuthorities:function(e){this._updateUserAuthorities({userAuthorities:e,fileKey:this.fileKey})}})},Jt={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map-menu"},[e.canShare?i("InviteUserDialog",{attrs:{publicFile:!!e.publicFile,publicReadOnly:!!e.publicFile&&!e.publicFile.write,canEditPublic:e.canEditPublic,userAuthorities:e.userAuthorities,users:e.users,user:e.user},on:{setStatus:e.setStatus,invite:e.invite,updateUserAuthorities:e.updateUserAuthorities},nativeOn:{click:function(t){e.loadUsers(t)}}}):e._e(),e._v(" "),i("MapHelpDialog")],1)},staticRenderFns:[]},ei=i("VU/8")(Zt,Jt,!1,function(e){i("nquP")},"data-v-9229e150",null).exports,ti={components:{InviteUserDialog:$t,MapHelpDialog:Bt},props:{},computed:g()({},Object(m.c)("nodes",{fileKey:ze}),Object(m.c)("files",{fileFromKey:ft}),{file:function(){return this.fileFromKey({fileKey:this.fileKey})}}),methods:{moveToHome:function(){this.$router.push({name:"WorkSpace"})}}},ii={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-title-wrapper"},[this.file?t("div",{staticClass:"header-title"},[this.file?t("v-btn",{staticClass:"button",attrs:{icon:"",small:""},on:{click:this.moveToHome}},[t("v-icon",[this._v("arrow_back")])],1):this._e(),this._v(" "),t("h1",{staticClass:"title-text"},[this._v(this._s(this.file.name||"untitled"))])],1):t("v-btn",{staticClass:"header-title",attrs:{flat:""},on:{click:this.moveToHome}},[this._v("MindXXACPR")])],1)},staticRenderFns:[]},ni=i("VU/8")(ti,ii,!1,function(e){i("r75E")},"data-v-1c0b2031",null).exports,ri=i("Zzkc"),oi={components:{ColorPicker:ri.Swatches,MapCanvas:Pe},data:function(){return{renderCanvas:!1,showNodeColorPicker:!1,showTextColorPicker:!1}},props:{nodes:{type:Object,required:!0,validator:function(e){return ee in e}},file:{type:Object,required:!0},nodeColor:{type:String,default:"#87cefa"},textColor:{type:String,default:"#000000"},canWrite:{type:Boolean,default:!1}},computed:{canvasWidth:function(){return 1024},canvasHeight:function(){return 1024}},methods:{printSvg:function(){var e=this;this.renderCanvas=!0,this.$nextTick().then(function(){var t=e.$refs.mapCanvas;t.clearZoom().then(function(){var i=t.$refs.svgCanvas.$el,n=(new XMLSerializer).serializeToString(i);e.downloadText(n,e.file.name),e.renderCanvas=!1})})},downloadText:function(e,t){var i=t.replace(/^.*[(\\|/|:|*|?|"|<|>||)].*$/,"_"),n=new Blob([e],{type:"image/svg+xml"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,i);else{var r=document.createElement("a");r.href=URL.createObjectURL(n),r.target="_blank",r.download=t,r.click()}}}},si={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-tabs",{attrs:{grow:""}},[i("v-tabs-bar",{staticClass:"grey lighten-4",attrs:{light:""}},[e.canWrite?i("v-tabs-item",{staticClass:"primary--text",attrs:{href:"#left-drawer-edit"}},[i("v-icon",[e._v("mode_edit")])],1):e._e(),e._v(" "),i("v-tabs-item",{staticClass:"primary--text",attrs:{href:"#left-drawer-file"}},[i("v-icon",[e._v("insert_drive_file")])],1),e._v(" "),i("v-tabs-slider",{attrs:{color:"yellow"}})],1),e._v(" "),i("v-tabs-items",[e.canWrite?i("v-tabs-content",{attrs:{id:"left-drawer-edit"}},[i("v-list",[i("v-list-tile",{style:{background:e.nodeColor},on:{click:function(t){e.showNodeColorPicker=!e.showNodeColorPicker}}},[i("v-list-tile-action",[i("v-icon",{style:{color:e.textColor}},[e._v("palette")])],1),e._v(" "),i("v-list-tile-content",[i("v-list-tile-title",{style:{color:e.textColor}},[i("b",[e._v("Node Color")])])],1)],1),e._v(" "),e.showNodeColorPicker?i("li",{staticClass:"picker-box"},[i("ColorPicker",{attrs:{value:e.nodeColor},on:{input:function(t){return e.$emit("changeNodeColor",t.hex)}}})],1):e._e(),e._v(" "),i("v-list-tile",{style:{background:e.nodeColor},on:{click:function(t){e.showTextColorPicker=!e.showTextColorPicker}}},[i("v-list-tile-action",[i("v-icon",{style:{color:e.textColor}},[e._v("palette")])],1),e._v(" "),i("v-list-tile-content",[i("v-list-tile-title",{style:{color:e.textColor}},[i("b",[e._v("Text Color")])])],1)],1),e._v(" "),e.showTextColorPicker?i("li",{staticClass:"picker-box"},[i("ColorPicker",{attrs:{value:e.textColor},on:{input:function(t){return e.$emit("changeTextColor",t.hex)}}})],1):e._e()],1)],1):e._e(),e._v(" "),i("v-tabs-content",{attrs:{id:"left-drawer-file"}},[i("v-list",[i("v-list-tile",{on:{click:e.printSvg}},[i("v-list-tile-action",[i("v-icon",[e._v("file_download")])],1),e._v(" "),i("v-list-tile-content",[i("v-list-tile-title",[e._v("SVG")])],1)],1),e._v(" "),e.renderCanvas?i("MapCanvas",{ref:"mapCanvas",staticClass:"map-canvas",attrs:{nodes:e.nodes,width:e.canvasWidth,height:e.canvasHeight}}):e._e(),e._v(" "),i("v-divider"),e._v(" "),e.canWrite?i("v-list-tile",{on:{click:function(t){e.$emit("repairFile")}}},[i("v-list-tile-action",[i("v-icon",[e._v("autorenew")])],1),e._v(" "),i("v-list-tile-content",[i("v-list-tile-title",[e._v("Repair file")])],1)],1):e._e()],1)],1)],1)],1)},staticRenderFns:[]},ai={components:{MapLeftDrawer:i("VU/8")(oi,si,!1,function(e){i("LEm9")},"data-v-90a735e6",null).exports},computed:g()({},Object(m.c)("nodes",{nodes:We,selectedNodes:je,fileKey:ze}),Object(m.c)("settings",{nodeColor:Kt,textColor:Dt}),Object(m.c)("files",{fileFromKey:ft}),Object(m.c)("user",{_canWrite:b}),{canWrite:function(){return this._canWrite({fileKey:this.fileKey})},file:function(){return this.fileFromKey({fileKey:this.fileKey})}}),methods:g()({},Object(m.b)("nodes",{updateNodes:Ve,_repairFile:Ye}),Object(m.b)("settings",{setNodeColor:Rt,setTextColor:Ft}),{changeSelectedNodesProps:function(e){var t=this,i=$()(this.selectedNodes);if(i.length>0){var n=i.reduce(function(i,n){return i[n]=Q()({},t.nodes[n],e),i},{});this.updateNodes({nodes:n})}},changeNodeColor:function(e){this.setNodeColor({nodeColor:e}),this.changeSelectedNodesProps({backgroundColor:e})},changeTextColor:function(e){this.setTextColor({textColor:e}),this.changeSelectedNodesProps({color:e})},repairFile:function(){this._repairFile().then(function(){location.reload()})}})},li={render:function(){var e=this.$createElement,t=this._self._c||e;return this.file?t("MapLeftDrawer",{attrs:{nodes:this.nodes,file:this.file,nodeColor:this.nodeColor,textColor:this.textColor,canWrite:this.canWrite},on:{changeNodeColor:this.changeNodeColor,changeTextColor:this.changeTextColor,repairFile:this.repairFile}}):this._e()},staticRenderFns:[]},ci=i("VU/8")(ai,li,!1,function(e){i("iW/r")},"data-v-e7695976",null).exports,ui={data:function(){return{pagination:{sortBy:"updated",descending:!0},snackbar:!1,dataKind:"all"}},props:{files:{type:Object,default:function(){return{}}},fileAuthorities:{type:Object,default:function(){return{}}},sharedFiles:{type:Object,default:function(){return{}}},sharedFileAuthorities:{type:Object,default:function(){return{}}},user:{type:Object,default:function(){return{}}}},computed:{headers:function(){return[{text:"Name",align:"left",value:"name"},{text:"Count",value:"nodeCount"},{text:"Updated",value:"updated"},{text:"Created",value:"created"},{text:"",value:"",sortable:!1},{text:"",value:"",sortable:!1}]},currentFiles:function(){return"shared"===this.dataKind?this.sharedFiles:"workSpace"===this.dataKind?this.files:g()({},this.sharedFiles,this.files)},currentFileAuthorities:function(){return"shared"===this.dataKind?this.sharedFileAuthorities:"workSpace"===this.dataKind?this.fileAuthorities:g()({},this.sharedFileAuthorities,this.fileAuthorities)},sortedFileList:function(){var e=this,t=[this.pagination.sortBy],i=this.pagination.descending?-1:1;return $()(this.currentFiles).map(function(t){return Q()({},e.currentFiles[t],{key:t})}).sort(function(e,n){return(e[t]-n[t])*i})},canWrite:function(){var e=this,t=this.user.uid;return $()(this.currentFileAuthorities).reduce(function(i,n){var r=e.currentFileAuthorities[n];if(r){var o=r.users[t];o?i[n]=o.write:r.public?i[n]=r.public.write:i[n]=!1}else i[n]=!1;return i},{})},hideEditTools:function(){return"shared"===this.dataKind}},methods:{changeName:function(e){var t=e.key,i=e.name,n=X()({},t,Q()({},this.currentFiles[t],{name:i}));this.$emit("changeName",{files:n})},createFile:function(){this.$emit("createFile",{file:{name:""}}),this.pagination.sortBy="updated",this.pagination.descending=!0},deleteFile:function(e){if(this.snackbar){var t=X()({},e,null);this.$emit("deleteFiles",{files:t}),this.snackbar=!1}else this.snackbar=!0},cloneFile:function(e){this.currentFiles[e]&&this.$emit("cloneFile",{fileKey:e})},dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}}},di={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"work-space-component"},[i("v-card",[i("v-card-title",[i("v-flex",{attrs:{xs6:""}},[i("v-select",{staticClass:"data-kind-select",attrs:{items:[{text:"All files",value:"all"},{text:"My files",value:"workSpace"},{text:"Shared files",value:"shared"}],"single-line":"",bottom:"","hide-details":""},model:{value:e.dataKind,callback:function(t){e.dataKind=t},expression:"dataKind"}})],1),e._v(" "),i("div",{staticClass:"header-buttons"},[e.hideEditTools?e._e():i("v-btn",{attrs:{dark:"",fab:"",small:"",color:"green"},on:{click:e.createFile}},[i("v-icon",[e._v("add")])],1)],1)],1)],1),e._v(" "),i("v-card",[i("div",{staticClass:"header-tools"}),e._v(" "),e._l(e.sortedFileList,function(t){return i("v-flex",{key:t.key,attrs:{"xs-12":""}},[i("v-card",{staticClass:"file-card"},[i("v-card-title",{staticClass:"card-title"},[i("div",{staticClass:"content-box",on:{click:function(i){e.$router.push({name:"Map",params:{fileKey:t.key}})}}},[i("p",{staticClass:"file-name mb-0"},[e._v(e._s(t.name||"untitled"))]),e._v(" "),i("dl",[i("dt",[e._v("Nodes: ")]),i("dd",[e._v(e._s(t.nodeCount))])]),e._v(" "),i("dl",[i("dt",[e._v("Updated: ")]),i("dd",[e._v(e._s(e.dateFormat(t.updated)))]),e._v(" "),i("dt",[e._v("Created: ")]),i("dd",[e._v(e._s(e.dateFormat(t.created)))])])]),e._v(" "),i("div",{staticClass:"button-box"},[e.sharedFileAuthorities[t.key]?i("v-chip",{staticClass:"shared-tag"},[e._v("shared")]):e._e(),e._v(" "),i("v-edit-dialog",{class:{hidden:!e.canWrite[t.key]},attrs:{lazy:""}},[i("v-btn",{staticClass:"file-button edit-name",attrs:{dark:"",fab:"",small:"",color:"blue"}},[i("v-icon",[e._v("textsms")])],1),e._v(" "),i("v-text-field",{attrs:{slot:"input","single-line":"",counter:"",label:"Edit",value:t.name},on:{change:function(i){return e.changeName({key:t.key,name:i})}},slot:"input"})],1),e._v(" "),i("v-btn",{staticClass:"file-button",attrs:{dark:"",fab:"",small:"",outline:"",color:"black"},on:{click:function(i){e.cloneFile(t.key)}}},[i("v-icon",[e._v("content_copy")])],1),e._v(" "),i("v-btn",{staticClass:"file-button",class:{hidden:e.sharedFileAuthorities[t.key]},attrs:{dark:"",fab:"",small:"",outline:"",color:"black"},on:{click:function(i){e.deleteFile(t.key)}}},[i("v-icon",[e._v("delete")])],1)],1)])],1)],1)})],2),e._v(" "),i("v-snackbar",{attrs:{bottom:"",right:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    One more click to delete.\n  ")])],1)},staticRenderFns:[]},hi={components:{WorkSpace:i("VU/8")(ui,di,!1,function(e){i("6Fuj")},"data-v-62fb25ec",null).exports},computed:g()({},Object(m.c)("files",{files:ct,fileAuthorities:ut,sharedFiles:dt,sharedFileAuthorities:ht}),Object(m.c)("user",{user:x})),mounted:function(){this.loadFiles()},methods:g()({},Object(m.b)("files",{loadFiles:mt,updateFiles:xt,createFile:_t,cloneFile:bt,deleteFiles:wt}))},fi={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"work-space-wrapper"},[t("WorkSpace",{attrs:{files:this.files,fileAuthorities:this.fileAuthorities,sharedFiles:this.sharedFiles,sharedFileAuthorities:this.sharedFileAuthorities,user:this.user},on:{changeName:this.updateFiles,createFile:this.createFile,cloneFile:this.cloneFile,deleteFiles:this.deleteFiles}})],1)},staticRenderFns:[]},vi=i("VU/8")(hi,fi,!1,function(e){i("/KFP")},"data-v-24187cea",null).exports;p.a.use(N.a);var pi,yi,gi,mi,xi,_i,bi,wi,Ci,Si,Ei,ki,Ti,Ni=new N.a({mode:"history",routes:[{path:"/",redirect:{name:"WorkSpace"}},{path:"/map",component:j,props:{needAuth:!1,hideLedfDrawer:!1},children:[{path:":fileKey",name:"Map",components:{content:Wt,headerTitle:ni,headerIconList:ei,leftDrawer:ci},props:{content:!0}}]},{path:"/workspace",component:j,props:{needAuth:!0,hideLedfDrawer:!0},children:[{path:"",name:"WorkSpace",components:{headerTitle:ni,content:vi}}]}]}),Ai={namespaced:!0,state:{leftDrawer:!1},modules:{},actions:X()({},U,function(e,t){var i=t.leftDrawer;e.commit(P,{leftDrawer:i})}),mutations:X()({},P,function(e,t){var i=t.leftDrawer;e.leftDrawer=i}),getters:X()({},L,function(e){return e.leftDrawer})},Oi=function(e,t){var i=t.nodes,n=e.state.fileKey,r=$()(i).reduce(function(e,t){return e["/nodes/"+n+"/"+t]=i[t],e},{});r["/files/"+n+"/updated"]=O.database.ServerValue.TIMESTAMP;var o=Q()({},e.state.nodes,i);return r["/files/"+n+"/nodeCount"]=$()(o).reduce(function(e,t){return o[t]?e+1:e},0),O.database().ref().update(r)},Mi=function(e){return O.database().ref("nodes/"+e.state.fileKey).off()},Ki=function(e,t){var i=t.fileKey,n=O.database().ref("nodes/"+i);return n.on("child_added",function(t){var i=X()({},t.key,oe(t.val()));e.commit(Ze,{nodes:i}),e.state.initialLoading&&e.commit(it,{initialLoading:!1})}),n.on("child_changed",function(t){var i=X()({},t.key,oe(t.val()));e.commit(Ze,{nodes:i})}),n.on("child_removed",function(t){var i=X()({},t.key,null);e.commit(Ze,{nodes:i})}),B.a.resolve()},Di=(pi={},X()(pi,He,function(e){e.state.fileKey&&Mi(e),e.commit(tt)}),X()(pi,Be,function(e,t){var i=t.fileKey;e.dispatch(He),e.commit(et,{fileKey:i}),e.commit(it,{initialLoading:!0}),Ki(e,{fileKey:i})}),X()(pi,Ve,function(e,t){var i=t.nodes,n=function(e){var t=e.nodes,i=e.updatedNodes;return $()(i).reduce(function(e,n){var r=t[n],o=i[n];return r&&o?se(r,o)||(e[n]=o):e[n]=o,e},{})}({nodes:e.state.nodes,updatedNodes:i});0!==$()(n).length&&(e.commit(nt,{nodes:n}),e.commit(Ze,{nodes:n}),Oi(e,{nodes:n}))}),X()(pi,Xe,function(e){return new B.a(function(t,i){var n=e.state.undoStacks;if(!(n.length>0))return i(new Error("No undo history"));var r=n[n.length-1];if(r){var o=Q()({},e.state.nodes,r);for(var s in o)o[s]||delete o[s];if(v({nodes:o}))return e.commit(at),i(new Error("Failed to undo. Others may edit and conflicted."));e.commit(rt),e.commit(Ze,{nodes:r}),Oi(e,{nodes:r})}return t()})}),X()(pi,qe,function(e){return new B.a(function(t,i){var n=e.state.redoStacks;if(!(n.length>0))return i(new Error("No redo history"));var r=n[n.length-1];if(r){var o=Q()({},e.state.nodes,r);for(var s in o)o[s]||delete o[s];if(v({nodes:o}))return e.commit(lt),i(new Error("Failed to redo. Others may edit and conflicted."));e.commit(ot),e.commit(Ze,{nodes:r}),Oi(e,{nodes:r})}return t()})}),X()(pi,Ye,function(e){if(!v({nodes:e.state.nodes}))return B.a.resolve();var t=function(e){var t=e.nodes;return $()(t).reduce(function(e,i){if(i!==ee&&!l({nodes:t,childKey:i}))return e;var n=t[i].children.filter(function(e){if(t[e])return!0});return e[i]=Q()({},t[i],{children:n}),e},{})}({nodes:e.state.nodes});return e.commit(st),e.commit(Je,{}),e.commit(Ze,{nodes:t}),Oi(e,{nodes:t})}),X()(pi,Qe,function(e,t){var i=t.selectedNodes;e.commit(Je,{selectedNodes:i})}),X()(pi,Ge,function(e){e.commit(Je,{})}),pi),Ri=(yi={},X()(yi,Ze,function(e,t){var i=t.nodes;$()(i).forEach(function(t){i[t]?p.a.set(e.nodes,t,i[t]):p.a.delete(e.nodes,t)}),0===$()(e.nodes).length&&(e.nodes=ae()),e.selectedNodes=$()(e.selectedNodes).reduce(function(t,i){return e.nodes[i]&&(t[i]=!0),t},{})}),X()(yi,Je,function(e,t){var i=t.selectedNodes,n=void 0===i?{}:i;e.selectedNodes=$()(n).reduce(function(e,t){return n[t]&&(e[t]=!0),e},{})}),X()(yi,et,function(e,t){var i=t.fileKey;e.fileKey=i}),X()(yi,tt,function(e){e.fileKey=null,e.nodes=ae(),e.selectedNodes={},e.undoStacks=[],e.redoStacks=[]}),X()(yi,it,function(e,t){var i=t.initialLoading;e.initialLoading=i}),X()(yi,nt,function(e,t){var i=t.nodes,n=$()(i).reduce(function(t,i){return t[i]=e.nodes[i]?h(e.nodes[i]):null,t},{});e.undoStacks.push(Q()({},n)),e.redoStacks=[]}),X()(yi,rt,function(e){if(e.undoStacks.length>0){var t=e.undoStacks.pop(),i=$()(t).reduce(function(t,i){return t[i]=e.nodes[i]?h(e.nodes[i]):null,t},{});e.redoStacks.push(i)}}),X()(yi,ot,function(e){if(e.redoStacks.length>0){var t=e.redoStacks.pop(),i=$()(t).reduce(function(t,i){return t[i]=e.nodes[i]?h(e.nodes[i]):null,t},{});e.undoStacks.push(i)}}),X()(yi,st,function(e){e.undoStacks=[],e.redoStacks=[]}),X()(yi,at,function(e){e.undoStacks=[]}),X()(yi,lt,function(e){e.redoStacks=[]}),yi),Fi=(gi={},X()(gi,We,function(e){return e.nodes}),X()(gi,je,function(e){return e.selectedNodes}),X()(gi,ze,function(e){return e.fileKey}),X()(gi,$e,function(e){return e.initialLoading}),gi),Li={namespaced:!0,state:{fileKey:null,nodes:X()({},ee,oe()),selectedNodes:{},initialLoading:!0,undoStacks:[],redoStacks:[]},modules:{},actions:Di,mutations:Ri,getters:Fi},Ui=(mi={},X()(mi,w.LOAD_USER,function(e){return e.commit(S,!0),O.auth().onAuthStateChanged(function(t){return e.commit(S,!0),t?(e.commit(C,t),e.commit(S,!1),O.database().ref("/users/"+t.uid).set(e.getters[x])):O.auth().getRedirectResult().then(function(t){e.commit(C,t.user),e.commit(S,!1)}).catch(function(t){return e.commit(C,null),e.commit(S,!1),console.log(t),B.a.reject(t)})})}),X()(mi,w.SIGN_OUT,function(e){return new B.a(function(t,i){O.auth().signOut().then(function(){e.commit(C,null),t()}).catch(function(t){e.commit(C,null),i(t)})})}),X()(mi,w.DELETE_USER,function(e){return O.auth().currentUser.delete()}),mi),Pi=(xi={},X()(xi,C,function(e,t){t?(e.user={uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL},e.authorityLoading=!1):(e.user=null,e.authorityLoading=!0)}),X()(xi,S,function(e,t){e.authorityLoading=t}),xi),Ii=(_i={},X()(_i,x,function(e,t){return e.user}),X()(_i,_,function(e,t){return e.authorityLoading}),X()(_i,b,function(e,t,i,n){return function(t){var i=t.fileKey,r=n["files/"+vt]({fileKey:i}),o=e.user;if(r){if(r.public&&r.public.write)return!0;if(!o)return!1;var s=r.users?r.users[o.uid]:null;return!!s&&s.write}return!1}}),_i),Wi={namespaced:!0,state:{user:function(e){return Q()({},{uid:null,displayName:null,email:null,photoURL:null},e)}(),authorityLoading:!0},modules:{},actions:Ui,mutations:Pi,getters:Ii},ji={namespaced:!0,state:{users:{}},modules:{},actions:(bi={},X()(bi,Xt,function(e,t){var i=t.uid;return e.getters[Vt][i]?B.a.resolve():O.database().ref("/users/"+i).once("value").then(function(t){var i=t.val();return i&&e.commit(Yt,{users:X()({},i.uid,i)}),B.a.resolve()})}),X()(bi,qt,function(e,t){var i=t.email,n=e.getters[Vt];return $()(n).find(function(e){return n[e].email===i})?B.a.resolve():O.database().ref("/users").orderByChild("email").equalTo(i).once("value").then(function(t){var i=t.val();return i&&e.commit(Yt,{users:i}),B.a.resolve()})}),X()(bi,Qt,function(e,t){var i=t.users;return B.a.all($()(i).map(function(t){return e.dispatch(Xt,{uid:t})}))}),X()(bi,Gt,function(e,t){var i=t.emailList;return B.a.all(i.map(function(t){return e.dispatch(qt,{email:t})}))}),bi),mutations:X()({},Yt,function(e,t){var i=t.users;$()(i).forEach(function(t){i[t]?p.a.set(e.users,t,i[t]):p.a.delete(e.users,t)})}),getters:X()({},Vt,function(e){return e.users})},zi=function(e,t){var i=t.file,n=O.auth().currentUser.uid,r=O.database().ref().child("file_authorities").push().key;return O.database().ref("/file_authorities/"+r+"/users/"+n).set({write:!0,owner:!0}).then(function(){e.commit(Tt,{fileAuthorities:X()({},r,{users:X()({},n,{write:!0,owner:!0})})});var t=Q()({},function(e){return Q()({},{name:"",nodeCount:0,created:0,updated:0},e)}(i),{created:O.database.ServerValue.TIMESTAMP,updated:O.database.ServerValue.TIMESTAMP}),o={};return o["/files/"+r]=t,o["/work_spaces/"+n+"/files/"+r]=!0,O.database().ref().update(o).then(function(){return B.a.resolve({fileKey:r})})})},$i={namespaced:!0,state:{files:{},fileAuthorities:{},sharedFiles:{},sharedFileAuthorities:{},permissionDenied:!1},modules:{},actions:(wi={},X()(wi,gt,function(e,t){var i=t.key;O.database().ref("/file_authorities").off(),e.commit(Mt,{permissionDenied:!1});var n=!1,r=void 0;if(O.auth().currentUser){var o=O.auth().currentUser.uid;r=O.database().ref("/work_spaces/"+o+"/files/"+i).once("value").then(function(e){return n=e.exists(),B.a.resolve()})}else r=B.a.resolve();return r.then(function(){O.database().ref("/file_authorities/"+i).on("value",function(t){e.commit(Mt,{permissionDenied:!1});var r=t.val();n?e.commit(Tt,{fileAuthorities:X()({},i,r)}):e.commit(At,{sharedFileAuthorities:X()({},i,r)})},function(t){e.commit(Mt,{permissionDenied:!0})}),O.database().ref("/files/"+i).once("value").then(function(t){var r=t.val();n?e.commit(kt,{files:X()({},i,r)}):e.commit(Nt,{sharedFiles:X()({},i,r)})}).catch(function(t){return e.commit(Mt,{permissionDenied:!0}),B.a.resolve()})})}),X()(wi,mt,function(e,t){e.commit(Ot);var i=O.auth().currentUser.uid;O.database().ref("/work_spaces/"+i).once("value").then(function(t){var i=t.val();if(i){var n=i.files||{},r=i.invited_files||{};$()(n).forEach(function(t){O.database().ref("/file_authorities/"+t).once("value").then(function(i){var n=i.val();e.commit(Tt,{fileAuthorities:X()({},t,n)})}),O.database().ref("/files/"+t).once("value").then(function(i){var n=i.val();e.commit(kt,{files:X()({},t,n)})})}),$()(r).forEach(function(t){O.database().ref("/file_authorities/"+t).once("value").then(function(i){var n=i.val();e.commit(At,{sharedFileAuthorities:X()({},t,n)})}),O.database().ref("/files/"+t).once("value").then(function(i){var n=i.val();e.commit(Nt,{sharedFiles:X()({},t,n)})})})}})}),X()(wi,xt,function(e,t){var i=t.files,n=void 0===i?{}:i,r=$()(n).reduce(function(e,t){return e["/files/"+t]=n[t],e},{});O.database().ref().update(r).then(function(){e.commit(kt,{files:n})})}),X()(wi,_t,function(e,t){var i=t.file;return zi(e,{file:void 0===i?{}:i}).then(function(t){var i=t.fileKey;return O.database().ref("/files/"+i).once("value").then(function(t){e.commit(kt,{files:X()({},i,t.val())})})})}),X()(wi,bt,function(e,t){var i=t.fileKey,n=e.state.files[i]||e.state.sharedFiles[i];return n?zi(e,{file:n}).then(function(t){var r=t.fileKey,o=function(){return O.database().ref("/files/"+r).once("value").then(function(t){e.commit(kt,{files:X()({},r,t.val())})})};return n.nodeCount>0?O.database().ref("nodes/"+i).once("value").then(function(e){return O.database().ref("nodes/"+r).update(e.val())}).then(function(){return o()}):o()}):B.a.reject(new Error("not found the file: "+i))}),X()(wi,wt,function(e,t){var i=t.files,n=O.auth().currentUser.uid,r=$()(i).reduce(function(e,t){return e["/work_spaces/"+n+"/files/"+t]=null,e},{});O.database().ref().update(r).then(function(){return e.commit(kt,{files:i}),B.a.resolve()})}),X()(wi,Ct,function(e,t){var i=t.email,n=t.fileKey,r=t.readOnly,o=O.database().ref().child("file_invitations").push().key;O.database().ref("/file_invitations/"+n+"/"+o).set({email:i,write:!r}).then(function(){})}),X()(wi,St,function(e,t){var i=t.publicFile,n=t.readOnly,r=t.fileKey,o=i?{write:!n}:null;return O.database().ref("/file_authorities/"+r+"/public").set(o).then(function(){return O.database().ref("/file_authorities/"+r).once("value")}).then(function(t){var i=e.getters[pt]({fileKey:r}),n=t.val();i?e.commit(Tt,{fileAuthorities:X()({},r,n)}):e.commit(At,{sharedFileAuthorities:X()({},r,n)})})}),X()(wi,Et,function(e,t){var i=t.userAuthorities,n=t.fileKey,r=$()(i).reduce(function(e,t){var r=i[t];return r?e["/file_authorities/"+n+"/users/"+t]=r:(e["/file_authorities/"+n+"/users/"+t]=null,e["/work_spaces/"+t+"/invited_files/"+n]=null),e},{});return O.database().ref().update(r)}),wi),mutations:(Ci={},X()(Ci,kt,function(e,t){var i=t.files;$()(i).forEach(function(t){i[t]?p.a.set(e.files,t,i[t]):p.a.delete(e.files,t)})}),X()(Ci,Tt,function(e,t){var i=t.fileAuthorities;$()(i).forEach(function(t){i[t]?p.a.set(e.fileAuthorities,t,i[t]):p.a.delete(e.fileAuthorities,t)})}),X()(Ci,Nt,function(e,t){var i=t.sharedFiles;$()(i).forEach(function(t){i[t]?p.a.set(e.sharedFiles,t,i[t]):p.a.delete(e.sharedFiles,t)})}),X()(Ci,At,function(e,t){var i=t.sharedFileAuthorities;$()(i).forEach(function(t){i[t]?p.a.set(e.sharedFileAuthorities,t,i[t]):p.a.delete(e.sharedFileAuthorities,t)})}),X()(Ci,Ot,function(e){e.files={},e.fileAuthorities={},e.sharedFiles={},e.sharedFileAuthorities={}}),X()(Ci,Mt,function(e,t){var i=t.permissionDenied;e.permissionDenied=i}),Ci),getters:(Si={},X()(Si,ct,function(e){return e.files}),X()(Si,ut,function(e){return e.fileAuthorities}),X()(Si,dt,function(e){return e.sharedFiles}),X()(Si,ht,function(e){return e.sharedFileAuthorities}),X()(Si,ft,function(e){return function(t){var i=t.fileKey;return e.sharedFiles[i]||e.files[i]||null}}),X()(Si,vt,function(e){return function(t){var i=t.fileKey;return e.sharedFileAuthorities[i]||e.fileAuthorities[i]||null}}),X()(Si,pt,function(e){return function(t){return t.fileKey in e.files}}),X()(Si,yt,function(e){return e.permissionDenied}),Si)},Hi={namespaced:!0,state:{nodeColor:"#B3E5FC",textColor:"#000000"},modules:{},actions:(Ei={},X()(Ei,Rt,function(e,t){var i=t.nodeColor;e.commit(Lt,{nodeColor:i})}),X()(Ei,Ft,function(e,t){var i=t.textColor;e.commit(Ut,{textColor:i})}),Ei),mutations:(ki={},X()(ki,Lt,function(e,t){var i=t.nodeColor;e.nodeColor=i}),X()(ki,Ut,function(e,t){var i=t.textColor;e.textColor=i}),ki),getters:(Ti={},X()(Ti,Kt,function(e){return e.nodeColor}),X()(Ti,Dt,function(e){return e.textColor}),Ti)};p.a.use(m.a);var Bi=new m.a.Store({strict:!1,namespaced:!0,state:{},modules:{files:$i,layouts:Ai,nodes:Li,settings:Hi,user:Wi,users:ji},mutations:{}}),Vi=i("3EgV"),Xi=i.n(Vi),qi={install:function(e){var t={scrollX:0,scrollY:0,width:0,height:0},i=function(){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight};window.addEventListener("resize",i),i(),e.util.defineReactive(e.prototype,"$window",t)}};p.a.use(qi);var Qi=i("Sst2"),Gi={install:function(e){e.util.defineReactive(e.prototype,"$isMobile",Qi)}};p.a.use(Gi);var Yi=i("pFYg"),Zi=i.n(Yi);console.log("app version: 0.0.16");var Ji={accessToken:"e04b82a2f3814043855eba2262729877",captureUncaught:"production"===Object({NODE_ENV:"production"}),payload:{environment:"production"}};!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var n=i(1),r=i(4);(Ji=Ji||{}).rollbarJsUrl=Ji.rollbarJsUrl||"https://cdnjs.cloudflare.com/ajax/libs/rollbar.js/2.3.1/rollbar.min.js",Ji.async=void 0===Ji.async||Ji.async;var o=n.setupShim(window,Ji),s=r(Ji);window.rollbar=n.Rollbar,o.loadFull(window,document,!Ji.async,Ji,s)},function(e,t,i){function n(e){return function(){try{return e.apply(this,arguments)}catch(e){try{console.error("[Rollbar]: Internal error",e)}catch(e){}}}}function r(e,t){this.options=e,this._rollbarOldOnError=null;var i=a++;this.shimId=function(){return i},window&&window._rollbarShims&&(window._rollbarShims[i]={handler:t,messages:[]})}function o(e){return n(function(){var t=Array.prototype.slice.call(arguments,0),i={shim:this,method:e,args:t,ts:new Date};window._rollbarShims[this.shimId()].messages.push(i)})}var s=i(2),a=0,l=i(3).bind(null,function(e,t){return new r(e,t)});r.prototype.loadFull=function(e,t,i,r,o){var s=!1,a=t.createElement("script"),l=t.getElementsByTagName("script")[0],c=l.parentNode;a.crossOrigin="",a.src=r.rollbarJsUrl,i||(a.async=!0),a.onload=a.onreadystatechange=n(function(){if(!(s||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){a.onload=a.onreadystatechange=null;try{c.removeChild(a)}catch(e){}s=!0,function(){var t;if(void 0===e._rollbarDidLoad){t=new Error("rollbar.js did not load");for(var i,n,r,s,a=0;i=e._rollbarShims[a++];)for(i=i.messages||[];n=i.shift();)for(r=n.args||[],a=0;a<r.length;++a)if(s=r[a],"function"==typeof s){s(t);break}}"function"==typeof o&&o(t)}()}}),c.insertBefore(a,l)},r.prototype.wrap=function(e,t,i){try{var n;if(n="function"==typeof t?t:function(){return t||{}},"function"!=typeof e)return e;if(e._isWrap)return e;if(!e._rollbar_wrapped&&(e._rollbar_wrapped=function(){i&&"function"==typeof i&&i.apply(this,arguments);try{return e.apply(this,arguments)}catch(i){var t=i;throw"string"==typeof t&&(t=new String(t)),t._rollbarContext=n()||{},t._rollbarContext._wrappedSource=e.toString(),window._rollbarWrappedError=t,t}},e._rollbar_wrapped._isWrap=!0,e.hasOwnProperty))for(var r in e)e.hasOwnProperty(r)&&(e._rollbar_wrapped[r]=e[r]);return e._rollbar_wrapped}catch(t){return e}};for(var c="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,captureDomContentLoaded,captureLoad".split(","),u=0;u<c.length;++u)r.prototype[c[u]]=o(c[u]);e.exports={setupShim:function(e,t){var i=t.globalAlias||"Rollbar";if("object"==Zi()(e[i]))return e[i];e._rollbarShims={},e._rollbarWrappedError=null;var r=new l(t);return n(function(){t.captureUncaught&&(r._rollbarOldOnError=e.onerror,s.captureUncaughtExceptions(e,r,!0),s.wrapGlobals(e,r,!0)),t.captureUnhandledRejections&&s.captureUnhandledRejections(e,r,!0);var n=t.autoInstrument;return(void 0===n||!0===n||"object"==(void 0===n?"undefined":Zi()(n))&&n.network)&&e.addEventListener&&(e.addEventListener("load",r.captureLoad.bind(r)),e.addEventListener("DOMContentLoaded",r.captureDomContentLoaded.bind(r))),e[i]=r,r})()},Rollbar:l}},function(e,t){e.exports={captureUncaughtExceptions:function(e,t,i){if(e){var n;"function"==typeof t._rollbarOldOnError?n=t._rollbarOldOnError:e.onerror&&!e.onerror.belongsToShim&&(n=e.onerror,t._rollbarOldOnError=n);var r=function(){var i=Array.prototype.slice.call(arguments,0);!function(e,t,i,n){e._rollbarWrappedError&&(n[4]||(n[4]=e._rollbarWrappedError),n[5]||(n[5]=e._rollbarWrappedError._rollbarContext),e._rollbarWrappedError=null),t.handleUncaughtException.apply(t,n),i&&i.apply(e,n)}(e,t,n,i)};r.belongsToShim=i,e.onerror=r}},captureUnhandledRejections:function(e,t,i){if(e){"function"==typeof e._rollbarURH&&e._rollbarURH.belongsToShim&&e.removeEventListener("unhandledrejection",e._rollbarURH);var n=function(e){var i=e.reason,n=e.promise,r=e.detail;!i&&r&&(i=r.reason,n=r.promise),t&&t.handleUnhandledRejection&&t.handleUnhandledRejection(i,n)};n.belongsToShim=i,e._rollbarURH=n,e.addEventListener("unhandledrejection",n)}},wrapGlobals:function(e,t,i){if(e){var n,r,o="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(n=0;n<o.length;++n)e[r=o[n]]&&e[r].prototype&&function(e,t,i){if(t.hasOwnProperty&&t.hasOwnProperty("addEventListener")){for(var n=t.addEventListener;n._rollbarOldAdd&&n.belongsToShim;)n=n._rollbarOldAdd;var r=function(t,i,r){n.call(this,t,e.wrap(i),r)};r._rollbarOldAdd=n,r.belongsToShim=i,t.addEventListener=r;for(var o=t.removeEventListener;o._rollbarOldRemove&&o.belongsToShim;)o=o._rollbarOldRemove;var s=function(e,t,i){o.call(this,e,t&&t._rollbar_wrapped||t,i)};s._rollbarOldRemove=o,s.belongsToShim=i,t.removeEventListener=s}}(t,e[r].prototype,i)}}}},function(e,t){function i(e,t){this.impl=e(t,this),this.options=t,function(e){for(var t=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);if(this.impl[e])return this.impl[e].apply(this.impl,t)}},i="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,_createItem,wrap,loadFull,shimId,captureDomContentLoaded,captureLoad".split(","),n=0;n<i.length;n++)e[i[n]]=t(i[n])}(i.prototype)}i.prototype._swapAndProcessMessages=function(e,t){this.impl=e(this.options);for(var i,n,r;i=t.shift();)n=i.method,r=i.args,this[n]&&"function"==typeof this[n]&&("captureDomContentLoaded"===n||"captureLoad"===n?this[n].apply(this,[r[0],i.ts]):this[n].apply(this,r));return this},e.exports=i},function(e,t){e.exports=function(e){return function(t){if(!t&&!window._rollbarInitialized){for(var i,n,r=(e=e||{}).globalAlias||"Rollbar",o=window.rollbar,s=function(e){return new o(e)},a=0;i=window._rollbarShims[a++];)n||(n=i.handler),i.handler._swapAndProcessMessages(s,i.messages);window[r]=n,window._rollbarInitialized=!0}}}}]),p.a.config.errorHandler=function(e,t,i){t.$options.propsData&&console.log("Props passed to component",t.$options.propsData);var n="Error in component: <"+t.$options.name+" />\n";throw i&&(n+="Error occurred during lifecycle hook: "+i+"\n"),console.log(n),"production"===Object({NODE_ENV:"production"})&&window.Rollbar.error(n,e),e};i("o8dz"),i("7zck"),i("5myX"),i("H/op");p.a.use(Xi.a),p.a.config.productionTip=!1,new p.a({el:"#app",router:Ni,store:Bi,template:"<App/>",components:{App:T}})},NjuY:function(e,t){},Tobs:function(e,t){},V8RT:function(e,t){},VDvE:function(e,t){},"iW/r":function(e,t){},"j80+":function(e,t){},nquP:function(e,t){},o8dz:function(e,t){},r75E:function(e,t){},vpxZ:function(e,t){},w7VV:function(e,t){},"y/zs":function(e,t){e.exports="data:image/png;base64,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"},zYKD:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.cd332e0f930794ac17c4.js.map